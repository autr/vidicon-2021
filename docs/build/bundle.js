var app=function(){"use strict";function noop(){}const identity=e=>e;function assign(e,t){for(const n in t)e[n]=t[n];return e}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return"function"==typeof e}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let src_url_equal_anchor;function src_url_equal(e,t){return src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=t,e===src_url_equal_anchor.href}function is_empty(e){return 0===Object.keys(e).length}function subscribe(e,...t){if(null==e)return noop;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function component_subscribe(e,t,n){e.$$.on_destroy.push(subscribe(t,n))}function create_slot(e,t,n,r){if(e){const i=get_slot_context(e,t,n,r);return e[0](i)}}function get_slot_context(e,t,n,r){return e[1]&&r?assign(n.ctx.slice(),e[1](r(t))):n.ctx}function get_slot_changes(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|i[r];return e}return t.dirty|i}return t.dirty}function update_slot_base(e,t,n,r,i,o){if(i){const s=get_slot_context(t,n,r,o);e.p(s,i)}}function get_all_dirty_from_scope(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function exclude_internal_props(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function set_store_value(e,t,n){return e.set(n),t}function action_destroyer(e){return e&&is_function(e.destroy)?e.destroy:noop}const is_client="undefined"!=typeof window;let now=is_client?()=>window.performance.now():()=>Date.now(),raf=is_client?e=>requestAnimationFrame(e):noop;const tasks=new Set;function run_tasks(e){tasks.forEach((t=>{t.c(e)||(tasks.delete(t),t.f())})),0!==tasks.size&&raf(run_tasks)}function loop(e){let t;return 0===tasks.size&&raf(run_tasks),{promise:new Promise((n=>{tasks.add(t={c:e,f:n})})),abort(){tasks.delete(t)}}}function append(e,t){e.appendChild(t)}function insert(e,t,n){e.insertBefore(t,n||null)}function detach(e){e.parentNode.removeChild(e)}function destroy_each(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function element(e){return document.createElement(e)}function svg_element(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function text(e){return document.createTextNode(e)}function space(){return text(" ")}function empty(){return text("")}function listen(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function attr(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function set_svg_attributes(e,t){for(const n in t)attr(e,n,t[n])}function children(e){return Array.from(e.childNodes)}function set_data(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function set_style(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function toggle_class(e,t,n){e.classList[n?"add":"remove"](t)}let current_component;function set_current_component(e){current_component=e}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(e){get_current_component().$$.on_mount.push(e)}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(e){render_callbacks.push(e)}function add_flush_callback(e){flush_callbacks.push(e)}let flushing=!1;const seen_callbacks=new Set;function flush(){if(!flushing){flushing=!0;do{for(let e=0;e<dirty_components.length;e+=1){const t=dirty_components[e];set_current_component(t),update(t.$$)}for(set_current_component(null),dirty_components.length=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const t=render_callbacks[e];seen_callbacks.has(t)||(seen_callbacks.add(t),t())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,flushing=!1,seen_callbacks.clear()}}function update(e){if(null!==e.fragment){e.update(),run_all(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(add_render_callback)}}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(e,t){e&&e.i&&(outroing.delete(e),e.i(t))}function transition_out(e,t,n,r){if(e&&e.o){if(outroing.has(e))return;outroing.add(e),outros.c.push((()=>{outroing.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}const globals="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function get_spread_update(e,t){const n={},r={},i={$$scope:1};let o=e.length;for(;o--;){const s=e[o],a=t[o];if(a){for(const e in s)e in a||(r[e]=1);for(const e in a)i[e]||(n[e]=a[e],i[e]=1);e[o]=a}else for(const e in s)i[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}function get_spread_object(e){return"object"==typeof e&&null!==e?e:{}}function bind(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function create_component(e){e&&e.c()}function mount_component(e,t,n,r){const{fragment:i,on_mount:o,on_destroy:s,after_update:a}=e.$$;i&&i.m(t,n),r||add_render_callback((()=>{const t=o.map(run).filter(is_function);s?s.push(...t):run_all(t),e.$$.on_mount=[]})),a.forEach(add_render_callback)}function destroy_component(e,t){const n=e.$$;null!==n.fragment&&(run_all(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function make_dirty(e,t){-1===e.$$.dirty[0]&&(dirty_components.push(e),schedule_update(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function init(e,t,n,r,i,o,s,a=[-1]){const l=current_component;set_current_component(e);const c=e.$$={fragment:null,ctx:null,props:o,update:noop,not_equal:i,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:blank_object(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};s&&s(c.root);let u=!1;if(c.ctx=n?n(e,t.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return c.ctx&&i(c.ctx[t],c.ctx[t]=o)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](o),u&&make_dirty(e,t)),n})):[],c.update(),u=!0,run_all(c.before_update),c.fragment=!!r&&r(c.ctx),t.target){if(t.hydrate){const e=children(t.target);c.fragment&&c.fragment.l(e),e.forEach(detach)}else c.fragment&&c.fragment.c();t.intro&&transition_in(e.$$.fragment),mount_component(e,t.target,t.anchor,t.customElement),flush()}set_current_component(l)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var browser=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=32)}([function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(6),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=h;var o=n(5);o.inherits=n(2);var s=n(23),a=n(14);o.inherits(h,s);for(var l=i(a.prototype),c=0;c<l.length;c++){var u=l[c];h.prototype[u]||(h.prototype[u]=a.prototype[u])}function h(e){if(!(this instanceof h))return new h(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(e){
/*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
     * @license  MIT
     */
var r=n(38),i=n(39),o=n(40);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=p(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(t,n),i=(e=a(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|f(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?a(e,0):p(e,t);if("Buffer"===t.type&&o(t.data))return p(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(u(t),e=a(e,t<0?0:0|f(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|f(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function d(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(r)return N(e).length;t=(""+t).toLowerCase(),r=!0}}function _(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,s=1,a=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var u=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var h=!0,p=0;p<l;p++)if(c(e,o+p)!==c(t,p)){h=!1;break}if(h)return o}return-1}function v(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function y(e,t,n,r){return q(N(t,e.length-n),e,n,r)}function b(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return b(e,t,n,r)}function x(e,t,n,r){return q(B(t),e,n,r)}function k(e,t,n,r){return q(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function $(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,l,c=e[i],u=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=h}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}(r)}t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return c(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,r){return u(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return h(null,e)},l.allocUnsafeSlow=function(e){return h(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},l.byteLength=d,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return S(this,t,n);case"base64":return $(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(r,i),u=e.slice(t,n),h=0;h<a;++h)if(c[h]!==u[h]){o=c[h],s=u[h];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function S(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function R(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=z(e[o]);return i}function A(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,n,r,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function I(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,o){return o||I(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function M(e,t,n,r,o){return o||I(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;n=new l(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||j(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||j(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=l.isBuffer(e)?e:N(new l(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function B(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(D,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(0))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l,c=[],u=!1,h=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&f())}function f(){if(!u){var e=a(p);u=!0;for(var t=c.length;t;){for(l=c,c=[];++h<t;)l&&l[h].run();h=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function _(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||u||a(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,n(3).Buffer)},function(e,t,n){(function(t){!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,r)}));case 4:return t.nextTick((function(){e.call(null,n,r,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return t.nextTick((function(){e.apply(null,o)}))}}}:e.exports=t}).call(this,n(4))},function(e,t,n){var r=n(3),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){var r=n(17)(Object,"create");e.exports=r},function(e,t,n){var r=n(31);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(96);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(35),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(0))},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,s,a,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(o(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),s=(c=n.slice()).length,l=0;l<s;l++)c[l].apply(this,a);return!0},n.prototype.addListener=function(e,t){var s;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(s=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,o,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(n=this._events[e]).length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){(t=e.exports=n(23)).Stream=t,t.Readable=t,t.Writable=n(14),t.Duplex=n(1),t.Transform=n(27),t.PassThrough=n(45)},function(e,t,n){(function(t,r,i){var o=n(6);function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(void 0),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=v;var a,l=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:o.nextTick;v.WritableState=m;var c=n(5);c.inherits=n(2);var u,h={deprecate:n(44)},p=n(24),f=n(7).Buffer,d=i.Uint8Array||function(){},_=n(25);function g(){}function m(e,t){a=a||n(1),e=e||{};var r=t instanceof a;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,c=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(c||0===c)?c:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===e.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(o.nextTick(i,r),o.nextTick($,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),$(e,t))}(e,n,r,t,i);else{var s=x(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?l(b,e,n,s,i):b(e,n,s,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function v(e){if(a=a||n(1),!(u.call(v,this)||this instanceof a))return new v(e);this._writableState=new m(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),p.call(this)}function y(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function b(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),$(e,t)}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var a=0,l=!0;n;)i[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;i.allBuffers=l,y(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,h=n.callback;if(y(e,t,!1,t.objectMode?1:c.length,c,u,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function k(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),$(e,t)}))}function $(e,t){var n=x(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(k,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}c.inherits(v,p),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,"buffer",{get:h.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===v&&e&&e._writableState instanceof m}})):u=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,n){var r=this._writableState,i=!1,s=!r.objectMode&&function(e){return f.isBuffer(e)||e instanceof d}(e);return s&&!f.isBuffer(e)&&(e=function(e){return f.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=g),r.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),o.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),o.nextTick(r,s),i=!1),i}(this,r,e,n))&&(r.pendingcb++,i=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,n)),t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,a,r,i,o);return l}(this,r,s,e,t,n)),i},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,$(e,t),n&&(t.finished?o.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=_.destroy,v.prototype._undestroy=_.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(4),n(11).setImmediate,n(0))},function(e,t,n){(function(t,n,r){e.exports=function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof _dereq_&&_dereq_;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){return i(t[s][1][e]||e)}),u,u.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){t.exports=function(e){var t=e._SomePromiseArray;function n(e){var n=new t(e),r=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),r}e.any=function(e){return n(e)},e.prototype.any=function(){return n(this)}}},{}],2:[function(e,n,r){var i;try{throw new Error}catch(e){i=e}var o=e("./schedule"),s=e("./queue"),a=e("./util");function l(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new s(16),this._normalQueue=new s(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=o}function c(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function u(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function h(e){this._normalQueue._pushOne(e),this._queueTick()}l.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},l.prototype.hasCustomScheduler=function(){return this._customScheduler},l.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},l.prototype.disableTrampolineIfNecessary=function(){a.hasDevTools&&(this._trampolineEnabled=!1)},l.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},l.prototype.fatalError=function(e,n){n?(t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),t.exit(2)):this.throwLater(e)},l.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout((function(){e(t)}),0);else try{this._schedule((function(){e(t)}))}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.hasDevTools?(l.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?c.call(this,e,t,n):this._schedule((function(){setTimeout((function(){e.call(t,n)}),100)}))},l.prototype.invoke=function(e,t,n){this._trampolineEnabled?u.call(this,e,t,n):this._schedule((function(){e.call(t,n)}))},l.prototype.settlePromises=function(e){this._trampolineEnabled?h.call(this,e):this._schedule((function(){e._settlePromises()}))}):(l.prototype.invokeLater=c,l.prototype.invoke=u,l.prototype.settlePromises=h),l.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var n=e.shift(),r=e.shift();t.call(n,r)}else t._settlePromises()}},l.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},l.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},l.prototype._reset=function(){this._isTickUsed=!1},n.exports=l,n.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){t.exports=function(e,t,n,r){var i=!1,o=function(e,t){this._reject(t)},s=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},a=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},l=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){i||(i=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var c=n(o),u=new e(t);u._propagateFrom(this,1);var h=this._target();if(u._setBoundTo(c),c instanceof e){var p={promiseRejectionQueued:!1,promise:u,target:h,bindingPromise:c};h._then(t,s,void 0,u,p),c._then(a,l,void 0,u,p),u._setOnCancel(c)}else u._resolveCallback(h);return u},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){var r;"undefined"!=typeof Promise&&(r=Promise);var i=e("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(e){}return i},t.exports=i},{"./promise":22}],5:[function(e,t,n){var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}t.exports=function(t){var n=e("./util"),r=n.canEvaluate;function i(e){return function(e,r){var i;if(null!=e&&(i=e[r]),"function"!=typeof i){var o="Object "+n.classString(e)+" has no method '"+n.toString(r)+"'";throw new t.TypeError(o)}return i}(e,this.pop()).apply(e,this)}function o(e){return e[this]}function s(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}n.isIdentifier,t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(i,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t;if("number"==typeof e)t=s;else if(r){var n=(void 0)(e);t=null!==n?n:o}else t=o;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,n){t.exports=function(t,n,r,i){var o=e("./util"),s=o.tryCatch,a=o.errorObj,l=t._async;t.prototype.break=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),l.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=s(e).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),l.throwLater(r.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),l.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){t.exports=function(t){var n=e("./util"),r=e("./es5").keys,i=n.tryCatch,o=n.errorObj;return function(e,s,a){return function(l){var c=a._boundValue();e:for(var u=0;u<e.length;++u){var h=e[u];if(h===Error||null!=h&&h.prototype instanceof Error){if(l instanceof h)return i(s).call(c,l)}else if("function"==typeof h){var p=i(h).call(c,l);if(p===o)return p;if(p)return i(s).call(c,l)}else if(n.isObject(l)){for(var f=r(h),d=0;d<f.length;++d){var _=f[d];if(h[_]!=l[_])continue e}return i(s).call(c,l)}}return t}}}},{"./es5":13,"./util":36}],8:[function(e,t,n){t.exports=function(e){var t=!1,n=[];function r(){this._trace=new r.CapturedTrace(i())}function i(){var e=n.length-1;if(e>=0)return n[e]}return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},r.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},r.prototype._popContext=function(){if(void 0!==this._trace){var e=n.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},r.CapturedTrace=null,r.create=function(){if(t)return new r},r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var n=e.prototype._pushContext,o=e.prototype._popContext,s=e._peekContext,a=e.prototype._peekContext,l=e.prototype._promiseCreated;r.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=o,e._peekContext=s,e.prototype._peekContext=a,e.prototype._promiseCreated=l,t=!1},t=!0,e.prototype._pushContext=r.prototype._pushContext,e.prototype._popContext=r.prototype._popContext,e._peekContext=e.prototype._peekContext=i,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},r}},{}],9:[function(e,n,r){n.exports=function(n,r){var i,o,s,a=n._getDomain,l=n._async,c=e("./errors").Warning,u=e("./util"),h=u.canAttachTrace,p=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,f=/\((?:timers\.js):\d+:\d+\)/,d=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,_=null,g=null,m=!1,v=!(0==u.env("BLUEBIRD_DEBUG")),y=!(0==u.env("BLUEBIRD_WARNINGS")||!v&&!u.env("BLUEBIRD_WARNINGS")),b=!(0==u.env("BLUEBIRD_LONG_STACK_TRACES")||!v&&!u.env("BLUEBIRD_LONG_STACK_TRACES")),w=0!=u.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(y||!!u.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout((function(){e._notifyUnhandledRejection()}),1)}},n.prototype._notifyUnhandledRejectionIsHandled=function(){U("rejectionHandled",i,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),U("unhandledRejection",o,e,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(e,t,n){return z(e,t,n||this)},n.onPossiblyUnhandledRejection=function(e){var t=a();o="function"==typeof e?null===t?e:u.domainBind(t,e):void 0},n.onUnhandledRejectionHandled=function(e){var t=a();i="function"==typeof e?null===t?e:u.domainBind(t,e):void 0};var x=function(){};n.longStackTraces=function(){if(l.haveItemsQueued()&&!Z.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Z.longStackTraces&&Y()){var e=n.prototype._captureStackTrace,t=n.prototype._attachExtraTrace;Z.longStackTraces=!0,x=function(){if(l.haveItemsQueued()&&!Z.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=e,n.prototype._attachExtraTrace=t,r.deactivateLongStackTraces(),l.enableTrampoline(),Z.longStackTraces=!1},n.prototype._captureStackTrace=M,n.prototype._attachExtraTrace=D,r.activateLongStackTraces(),l.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return Z.longStackTraces&&Y()};var k=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return u.global.dispatchEvent(e),function(e,t){var n=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!u.global.dispatchEvent(n)}}return"function"==typeof Event?(e=new Event("CustomEvent"),u.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,!u.global.dispatchEvent(n)}):((e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),u.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!u.global.dispatchEvent(n)})}catch(e){}return function(){return!1}}(),$=u.isNode?function(){return t.emit.apply(t,arguments)}:u.global?function(e){var t="on"+e.toLowerCase(),n=u.global[t];return!!n&&(n.apply(u.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function E(e,t){return{promise:t}}var T={promiseCreated:E,promiseFulfilled:E,promiseRejected:E,promiseResolved:E,promiseCancelled:E,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:E},C=function(e){var t=!1;try{t=$.apply(null,arguments)}catch(e){l.throwLater(e),t=!0}var n=!1;try{n=k(e,T[e].apply(null,arguments))}catch(e){l.throwLater(e),n=!0}return n||t};function S(){return!1}function R(e,t,n){var r=this;try{e(t,n,(function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+u.toString(e));r._attachCancellationCallback(e)}))}catch(e){return e}}function A(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?u.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function P(){return this._onCancelField}function j(e){this._onCancelField=e}function O(){this._cancellationParent=void 0,this._onCancelField=void 0}function L(e,t){if(0!=(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}n.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?n.longStackTraces():!e.longStackTraces&&n.hasLongStackTraces()&&x()),"warnings"in e){var t=e.warnings;Z.warnings=!!t,w=Z.warnings,u.isObject(t)&&"wForgottenReturn"in t&&(w=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!Z.cancellation){if(l.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=O,n.prototype._propagateFrom=L,n.prototype._onCancel=P,n.prototype._setOnCancel=j,n.prototype._attachCancellationCallback=A,n.prototype._execute=R,I=L,Z.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!Z.monitoring?(Z.monitoring=!0,n.prototype._fireEvent=C):!e.monitoring&&Z.monitoring&&(Z.monitoring=!1,n.prototype._fireEvent=S)),n},n.prototype._fireEvent=S,n.prototype._execute=function(e,t,n){try{e(t,n)}catch(e){return e}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(e){},n.prototype._attachCancellationCallback=function(e){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(e,t){};var I=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function F(){var e=this._boundTo;return void 0!==e&&e instanceof n?e.isFulfilled()?e.value():void 0:e}function M(){this._trace=new X(this._peekContext())}function D(e,t){if(h(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=B(e);u.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),u.notEnumerableProp(e,"__stackCleaned__",!0)}}}function z(e,t,r){if(Z.warnings){var i,o=new c(e);if(t)r._attachExtraTrace(o);else if(Z.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var s=B(o);o.stack=s.message+"\n"+s.stack.join("\n")}C("warning",o)||q(o,"",!0)}}function N(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||_.test(r),o=i&&V(r);i&&!o&&(m&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function B(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||_.test(r))break}return n>0&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:N(t)}}function q(e,t,n){if("undefined"!=typeof console){var r;if(u.isObject(e)){var i=e.stack;r=t+g(i,e)}else r=t+String(e);"function"==typeof s?s(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function U(e,t,n,r){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(e){l.throwLater(e)}"unhandledRejection"===e?C(e,n,r)||i||q(n,"Unhandled rejection "):C(e,r)}function H(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{if(t=e&&"function"==typeof e.toString?e.toString():u.toString(e),/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){return e.length<41?e:e.substr(0,38)+"..."}(t)+">, no stack trace)"}function Y(){return"function"==typeof Q}var V=function(){return!1},W=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function G(e){var t=e.match(W);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function X(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);Q(this,X),t>32&&this.uncycle()}u.inherits(X,Error),r.CapturedTrace=X,X.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,i=this;void 0!==i;++r)t.push(i),i=i._parent;for(r=(e=this._length=r)-1;r>=0;--r){var o=t[r].stack;void 0===n[o]&&(n[o]=r)}for(r=0;r<e;++r){var s=n[t[r].stack];if(void 0!==s&&s!==r){s>0&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var a=r>0?t[r-1]:this;s<e-1?(a._parent=t[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var l=a._length+1,c=r-2;c>=0;--c)t[c]._length=l,l++;return}}}},X.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=B(e),n=t.message,r=[t.stack],i=this;void 0!==i;)r.push(N(i.stack.split("\n"))),i=i._parent;!function(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,o=t[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(a=s;a>=0;--a){var l=r[a];if(t[i]!==l)break;t.pop(),i--}t=r}}(r),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(r),u.notEnumerableProp(e,"stack",function(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}(n,r)),u.notEnumerableProp(e,"__stackCleaned__",!0)}};var Q=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():H(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,_=e,g=t;var n=Error.captureStackTrace;return V=function(e){return p.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return _=/@/,g=t,m=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){r="stack"in e}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(g=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?H(t):t.toString()},null):(_=e,g=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(s=function(e){console.warn(e)},u.isNode&&t.stderr.isTTY?s=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:u.isNode||"string"!=typeof(new Error).stack||(s=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var Z={warnings:y,longStackTraces:!1,cancellation:!1,monitoring:!1};return b&&n.longStackTraces(),{longStackTraces:function(){return Z.longStackTraces},warnings:function(){return Z.warnings},cancellation:function(){return Z.cancellation},monitoring:function(){return Z.monitoring},propagateFromFunction:function(){return I},boundValueFunction:function(){return F},checkForgottenReturns:function(e,t,n,r,i){if(void 0===e&&null!==t&&w){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",s="";if(t._trace){for(var a=t._trace.stack.split("\n"),l=N(a),c=l.length-1;c>=0;--c){var u=l[c];if(!f.test(u)){var h=u.match(d);h&&(o="at "+h[1]+":"+h[2]+":"+h[3]+" ");break}}if(l.length>0){var p=l[0];for(c=0;c<a.length;++c)if(a[c]===p){c>0&&(s="\n"+a[c-1]);break}}}var _="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;r._warn(_,!0,t)}},setBounds:function(e,t){if(Y()){for(var n,r,i=e.stack.split("\n"),o=t.stack.split("\n"),s=-1,a=-1,l=0;l<i.length;++l)if(c=G(i[l])){n=c.fileName,s=c.line;break}for(l=0;l<o.length;++l){var c;if(c=G(o[l])){r=c.fileName,a=c.line;break}}s<0||a<0||!n||!r||n!==r||s>=a||(V=function(e){if(p.test(e))return!0;var t=G(e);return!!(t&&t.fileName===n&&s<=t.line&&t.line<=a)})}},warn:z,deprecated:function(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),z(n)},CapturedTrace:X,fireDomEvent:k,fireGlobalEvent:$}}},{"./errors":12,"./util":36}],10:[function(e,t,n){t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1];return this.caught(e,(function(){throw t}))},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var r=arguments[1];return r instanceof e&&r.suppressUnhandledRejections(),this.caught(n,(function(){return r}))}}},{}],11:[function(e,t,n){t.exports=function(e,t){var n=e.reduce,r=e.all;function i(){return r(this)}e.prototype.each=function(e){return n(this,e,t,0)._then(i,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return n(this,e,t,t)},e.each=function(e,r){return n(e,r,t,0)._then(i,void 0,void 0,e,void 0)},e.mapSeries=function(e,r){return n(e,r,t,t)}}},{}],12:[function(e,t,n){var r,i,o=e("./es5"),s=o.freeze,a=e("./util"),l=a.inherits,c=a.notEnumerableProp;function u(e,t){function n(r){if(!(this instanceof n))return new n(r);c(this,"message","string"==typeof r?r:t),c(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(n,Error),n}var h=u("Warning","warning"),p=u("CancellationError","cancellation error"),f=u("TimeoutError","timeout error"),d=u("AggregateError","aggregate error");try{r=TypeError,i=RangeError}catch(e){r=u("TypeError","type error"),i=u("RangeError","range error")}for(var _="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<_.length;++g)"function"==typeof Array.prototype[_[g]]&&(d.prototype[_[g]]=Array.prototype[_[g]]);o.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var m=0;function v(e){if(!(this instanceof v))return new v(e);c(this,"name","OperationalError"),c(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(c(this,"message",e.message),c(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}d.prototype.toString=function(){var e=Array(4*m+1).join(" "),t="\n"+e+"AggregateError of:\n";m++,e=Array(4*m+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];t+=(r=i.join("\n"))+"\n"}return m--,t},l(v,Error);var y=Error.__BluebirdErrorTypes__;y||(y=s({CancellationError:p,TimeoutError:f,OperationalError:v,RejectionError:v,AggregateError:d}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:y,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:r,RangeError:i,CancellationError:y.CancellationError,OperationalError:y.OperationalError,TimeoutError:y.TimeoutError,AggregateError:y.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t};t.exports={isArray:function(e){try{return"[object Array]"===o.call(e)}catch(e){return!1}},keys:a,names:a,defineProperty:function(e,t,n){return e[t]=n.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return s}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,i){return n(e,r,i,t)}}},{}],15:[function(e,t,n){t.exports=function(t,n,r){var i=e("./util"),o=t.CancellationError,s=i.errorObj,a=e("./catch_filter")(r);function l(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function c(e){this.finallyHandler=e}function u(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function h(){return f.call(this,this.promise._target()._settledValue())}function p(e){if(!u(this,e))return s.e=e,s}function f(e){var i=this.promise,a=this.handler;if(!this.called){this.called=!0;var l=this.isFinallyHandler()?a.call(i._boundValue()):a.call(i._boundValue(),e);if(l===r)return l;if(void 0!==l){i._setReturnedNonUndefined();var f=n(l,i);if(f instanceof t){if(null!=this.cancelPromise){if(f._isCancelled()){var d=new o("late cancellation observer");return i._attachExtraTrace(d),s.e=d,s}f.isPending()&&f._attachCancellationCallback(new c(this))}return f._then(h,p,void 0,this,void 0)}}}return i.isRejected()?(u(this),s.e=e,s):(u(this),e)}return l.prototype.isFinallyHandler=function(){return 0===this.type},c.prototype._resultCancelled=function(){u(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,new l(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,f,f)},t.prototype.tap=function(e){return this._passThrough(e,1,f)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,f);var r,o=new Array(n-1),s=0;for(r=0;r<n-1;++r){var l=arguments[r];if(!i.isObject(l))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(l)));o[s++]=l}o.length=s;var c=arguments[r];return this._passThrough(a(o,c,this),1,void 0,f)},l}},{"./catch_filter":7,"./util":36}],16:[function(e,t,n){t.exports=function(t,n,r,i,o,s){var a=e("./errors").TypeError,l=e("./util"),c=l.errorObj,u=l.tryCatch,h=[];function p(e,n,i,o){if(s.cancellation()){var a=new t(r),l=this._finallyPromise=new t(r);this._promise=a.lastly((function(){return l})),a._captureStackTrace(),a._setOnCancel(this)}else(this._promise=new t(r))._captureStackTrace();this._stack=o,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}l.inherits(p,o),p.prototype._isResolved=function(){return null===this._promise},p.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},p.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if(void 0!==this._generator.return)this._promise._pushContext(),e=u(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),e=u(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},p.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=u(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},p.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=u(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},p.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},p.prototype.promise=function(){return this._promise},p.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},p.prototype._continue=function(e){var n=this._promise;if(e===c)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var r=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(o instanceof t||null!==(o=function(e,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=u(n[o])(e);if(r._popContext(),s===c){r._pushContext();var a=t.reject(c.e);return r._popContext(),a}var l=i(s,r);if(l instanceof t)return l}return null}(o,this._yieldHandlers,this._promise))){var s=(o=o._target())._bitField;0==(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&s)?t._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&s)?t._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},t.coroutine=function(e,t){if("function"!=typeof e)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,r=p,i=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new r(void 0,void 0,n,i),s=o.promise();return o._generator=t,o._promiseFulfilled(void 0),s}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new a("expecting a function but got "+l.classString(e));h.push(e)},t.spawn=function(e){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new p(e,this),i=r.promise();return r._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t,n){t.exports=function(t,n,r,i,o,s){var a=e("./util");a.canEvaluate,a.tryCatch,a.errorObj,t.join=function(){var e,t=arguments.length-1;t>0&&"function"==typeof arguments[t]&&(e=arguments[t]);var r=[].slice.call(arguments);e&&r.pop();var i=new n(r).promise();return void 0!==e?i.spread(e):i}}},{"./util":36}],18:[function(e,t,n){t.exports=function(t,n,r,i,o,s){var a=t._getDomain,l=e("./util"),c=l.tryCatch,u=l.errorObj,h=t._async;function p(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var i=a();this._callback=null===i?t:l.domainBind(i,t),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],h.invoke(this._asyncInit,this,void 0)}function f(e,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+l.classString(n));var s=0;if(void 0!==i){if("object"!=typeof i||null===i)return t.reject(new TypeError("options argument must be an object but it is "+l.classString(i)));if("number"!=typeof i.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+l.classString(i.concurrency)));s=i.concurrency}return new p(e,n,s="number"==typeof s&&isFinite(s)&&s>=1?s:0,o).promise()}l.inherits(p,n),p.prototype._asyncInit=function(){this._init$(void 0,-2)},p.prototype._init=function(){},p.prototype._promiseFulfilled=function(e,n){var r=this._values,o=this.length(),a=this._preservedValues,l=this._limit;if(n<0){if(r[n=-1*n-1]=e,l>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(l>=1&&this._inFlight>=l)return r[n]=e,this._queue.push(n),!1;null!==a&&(a[n]=e);var h=this._promise,p=this._callback,f=h._boundValue();h._pushContext();var d=c(p).call(f,e,n,o),_=h._popContext();if(s.checkForgottenReturns(d,_,null!==a?"Promise.filter":"Promise.map",h),d===u)return this._reject(d.e),!0;var g=i(d,this._promise);if(g instanceof t){var m=(g=g._target())._bitField;if(0==(50397184&m))return l>=1&&this._inFlight++,r[n]=g,g._proxy(this,-1*(n+1)),!1;if(0==(33554432&m))return 0!=(16777216&m)?(this._reject(g._reason()),!0):(this._cancel(),!0);d=g._value()}r[n]=d}return++this._totalResolved>=o&&(null!==a?this._filter(r,a):this._resolve(r),!0)},p.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},p.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,o=0;o<n;++o)e[o]&&(r[i++]=t[o]);r.length=i,this._resolve(r)},p.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return f(this,e,t,null)},t.map=function(e,t,n,r){return f(e,t,n,r)}}},{"./util":36}],19:[function(e,t,n){t.exports=function(t,n,r,i,o){var s=e("./util"),a=s.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+s.classString(e));return function(){var r=new t(n);r._captureStackTrace(),r._pushContext();var i=a(e).apply(this,arguments),s=r._popContext();return o.checkForgottenReturns(i,s,"Promise.method",r),r._resolveFromSyncValue(i),r}},t.attempt=t.try=function(e){if("function"!=typeof e)return i("expecting a function but got "+s.classString(e));var r,l=new t(n);if(l._captureStackTrace(),l._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],u=arguments[2];r=s.isArray(c)?a(e).apply(u,c):a(e).call(u,c)}else r=a(e)();var h=l._popContext();return o.checkForgottenReturns(r,h,"Promise.try",l),l._resolveFromSyncValue(r),l},t.prototype._resolveFromSyncValue=function(e){e===s.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){var r=e("./util"),i=r.maybeWrapAsError,o=e("./errors").OperationalError,s=e("./es5"),a=/^(?:name|message|stack|cause)$/;function l(e){var t;if(function(e){return e instanceof Error&&s.getPrototypeOf(e)===Error.prototype}(e)){(t=new o(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var n=s.keys(e),i=0;i<n.length;++i){var l=n[i];a.test(l)||(t[l]=e[l])}return t}return r.markAsOriginatingFromRejection(e),e}t.exports=function(e,t){return function(n,r){if(null!==e){if(n){var o=l(i(n));e._attachExtraTrace(o),e._reject(o)}else if(t){var s=[].slice.call(arguments,1);e._fulfill(s)}else e._fulfill(r);e=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){t.exports=function(t){var n=e("./util"),r=t._async,i=n.tryCatch,o=n.errorObj;function s(e,t){if(!n.isArray(e))return a.call(this,e,t);var s=i(t).apply(this._boundValue(),[null].concat(e));s===o&&r.throwLater(s.e)}function a(e,t){var n=this._boundValue(),s=void 0===e?i(t).call(n,null):i(t).call(n,null,e);s===o&&r.throwLater(s.e)}function l(e,t){if(!e){var n=new Error(e+"");n.cause=e,e=n}var s=i(t).call(this._boundValue(),e);s===o&&r.throwLater(s.e)}t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var n=a;void 0!==t&&Object(t).spread&&(n=s),this._then(n,l,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,n,r){n.exports=function(){var r=function(){return new d("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new R.PromiseInspection(this._target())},o=function(e){return R.reject(new d(e))};function s(){}var a,l={},c=e("./util");a=c.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},c.notEnumerableProp(R,"_getDomain",a);var u=e("./es5"),h=e("./async"),p=new h;u.defineProperty(R,"_async",{value:p});var f=e("./errors"),d=R.TypeError=f.TypeError;R.RangeError=f.RangeError;var _=R.CancellationError=f.CancellationError;R.TimeoutError=f.TimeoutError,R.OperationalError=f.OperationalError,R.RejectionError=f.OperationalError,R.AggregateError=f.AggregateError;var g=function(){},m={},v={},y=e("./thenables")(R,g),b=e("./promise_array")(R,g,y,o,s),w=e("./context")(R),x=w.create,k=e("./debuggability")(R,w),$=(k.CapturedTrace,e("./finally")(R,y,v)),E=e("./catch_filter")(v),T=e("./nodeback"),C=c.errorObj,S=c.tryCatch;function R(e){e!==g&&function(e,t){if(null==e||e.constructor!==R)throw new d("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new d("expecting a function but got "+c.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function A(e){this.promise._resolveCallback(e)}function P(e){this.promise._rejectCallback(e,!1)}function j(e){var t=new R(g);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return R.prototype.toString=function(){return"[object Promise]"},R.prototype.caught=R.prototype.catch=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),i=0;for(n=0;n<t-1;++n){var s=arguments[n];if(!c.isObject(s))return o("Catch statement predicate: expecting an object but got "+c.classString(s));r[i++]=s}return r.length=i,e=arguments[n],this.then(void 0,E(r,e,this))}return this.then(void 0,e)},R.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},R.prototype.then=function(e,t){if(k.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+c.classString(e);arguments.length>1&&(n+=", "+c.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},R.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},R.prototype.spread=function(e){return"function"!=typeof e?o("expecting a function but got "+c.classString(e)):this.all()._then(e,void 0,void 0,m,void 0)},R.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},R.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new b(this).promise()},R.prototype.error=function(e){return this.caught(c.originatesFromRejection,e)},R.getNewLibraryCopy=n.exports,R.is=function(e){return e instanceof R},R.fromNode=R.fromCallback=function(e){var t=new R(g);t._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=S(e)(T(t,n));return r===C&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},R.all=function(e){return new b(e).promise()},R.cast=function(e){var t=y(e);return t instanceof R||((t=new R(g))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},R.resolve=R.fulfilled=R.cast,R.reject=R.rejected=function(e){var t=new R(g);return t._captureStackTrace(),t._rejectCallback(e,!0),t},R.setScheduler=function(e){if("function"!=typeof e)throw new d("expecting a function but got "+c.classString(e));return p.setScheduler(e)},R.prototype._then=function(e,t,n,r,i){var o=void 0!==i,s=o?i:new R(g),l=this._target(),u=l._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&u)?this._boundValue():l===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var h=a();if(0!=(50397184&u)){var f,d,m=l._settlePromiseCtx;0!=(33554432&u)?(d=l._rejectionHandler0,f=e):0!=(16777216&u)?(d=l._fulfillmentHandler0,f=t,l._unsetRejectionIsUnhandled()):(m=l._settlePromiseLateCancellationObserver,d=new _("late cancellation observer"),l._attachExtraTrace(d),f=t),p.invoke(m,l,{handler:null===h?f:"function"==typeof f&&c.domainBind(h,f),promise:s,receiver:r,value:d})}else l._addCallbacks(e,t,s,r,h);return s},R.prototype._length=function(){return 65535&this._bitField},R.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},R.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},R.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},R.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},R.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},R.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},R.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},R.prototype._isFinal=function(){return(4194304&this._bitField)>0},R.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},R.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},R.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},R.prototype._setAsyncGuaranteed=function(){p.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},R.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==l)return void 0===t&&this._isBound()?this._boundValue():t},R.prototype._promiseAt=function(e){return this[4*e-4+2]},R.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},R.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},R.prototype._boundValue=function(){},R.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);void 0===i&&(i=l),this._addCallbacks(t,n,r,i,null)},R.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=l),this._addCallbacks(n,r,i,o,null)},R.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:c.domainBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:c.domainBind(i,t));else{var s=4*o-4;this[s+2]=n,this[s+3]=r,"function"==typeof e&&(this[s+0]=null===i?e:c.domainBind(i,e)),"function"==typeof t&&(this[s+1]=null===i?t:c.domainBind(i,t))}return this._setLength(o+1),o},R.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},R.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(r(),!1);var n=y(e,this);if(!(n instanceof R))return this._fulfill(e);t&&this._propagateFrom(n,2);var i=n._target();if(i!==this){var o=i._bitField;if(0==(50397184&o)){var s=this._length();s>0&&i._migrateCallback0(this);for(var a=1;a<s;++a)i._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var l=new _("late cancellation observer");i._attachExtraTrace(l),this._reject(l)}}else this._reject(r())}},R.prototype._rejectCallback=function(e,t,n){var r=c.ensureErrorObject(e),i=r===e;if(!i&&!n&&k.warnings()){var o="a promise was rejected with a non-error: "+c.classString(e);this._warn(o,!0)}this._attachExtraTrace(r,!!t&&i),this._reject(e)},R.prototype._resolveFromExecutor=function(e){if(e!==g){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,(function(e){t._resolveCallback(e)}),(function(e){t._rejectCallback(e,n)}));n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)}},R.prototype._settlePromiseFromHandler=function(e,t,n,r){var i=r._bitField;if(0==(65536&i)){var o;r._pushContext(),t===m?n&&"number"==typeof n.length?o=S(e).apply(this._boundValue(),n):(o=C).e=new d("cannot .spread() a non-array: "+c.classString(n)):o=S(e).call(t,n);var s=r._popContext();0==(65536&(i=r._bitField))&&(o===v?r._reject(n):o===C?r._rejectCallback(o.e,!1):(k.checkForgottenReturns(o,s,"",r,this),r._resolveCallback(o)))}},R.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},R.prototype._followee=function(){return this._rejectionHandler0},R.prototype._setFollowee=function(e){this._rejectionHandler0=e},R.prototype._settlePromise=function(e,t,n,r){var o=e instanceof R,a=this._bitField,l=0!=(134217728&a);0!=(65536&a)?(o&&e._invokeInternalOnCancel(),n instanceof $&&n.isFinallyHandler()?(n.cancelPromise=e,S(t).call(n,r)===C&&e._reject(C.e)):t===i?e._fulfill(i.call(n)):n instanceof s?n._promiseCancelled(e):o||e instanceof b?e._cancel():n.cancel()):"function"==typeof t?o?(l&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,r,e)):t.call(n,r,e):n instanceof s?n._isResolved()||(0!=(33554432&a)?n._promiseFulfilled(r,e):n._promiseRejected(r,e)):o&&(l&&e._setAsyncGuaranteed(),0!=(33554432&a)?e._fulfill(r):e._reject(r))},R.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,i=e.value;"function"==typeof t?n instanceof R?this._settlePromiseFromHandler(t,r,i,n):t.call(r,i,n):n instanceof R&&n._reject(i)},R.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},R.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,i,t)},R.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},R.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=r();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():p.settlePromises(this))}},R.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return p.fatalError(e,c.isNode);(65535&t)>0?p.settlePromises(this):this._ensurePossibleRejectionHandled()}},R.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},R.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},R.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},R.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},R.defer=R.pending=function(){return k.deprecated("Promise.defer","new Promise"),{promise:new R(g),resolve:A,reject:P}},c.notEnumerableProp(R,"_makeSelfResolutionError",r),e("./method")(R,g,y,o,k),e("./bind")(R,g,y,k),e("./cancel")(R,b,o,k),e("./direct_resolve")(R),e("./synchronous_inspection")(R),e("./join")(R,b,y,g,p,a),R.Promise=R,R.version="3.5.1",e("./map.js")(R,b,o,y,g,k),e("./call_get.js")(R),e("./using.js")(R,o,y,x,g,k),e("./timers.js")(R,g,k),e("./generators.js")(R,o,g,y,s,k),e("./nodeify.js")(R),e("./promisify.js")(R,g),e("./props.js")(R,b,y,o),e("./race.js")(R,g,y,o),e("./reduce.js")(R,b,o,y,g,k),e("./settle.js")(R,b,k),e("./some.js")(R,b,o),e("./filter.js")(R,g),e("./each.js")(R,g),e("./any.js")(R),c.toFastProperties(R),c.toFastProperties(R.prototype),j({a:1}),j({b:2}),j({c:3}),j(1),j((function(){})),j(void 0),j(!1),j(new R(g)),k.setBounds(h.firstLineError,c.lastLineError),R}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,n){t.exports=function(t,n,r,i,o){var s=e("./util");function a(e){var r=this._promise=new t(n);e instanceof t&&r._propagateFrom(e,3),r._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.isArray,s.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function e(n,o){var a=r(this._values,this._promise);if(a instanceof t){var l=(a=a._target())._bitField;if(this._values=a,0==(50397184&l))return this._promise._setAsyncGuaranteed(),a._then(e,this._reject,void 0,this,o);if(0==(33554432&l))return 0!=(16777216&l)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=s.asArray(a)))0!==a.length?this._iterate(a):-5===o?this._resolveEmptyArray():this._resolve(function(e){switch(o){case-2:return[];case-3:return{};case-6:return new Map}}());else{var c=i("expecting an array or an iterable object but got "+s.classString(a)).reason();this._promise._rejectCallback(c,!1)}},a.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,s=null,a=0;a<n;++a){var l=r(e[a],i);s=l instanceof t?(l=l._target())._bitField:null,o?null!==s&&l.suppressUnhandledRejections():null!==s?0==(50397184&s)?(l._proxy(this,a),this._values[a]=l):o=0!=(33554432&s)?this._promiseFulfilled(l._value(),a):0!=(16777216&s)?this._promiseRejected(l._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(l,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},{"./util":36}],24:[function(e,t,n){t.exports=function(t,n){var r={},i=e("./util"),o=e("./nodeback"),s=i.withAppended,a=i.maybeWrapAsError,l=i.canEvaluate,c=e("./errors").TypeError,u={__isPromisified__:!0},h=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),p=function(e){return i.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function f(e){return!h.test(e)}function d(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function _(e,t,n){var r=i.getDataPropertyOrDefault(e,t+n,u);return!!r&&d(r)}function g(e,t,n,r){for(var o=i.inheritedDataKeys(e),s=[],a=0;a<o.length;++a){var l=o[a],u=e[l],h=r===p||p(l);"function"!=typeof u||d(u)||_(e,l,t)||!r(l,u,e,h)||s.push(l,u)}return function(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<e.length;s+=2)if(e[s]===o)throw new c("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(s,t,n),s}var m=l?void 0:function(e,l,c,u,h,p){var f=function(){return this}(),d=e;function _(){var i=l;l===r&&(i=this);var c=new t(n);c._captureStackTrace();var u="string"==typeof d&&this!==f?this[d]:e,h=o(c,p);try{u.apply(i,s(arguments,h))}catch(e){c._rejectCallback(a(e),!0,!0)}return c._isFateSealed()||c._setAsyncGuaranteed(),c}return"string"==typeof d&&(e=u),i.notEnumerableProp(_,"__isPromisified__",!0),_};function v(e,t,n,o,s){for(var a=new RegExp(function(e){return e.replace(/([$])/,"\\$")}(t)+"$"),l=g(e,t,a,n),c=0,u=l.length;c<u;c+=2){var h=l[c],p=l[c+1],f=h+t;if(o===m)e[f]=m(h,r,h,p,t,s);else{var d=o(p,(function(){return m(h,r,h,p,t,s)}));i.notEnumerableProp(d,"__isPromisified__",!0),e[f]=d}}return i.toFastProperties(e),e}t.promisify=function(e,t){if("function"!=typeof e)throw new c("expecting a function but got "+i.classString(e));if(d(e))return e;var n=void 0===(t=Object(t)).context?r:t.context,o=!!t.multiArgs,s=function(e,t,n){return m(e,t,void 0,e,null,o)}(e,n);return i.copyDescriptors(e,s,f),s},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new c("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(t=Object(t)).multiArgs,r=t.suffix;"string"!=typeof r&&(r="Async");var o=t.filter;"function"!=typeof o&&(o=p);var s=t.promisifier;if("function"!=typeof s&&(s=m),!i.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=i.inheritedDataKeys(e),l=0;l<a.length;++l){var u=e[a[l]];"constructor"!==a[l]&&i.isClass(u)&&(v(u.prototype,r,o,s,n),v(u,r,o,s,n))}return v(e,r,o,s,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){t.exports=function(t,n,r,i){var o,s=e("./util"),a=s.isObject,l=e("./es5");"function"==typeof Map&&(o=Map);var c=function(){var e=0,t=0;function n(n,r){this[e]=n,this[e+t]=r,e++}return function(r){t=r.size,e=0;var i=new Array(2*r.size);return r.forEach(n,i),i}}();function u(e){var t,n=!1;if(void 0!==o&&e instanceof o)t=c(e),n=!0;else{var r=l.keys(e),i=r.length;t=new Array(2*i);for(var s=0;s<i;++s){var a=r[s];t[s]=e[a],t[s+i]=a}}this.constructor$(t),this._isMap=n,this._init$(void 0,n?-6:-3)}function h(e){var n,o=r(e);return a(o)?(n=o instanceof t?o._then(t.props,void 0,void 0,void 0,void 0):new u(o).promise(),o instanceof t&&n._propagateFrom(o,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}s.inherits(u,n),u.prototype._init=function(){},u.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(e){for(var t=new o,n=e.length/2|0,r=0;r<n;++r){var i=e[n+r],s=e[r];t.set(i,s)}return t}(this._values);else{n={};for(var r=this.length(),i=0,s=this.length();i<s;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},u.prototype.shouldCopyValues=function(){return!1},u.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return h(this)},t.props=function(e){return h(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){function r(e){this._capacity=e,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(e){return this._capacity<e},r.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},r.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,n,r,i){for(var o=0;o<i;++o)n[o+r]=e[o+0],e[o+0]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=r},{}],27:[function(e,t,n){t.exports=function(t,n,r,i){var o=e("./util"),s=function(e){return e.then((function(t){return a(t,e)}))};function a(e,a){var l=r(e);if(l instanceof t)return s(l);if(null===(e=o.asArray(e)))return i("expecting an array or an iterable object but got "+o.classString(e));var c=new t(n);void 0!==a&&c._propagateFrom(a,3);for(var u=c._fulfill,h=c._reject,p=0,f=e.length;p<f;++p){var d=e[p];(void 0!==d||p in e)&&t.cast(d)._then(u,h,void 0,c,null)}return c}t.race=function(e){return a(e,void 0)},t.prototype.race=function(){return a(this,void 0)}}},{"./util":36}],28:[function(e,t,n){t.exports=function(t,n,r,i,o,s){var a=t._getDomain,l=e("./util"),c=l.tryCatch;function u(e,n,r,i){this.constructor$(e);var s=a();this._fn=null===s?n:l.domainBind(s,n),void 0!==r&&(r=t.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function h(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function p(e,t,n,i){return"function"!=typeof t?r("expecting a function but got "+l.classString(t)):new u(e,t,n,i).promise()}function f(e){this.accum=e,this.array._gotAccum(e);var n=i(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(d,void 0,void 0,this,void 0)):d.call(this,n)}function d(e){var n,r=this.array,i=r._promise,o=c(r._fn);i._pushContext(),(n=void 0!==r._eachValues?o.call(i._boundValue(),e,this.index,this.length):o.call(i._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(r._currentCancellable=n);var a=i._popContext();return s.checkForgottenReturns(n,a,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),n}l.inherits(u,n),u.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==o&&this._eachValues.push(e)},u.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},u.prototype._init=function(){},u.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},u.prototype.shouldCopyValues=function(){return!1},u.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},u.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},u.prototype._iterate=function(e){var n,r;this._values=e;var i=e.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:e[r],index:r,length:i,array:this};n=n._then(f,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(h,h,void 0,n,this)},t.prototype.reduce=function(e,t){return p(this,e,t,null)},t.reduce=function(e,t,n,r){return p(e,t,n,r)}}},{"./util":36}],29:[function(e,i,o){var s,a=e("./util"),l=a.getNativePromise();if(a.isNode&&"undefined"==typeof MutationObserver){var c=n.setImmediate,u=t.nextTick;s=a.isRecentNode?function(e){c.call(n,e)}:function(e){u.call(t,e)}}else if("function"==typeof l&&"function"==typeof l.resolve){var h=l.resolve();s=function(e){h.then(e)}}else s="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==r?function(e){r(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var e=document.createElement("div"),t={attributes:!0},n=!1,r=document.createElement("div");return new MutationObserver((function(){e.classList.toggle("foo"),n=!1})).observe(r,t),function(i){var o=new MutationObserver((function(){o.disconnect(),i()}));o.observe(e,t),n||(n=!0,r.classList.toggle("foo"))}}();i.exports=s},{"./util":36}],30:[function(e,t,n){t.exports=function(t,n,r){var i=t.PromiseInspection;function o(e){this.constructor$(e)}e("./util").inherits(o,n),o.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(e,t){var n=new i;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},o.prototype._promiseRejected=function(e,t){var n=new i;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return r.deprecated(".settle()",".reflect()"),new o(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){t.exports=function(t,n,r){var i=e("./util"),o=e("./errors").RangeError,s=e("./errors").AggregateError,a=i.isArray,l={};function c(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function u(e,t){if((0|t)!==t||t<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new c(e),i=n.promise();return n.setHowMany(t),n.init(),i}i.inherits(c,n),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=a(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(e){this._howMany=e},c.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},c.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new s,t=this.length();t<this._values.length;++t)this._values[t]!==l&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(e){this._values.push(e)},c.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new o(t)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return u(e,t)},t.prototype.some=function(e){return u(this,e)},t._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(e,t,n){t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return s.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){t.exports=function(t,n){var r=e("./util"),i=r.errorObj,o=r.isObject,s={}.hasOwnProperty;return function(e,a){if(o(e)){if(e instanceof t)return e;var l=function(e){try{return function(e){return e.then}(e)}catch(e){return i.e=e,i}}(e);if(l===i){a&&a._pushContext();var c=t.reject(l.e);return a&&a._popContext(),c}if("function"==typeof l)return function(e){try{return s.call(e,"_promise0")}catch(e){return!1}}(e)?(c=new t(n),e._then(c._fulfill,c._reject,void 0,c,null),c):function(e,o,s){var a=new t(n),l=a;s&&s._pushContext(),a._captureStackTrace(),s&&s._popContext();var c=!0,u=r.tryCatch(o).call(e,(function(e){a&&(a._resolveCallback(e),a=null)}),(function(e){a&&(a._rejectCallback(e,c,!0),a=null)}));return c=!1,a&&u===i&&(a._rejectCallback(u.e,!0,!0),a=null),l}(e,l,a)}return e}}},{"./util":36}],34:[function(e,t,n){t.exports=function(t,n,r){var i=e("./util"),o=t.TimeoutError;function s(e){this.handle=e}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(e){return l(+this).thenReturn(e)},l=t.delay=function(e,i){var o,l;return void 0!==i?(o=t.resolve(i)._then(a,null,null,e,void 0),r.cancellation()&&i instanceof t&&o._setOnCancel(i)):(o=new t(n),l=setTimeout((function(){o._fulfill()}),+e),r.cancellation()&&o._setOnCancel(new s(l)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};function c(e){return clearTimeout(this.handle),e}function u(e){throw clearTimeout(this.handle),e}t.prototype.delay=function(e){return l(e,this)},t.prototype.timeout=function(e,t){var n,a;e=+e;var l=new s(setTimeout((function(){n.isPending()&&function(e,t,n){var r;r="string"!=typeof t?t instanceof Error?t:new o("operation timed out"):new o(t),i.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel()}(n,t,a)}),e));return r.cancellation()?(a=this.then(),(n=a._then(c,u,void 0,l,void 0))._setOnCancel(l)):n=this._then(c,u,void 0,l,void 0),n}}},{"./util":36}],35:[function(e,t,n){t.exports=function(t,n,r,i,o,s){var a=e("./util"),l=e("./errors").TypeError,c=e("./util").inherits,u=a.errorObj,h=a.tryCatch,p={};function f(e){setTimeout((function(){throw e}),0)}function d(e,n){var i=0,s=e.length,a=new t(o);return function o(){if(i>=s)return a._fulfill();var l=function(e){var t=r(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}(e[i++]);if(l instanceof t&&l._isDisposable()){try{l=r(l._getDisposer().tryDispose(n),e.promise)}catch(e){return f(e)}if(l instanceof t)return l._then(o,f,null,null,null)}o()}(),a}function _(e,t,n){this._data=e,this._promise=t,this._context=n}function g(e,t,n){this.constructor$(e,t,n)}function m(e){return _.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function v(e){this.length=e,this.promise=null,this[e-1]=null}_.prototype.data=function(){return this._data},_.prototype.promise=function(){return this._promise},_.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():p},_.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=t!==p?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},_.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},c(g,_),g.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},v.prototype._resultCancelled=function(){for(var e=this.length,n=0;n<e;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return n("you must pass at least 2 arguments to Promise.using");var i,o=arguments[e-1];if("function"!=typeof o)return n("expecting a function but got "+a.classString(o));var l=!0;2===e&&Array.isArray(arguments[0])?(e=(i=arguments[0]).length,l=!1):(i=arguments,e--);for(var c=new v(e),p=0;p<e;++p){var f=i[p];if(_.isDisposer(f)){var g=f;(f=f.promise())._setDisposable(g)}else{var y=r(f);y instanceof t&&(f=y._then(m,null,null,{resources:c,index:p},void 0))}c[p]=f}var b=new Array(c.length);for(p=0;p<b.length;++p)b[p]=t.resolve(c[p]).reflect();var w=t.all(b).then((function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return u.e=n.error(),u;if(!n.isFulfilled())return void w.cancel();e[t]=n.value()}x._pushContext(),o=h(o);var r=l?o.apply(void 0,e):o(e),i=x._popContext();return s.checkForgottenReturns(r,i,"Promise.using",x),r})),x=w.lastly((function(){var e=new t.PromiseInspection(w);return d(c,e)}));return c.promise=x,x._setOnCancel(c),x},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new g(e,this,i());throw new l}}},{"./errors":12,"./util":36}],36:[function(e,r,i){var o,s=e("./es5"),a="undefined"==typeof navigator,l={e:{}},c="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==this?this:null;function u(){try{var e=o;return o=null,e.apply(this,arguments)}catch(e){return l.e=e,l}}function h(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function p(e,t,n){if(h(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return s.defineProperty(e,t,r),e}var f=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(s.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var r=[],i=Object.create(null);null!=e&&!t(e);){var o;try{o=n(e)}catch(e){return r}for(var a=0;a<o.length;++a){var l=o[a];if(!i[l]){i[l]=!0;var c=Object.getOwnPropertyDescriptor(e,l);null!=c&&null==c.get&&null==c.set&&r.push(l)}}e=s.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var i=[];e:for(var o in n)if(r.call(n,o))i.push(o);else{for(var s=0;s<e.length;++s)if(r.call(e[s],o))continue e;i.push(o)}return i}}(),d=/this\s*\.\s*\S+\s*=/,_=/^[a-z$_][a-z$_0-9]*$/i;function g(e){try{return e+""}catch(e){return"[no string representation]"}}function m(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function v(e){return m(e)&&s.propertyIsWritable(e,"stack")}var y="stack"in new Error?function(e){return v(e)?e:new Error(g(e))}:function(e){if(v(e))return e;try{throw new Error(g(e))}catch(e){return e}};function b(e){return{}.toString.call(e)}var w=function(e){return s.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var x="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};w=function(e){return s.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?x(e):null}}var k=void 0!==t&&"[object process]"===b(t).toLowerCase(),$=void 0!==t&&void 0!==t.env,E={isClass:function(e){try{if("function"==typeof e){var t=s.names(e.prototype),n=s.isES5&&t.length>1,r=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=d.test(e+"")&&s.names(e).length>0;if(n||r||i)return!0}return!1}catch(e){return!1}},isIdentifier:function(e){return _.test(e)},inheritedDataKeys:f,getDataPropertyOrDefault:function(e,t,n){if(!s.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0},thrower:function(e){throw e},isArray:s.isArray,asArray:w,notEnumerableProp:p,isPrimitive:h,isObject:function(e){return"function"==typeof e||"object"==typeof e&&null!==e},isError:m,canEvaluate:a,errorObj:l,tryCatch:function(e){return o=e,u},inherits:function(e,t){var n={}.hasOwnProperty;function r(){for(var r in this.constructor=e,this.constructor$=t,t.prototype)n.call(t.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=t.prototype[r])}return r.prototype=t.prototype,e.prototype=new r,e.prototype},withAppended:function(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=e[n];return i[n]=t,i},maybeWrapAsError:function(e){return h(e)?new Error(g(e)):e},toFastProperties:function(e){return e},filledRange:function(e,t,n){for(var r=new Array(e),i=0;i<e;++i)r[i]=t+i+n;return r},toString:g,canAttachTrace:v,ensureErrorObject:y,originatesFromRejection:function(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)},markAsOriginatingFromRejection:function(e){try{p(e,"isOperational",!0)}catch(e){}},classString:b,copyDescriptors:function(e,t,n){for(var r=s.names(e),i=0;i<r.length;++i){var o=r[i];if(n(o))try{s.defineProperty(t,o,s.getDescriptor(e,o))}catch(e){}}},hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:k,hasEnvVariables:$,env:function(e){return $?t.env[e]:void 0},global:c,getNativePromise:function(){if("function"==typeof Promise)try{var e=new Promise((function(){}));if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}},domainBind:function(e,t){return e.bind(t)}};E.isRecentNode=E.isNode&&function(){var e=t.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),E.isNode&&E.toFastProperties(t);try{throw new Error}catch(e){E.lastLineError=e}r.exports=E},{"./es5":13}]},{},[4])(4),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,n(4),n(0),n(11).setImmediate)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!t.eol&&e)for(var n=0,r=e.length;n<r;n++)if("\r"===e[n]){if("\n"===e[n+1]){t.eol="\r\n";break}if(e[n+1]){t.eol="\r";break}}else if("\n"===e[n]){t.eol="\n";break}return t.eol||"\n"}},function(e,t,n){var r=n(65),i=n(73);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(19).Symbol;e.exports=r},function(e,t,n){var r=n(67),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var r=n(30),i=n(76);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},function(e,t,n){(function(t,r){var i=n(6);e.exports=y;var o,s=n(37);y.ReadableState=v,n(12).EventEmitter;var a=function(e,t){return e.listeners(t).length},l=n(24),c=n(7).Buffer,u=t.Uint8Array||function(){},h=n(5);h.inherits=n(2);var p=n(41),f=void 0;f=p&&p.debuglog?p.debuglog("stream"):function(){};var d,_=n(42),g=n(25);h.inherits(y,l);var m=["error","close","destroy","pause","resume"];function v(e,t){e=e||{};var r=t instanceof(o=o||n(1));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,s=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new _,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(26).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function y(e){if(o=o||n(1),!(this instanceof y))return new y(e);this._readableState=new v(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),l.call(this)}function b(e,t,n,r,i){var o,s=e._readableState;return null===t?(s.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,$(e)}}(e,s)):(i||(o=function(e,t){var n;return function(e){return c.isBuffer(e)||e instanceof u}(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(s,t)),o?e.emit("error",o):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),r?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?w(e,s,t,!1):T(e,s)):w(e,s,t,!1))):r||(s.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function w(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&$(e)),T(e,t)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(e,t){this.push(null),t(e)},y.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=c.from(e,t),t=""),n=!0),b(this,e,t,!1,n)},y.prototype.unshift=function(e){return b(this,e,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(e){return d||(d=n(26).StringDecoder),this._readableState.decoder=new d(e),this._readableState.encoding=e,this};var x=8388608;function k(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=x?e=x:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function $(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(E,e):E(e))}function E(e){f("emit readable"),e.emit("readable"),A(e)}function T(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(C,e,t))}function C(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function S(e){f("readable nexttick read 0"),e.read(0)}function R(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),A(e),t.flowing&&!t.reading&&e.read(0)}function A(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function P(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0==(e-=s)){s===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=c.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),0==(e-=s)){s===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++i}return t.length-=i,n}(e,t),r}(e,t.buffer,t.decoder),n);var n}function j(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(O,t,e))}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function L(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}y.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?j(this):$(this),null;if(0===(e=k(e,t))&&t.ended)return 0===t.length&&j(this),null;var r,i=t.needReadable;return f("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",i=!0),t.ended||t.reading?f("reading or ended",i=!1):i&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=k(n,t))),null===(r=e>0?P(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&j(this)),null!==r&&this.emit("data",r),r},y.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,f("pipe count=%d opts=%j",o.pipesCount,t);var l=t&&!1===t.end||e===r.stdout||e===r.stderr?v:c;function c(){f("onend"),e.end()}o.endEmitted?i.nextTick(l):n.once("end",l),e.on("unpipe",(function t(r,i){f("onunpipe"),r===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,f("cleanup"),e.removeListener("close",g),e.removeListener("finish",m),e.removeListener("drain",u),e.removeListener("error",_),e.removeListener("unpipe",t),n.removeListener("end",c),n.removeListener("end",v),n.removeListener("data",d),h=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}));var u=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,A(e))}}(n);e.on("drain",u);var h=!1,p=!1;function d(t){f("ondata"),p=!1,!1!==e.write(t)||p||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==L(o.pipes,e))&&!h&&(f("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function _(t){f("onerror",t),v(),e.removeListener("error",_),0===a(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",m),v()}function m(){f("onfinish"),e.removeListener("close",g),v()}function v(){f("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",_),e.once("close",g),e.once("finish",m),e.emit("pipe",n),o.flowing||(f("pipe resume"),n.resume()),e},y.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=L(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},y.prototype.on=function(e,t){var n=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&$(this):i.nextTick(S,this))}return n},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(R,e,t))}(this,e)),this},y.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(f("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){f("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!=i)&&(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<m.length;o++)e.on(m[o],this.emit.bind(this,m[o]));return this._read=function(t){f("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=P}).call(this,n(0),n(4))},function(e,t,n){e.exports=n(12).EventEmitter},function(e,t,n){var r=n(6);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){var r=n(7).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=u,this.end=h,t=3;break;default:return this.write=p,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=s(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=s(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){e.exports=o;var r=n(1),i=n(5);function o(e){if(!(this instanceof o))return new o(e);r.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){a(e,t,n)})):a(this,null,null)}function a(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n(2),i.inherits(o,r),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},function(e,t,n){(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.bufFromString=function(t){var n=e.byteLength(t),r=e.allocUnsafe?e.allocUnsafe(n):new e(n);return r.write(t),r},t.emptyBuffer=function(){return e.allocUnsafe?e.allocUnsafe(0):new e(0)},t.filterArray=function(e,t){for(var n=[],r=0;r<e.length;r++)t.indexOf(r)>-1&&n.push(e[r]);return n},t.trimLeft=String.prototype.trimLeft?function(e){return e.trimLeft()}:function(e){return e.replace(/^\s+/,"")},t.trimRight=String.prototype.trimRight?function(e){return e.trimRight()}:function(e){return e.replace(/\s+$/,"")}}).call(this,n(3).Buffer)},function(e,t,n){var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n,r){var i=e.call(this,"Error: "+t+". JSON Line number: "+n+(r?" near: "+r:""))||this;return i.err=t,i.line=n,i.extra=r,i.name="CSV Parse Error",i}return r(t,e),t.column_mismatched=function(e,n){return new t("column_mismatched",e,n)},t.unclosed_quote=function(e,n){return new t("unclosed_quote",e,n)},t.fromJSON=function(e){return new t(e.err,e.line,e.extra)},t.prototype.toJSON=function(){return{err:this.err,line:this.line,extra:this.extra}},t}(Error);t.default=i},function(e,t,n){var r=n(18),i=n(68),o=n(69),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):o(e)}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){e.exports=n(33)},function(e,t,n){var r=n(34),i=function(e,t){return new r.Converter(e,t)};i.csv=i,i.Converter=r.Converter,e.exports=i},function(e,t,n){(function(e){var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(36),s=n(50),a=n(51),l=i(n(15)),c=n(52),u=n(105),h=function(t){function i(n,r){void 0===r&&(r={});var i=t.call(this,r)||this;return i.options=r,i.params=s.mergeParams(n),i.runtime=a.initParseRuntime(i),i.result=new u.Result(i),i.processor=new c.ProcessorLocal(i),i.once("error",(function(t){e((function(){i.result.processError(t),i.emit("done",t)}))})),i.once("done",(function(){i.processor.destroy()})),i}return r(i,t),i.prototype.preRawData=function(e){return this.runtime.preRawDataHook=e,this},i.prototype.preFileLine=function(e){return this.runtime.preFileLineHook=e,this},i.prototype.subscribe=function(e,t,n){return this.parseRuntime.subscribe={onNext:e,onError:t,onCompleted:n},this},i.prototype.fromFile=function(e,t){var r=this,i=n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}());return i.exists(e,(function(n){n?i.createReadStream(e,t).pipe(r):r.emit("error",new Error("File does not exist. Check to make sure the file path to your csv is correct."))})),this},i.prototype.fromStream=function(e){return e.pipe(this),this},i.prototype.fromString=function(e){e.toString();var t=new o.Readable,n=0;return t._read=function(t){if(n>=e.length)this.push(null);else{var r=e.substr(n,t);this.push(r),n+=t}},this.fromStream(t)},i.prototype.then=function(e,t){var n=this;return new l.default((function(r,i){n.parseRuntime.then={onfulfilled:function(t){r(e?e(t):t)},onrejected:function(e){t?r(t(e)):i(e)}}}))},Object.defineProperty(i.prototype,"parseParam",{get:function(){return this.params},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parseRuntime",{get:function(){return this.runtime},enumerable:!0,configurable:!0}),i.prototype._transform=function(e,t,n){var r=this;this.processor.process(e).then((function(e){if(e.length>0)return r.runtime.started=!0,r.result.processResult(e)})).then((function(){r.emit("drained"),n()}),(function(e){r.runtime.hasError=!0,r.runtime.error=e,r.emit("error",e),n()}))},i.prototype._flush=function(e){var t=this;this.processor.flush().then((function(e){if(e.length>0)return t.result.processResult(e)})).then((function(){t.processEnd(e)}),(function(n){t.emit("error",n),e()}))},i.prototype.processEnd=function(e){this.result.endProcess(),this.emit("done"),e()},Object.defineProperty(i.prototype,"parsedLineNumber",{get:function(){return this.runtime.parsedLineNumber},enumerable:!0,configurable:!0}),i}(o.Transform);t.Converter=h}).call(this,n(11).setImmediate)},function(e,t,n){(function(e,t){!function(e,n){if(!e.setImmediate){var r,i=1,o={},s=!1,a=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){u(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&u(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){u(e.data)},r=function(t){e.port2.postMessage(t)}}():a&&"onreadystatechange"in a.createElement("script")?function(){var e=a.documentElement;r=function(t){var n=a.createElement("script");n.onreadystatechange=function(){u(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(u,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var s={callback:e,args:t};return o[i]=s,r(i),i++},l.clearImmediate=c}function c(e){delete o[e]}function u(e){if(s)setTimeout(u,0,e);else{var t=o[e];if(t){s=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(undefined,n)}}(t)}finally{c(e),s=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(0),n(4))},function(e,t,n){e.exports=i;var r=n(12).EventEmitter;function i(){r.call(this)}n(2)(i,r),i.Readable=n(13),i.Writable=n(46),i.Duplex=n(47),i.Transform=n(48),i.PassThrough=n(49),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",a),n.on("close",l));var s=!1;function a(){s||(s=!0,e.end())}function l(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(u(),0===r.listenerCount(this,"error"))throw e}function u(){n.removeListener("data",i),e.removeListener("drain",o),n.removeListener("end",a),n.removeListener("close",l),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",u),n.removeListener("close",u),e.removeListener("close",u)}return n.on("error",c),e.on("error",c),n.on("end",u),n.on("close",u),e.on("close",u),e.emit("pipe",n),e}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){for(var t,n=c(e),r=n[0],s=n[1],a=new o(3*(r+s)/4-s),l=0,u=s>0?r-4:r,h=0;h<u;h+=4)t=i[e.charCodeAt(h)]<<18|i[e.charCodeAt(h+1)]<<12|i[e.charCodeAt(h+2)]<<6|i[e.charCodeAt(h+3)],a[l++]=t>>16&255,a[l++]=t>>8&255,a[l++]=255&t;return 2===s&&(t=i[e.charCodeAt(h)]<<2|i[e.charCodeAt(h+1)]>>4,a[l++]=255&t),1===s&&(t=i[e.charCodeAt(h)]<<10|i[e.charCodeAt(h+1)]<<4|i[e.charCodeAt(h+2)]>>2,a[l++]=t>>8&255,a[l++]=255&t),a},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(h(e,s,s+16383>a?a:s+16383));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function h(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(u(r));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?i-1:0,p=n?-1:1,f=e[t+h];for(h+=p,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+e[t+h],h+=p,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+e[t+h],h+=p,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=c}return(f?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(t*l-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[n+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+f]=255&s,f+=d,s/=256,c-=8);e[n+f-d]|=128*_}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){},function(e,t,n){var r=n(7).Buffer,i=n(43);function o(e,t,n){e.copy(t,n)}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t=r.allocUnsafe(e>>>0),n=this.head,i=0;n;)o(n.data,t,i),i+=n.data.length,n=n.next;return t},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(0))},function(e,t,n){e.exports=o;var r=n(27),i=n(5);function o(e){if(!(this instanceof o))return new o(e);r.call(this,e)}i.inherits=n(2),i.inherits(o,r),o.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(14)},function(e,t,n){e.exports=n(1)},function(e,t,n){e.exports=n(13).Transform},function(e,t,n){e.exports=n(13).PassThrough},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.mergeParams=function(e){var t={delimiter:",",ignoreColumns:void 0,includeColumns:void 0,quote:'"',trim:!0,checkType:!1,ignoreEmpty:!1,noheader:!1,headers:void 0,flatKeys:!1,maxRowLength:0,checkColumn:!1,escape:'"',colParser:{},eol:void 0,alwaysSplitAtEOL:!1,output:"json",nullObject:!1,downstreamFormat:"line",needEmitAll:!0};for(var n in e||(e={}),e)e.hasOwnProperty(n)&&(Array.isArray(e[n])?t[n]=[].concat(e[n]):t[n]=e[n]);return t}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.initParseRuntime=function(e){var t=e.parseParam,n={needProcessIgnoreColumn:!1,needProcessIncludeColumn:!1,selectedColumns:void 0,ended:!1,hasError:!1,error:void 0,delimiter:e.parseParam.delimiter,eol:e.parseParam.eol,columnConv:[],headerType:[],headerTitle:[],headerFlag:[],headers:void 0,started:!1,parsedLineNumber:0,columnValueSetter:[]};return t.ignoreColumns&&(n.needProcessIgnoreColumn=!0),t.includeColumns&&(n.needProcessIncludeColumn=!0),n}},function(e,t,n){(function(e){var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(53),s=i(n(15)),a=n(54),l=i(n(16)),c=n(57),u=n(28),h=n(58),p=i(n(59)),f=i(n(29)),d=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.rowSplit=new h.RowSplit(e.converter),e.eolEmitted=!1,e._needEmitEol=void 0,e.headEmitted=!1,e._needEmitHead=void 0,e}return r(n,t),n.prototype.flush=function(){var e=this;if(this.runtime.csvLineBuffer&&this.runtime.csvLineBuffer.length>0){var t=this.runtime.csvLineBuffer;return this.runtime.csvLineBuffer=void 0,this.process(t,!0).then((function(t){return e.runtime.csvLineBuffer&&e.runtime.csvLineBuffer.length>0?s.default.reject(f.default.unclosed_quote(e.runtime.parsedLineNumber,e.runtime.csvLineBuffer.toString())):s.default.resolve(t)}))}return s.default.resolve([])},n.prototype.destroy=function(){return s.default.resolve()},Object.defineProperty(n.prototype,"needEmitEol",{get:function(){return void 0===this._needEmitEol&&(this._needEmitEol=this.converter.listeners("eol").length>0),this._needEmitEol},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"needEmitHead",{get:function(){return void 0===this._needEmitHead&&(this._needEmitHead=this.converter.listeners("header").length>0),this._needEmitHead},enumerable:!0,configurable:!0}),n.prototype.process=function(e,t){var n,r=this;return void 0===t&&(t=!1),n=t?e.toString():a.prepareData(e,this.converter.parseRuntime),s.default.resolve().then((function(){return r.runtime.preRawDataHook?r.runtime.preRawDataHook(n):n})).then((function(e){return e&&e.length>0?r.processCSV(e,t):s.default.resolve([])}))},n.prototype.processCSV=function(e,t){var n=this,r=this.params,i=this.runtime;i.eol||l.default(e,i),this.needEmitEol&&!this.eolEmitted&&i.eol&&(this.converter.emit("eol",i.eol),this.eolEmitted=!0),r.ignoreEmpty&&!i.started&&(e=u.trimLeft(e));var o=c.stringToLines(e,i);return t?(o.lines.push(o.partial),o.partial=""):this.prependLeftBuf(u.bufFromString(o.partial)),o.lines.length>0?(i.preFileLineHook?this.runPreLineHook(o.lines):s.default.resolve(o.lines)).then((function(e){return i.started||n.runtime.headers?n.processCSVBody(e):n.processDataWithHead(e)})):s.default.resolve([])},n.prototype.processDataWithHead=function(e){if(this.params.noheader)this.params.headers?this.runtime.headers=this.params.headers:this.runtime.headers=[];else{for(var t="",n=[];e.length;){var r=t+e.shift(),i=this.rowSplit.parse(r);if(i.closed){n=i.cells,t="";break}t=r+l.default(r,this.runtime)}if(this.prependLeftBuf(u.bufFromString(t)),0===n.length)return[];this.params.headers?this.runtime.headers=this.params.headers:this.runtime.headers=n}return(this.runtime.needProcessIgnoreColumn||this.runtime.needProcessIncludeColumn)&&this.filterHeader(),this.needEmitHead&&!this.headEmitted&&(this.converter.emit("header",this.runtime.headers),this.headEmitted=!0),this.processCSVBody(e)},n.prototype.filterHeader=function(){if(this.runtime.selectedColumns=[],this.runtime.headers){for(var e=this.runtime.headers,t=0;t<e.length;t++)if(this.params.ignoreColumns)if(this.params.ignoreColumns.test(e[t])){if(!this.params.includeColumns||!this.params.includeColumns.test(e[t]))continue;this.runtime.selectedColumns.push(t)}else this.runtime.selectedColumns.push(t);else this.params.includeColumns?this.params.includeColumns.test(e[t])&&this.runtime.selectedColumns.push(t):this.runtime.selectedColumns.push(t);this.runtime.headers=u.filterArray(this.runtime.headers,this.runtime.selectedColumns)}},n.prototype.processCSVBody=function(e){if("line"===this.params.output)return e;var t=this.rowSplit.parseMultiLines(e);return this.prependLeftBuf(u.bufFromString(t.partial)),"csv"===this.params.output?t.rowsCells:p.default(t.rowsCells,this.converter)},n.prototype.prependLeftBuf=function(t){t&&(this.runtime.csvLineBuffer?this.runtime.csvLineBuffer=e.concat([t,this.runtime.csvLineBuffer]):this.runtime.csvLineBuffer=t)},n.prototype.runPreLineHook=function(e){var t=this;return new s.default((function(n,r){!function e(t,n,r,i){if(r>=t.length)i();else if(n.preFileLineHook){var o=t[r],s=n.preFileLineHook(o,n.parsedLineNumber+r);if(r++,s&&s.then)s.then((function(o){t[r-1]=o,e(t,n,r,i)}));else{for(t[r-1]=s;r<t.length;)t[r]=n.preFileLineHook(t[r],n.parsedLineNumber+r),r++;i()}}else i()}(e,t.runtime,0,(function(t){t?r(t):n(e)}))}))},n}(o.Processor);t.ProcessorLocal=d}).call(this,n(3).Buffer)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.Processor=function(e){this.converter=e,this.params=e.parseParam,this.runtime=e.parseRuntime}},function(e,t,n){(function(e){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(55));t.prepareData=function(t,n){var r=function(t,n){return n.csvLineBuffer&&n.csvLineBuffer.length>0?e.concat([n.csvLineBuffer,t]):t}(t,n);n.csvLineBuffer=void 0;var o=function(e,t){var n=e.length-1;if(0!=(128&e[n])){for(;128==(192&e[n]);)n--;n--}return n!=e.length-1?(t.csvLineBuffer=e.slice(n+1),e.slice(0,n+1)):e}(r,n).toString("utf8");return!1===n.started?i.default(o):o}}).call(this,n(3).Buffer)},function(e,t,n){(function(t){var r=n(56);e.exports=function(e){return"string"==typeof e&&65279===e.charCodeAt(0)?e.slice(1):t.isBuffer(e)&&r(e)&&239===e[0]&&187===e[1]&&191===e[2]?e.slice(3):e}}).call(this,n(3).Buffer)},function(e,t){e.exports=function(e){for(var t=0;t<e.length;)if(9==e[t]||10==e[t]||13==e[t]||32<=e[t]&&e[t]<=126)t+=1;else if(194<=e[t]&&e[t]<=223&&128<=e[t+1]&&e[t+1]<=191)t+=2;else if(224==e[t]&&160<=e[t+1]&&e[t+1]<=191&&128<=e[t+2]&&e[t+2]<=191||(225<=e[t]&&e[t]<=236||238==e[t]||239==e[t])&&128<=e[t+1]&&e[t+1]<=191&&128<=e[t+2]&&e[t+2]<=191||237==e[t]&&128<=e[t+1]&&e[t+1]<=159&&128<=e[t+2]&&e[t+2]<=191)t+=3;else{if(!(240==e[t]&&144<=e[t+1]&&e[t+1]<=191&&128<=e[t+2]&&e[t+2]<=191&&128<=e[t+3]&&e[t+3]<=191||241<=e[t]&&e[t]<=243&&128<=e[t+1]&&e[t+1]<=191&&128<=e[t+2]&&e[t+2]<=191&&128<=e[t+3]&&e[t+3]<=191||244==e[t]&&128<=e[t+1]&&e[t+1]<=143&&128<=e[t+2]&&e[t+2]<=191&&128<=e[t+3]&&e[t+3]<=191))return!1;t+=4}return!0}},function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(16));t.stringToLines=function(e,t){var n=i.default(e,t),r=e.split(n);return{lines:r,partial:r.pop()||""}}},function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(16)),o=n(28),s=[",","|","\t",";",":"],a=function(){function e(e){this.conv=e,this.cachedRegExp={},this.delimiterEmitted=!1,this._needEmitDelimiter=void 0,this.quote=e.parseParam.quote,this.trim=e.parseParam.trim,this.escape=e.parseParam.escape}return Object.defineProperty(e.prototype,"needEmitDelimiter",{get:function(){return void 0===this._needEmitDelimiter&&(this._needEmitDelimiter=this.conv.listeners("delimiter").length>0),this._needEmitDelimiter},enumerable:!0,configurable:!0}),e.prototype.parse=function(e){if(0===e.length||this.conv.parseParam.ignoreEmpty&&0===e.trim().length)return{cells:[],closed:!0};var t=this.quote,n=this.trim;this.escape,(this.conv.parseRuntime.delimiter instanceof Array||"auto"===this.conv.parseRuntime.delimiter.toLowerCase())&&(this.conv.parseRuntime.delimiter=this.getDelimiter(e)),this.needEmitDelimiter&&!this.delimiterEmitted&&(this.conv.emit("delimiter",this.conv.parseRuntime.delimiter),this.delimiterEmitted=!0);var r=this.conv.parseRuntime.delimiter,i=e.split(r);if("off"===t){if(n)for(var o=0;o<i.length;o++)i[o]=i[o].trim();return{cells:i,closed:!0}}return this.toCSVRow(i,n,t,r)},e.prototype.toCSVRow=function(e,t,n,r){for(var i=[],s=!1,a="",l=0,c=e.length;l<c;l++){var u=e[l];!s&&t&&(u=o.trimLeft(u));var h=u.length;if(s)this.isQuoteClose(u)?(s=!1,a+=r+(u=u.substr(0,h-1)),a=this.escapeQuote(a),t&&(a=o.trimRight(a)),i.push(a),a=""):a+=r+u;else{if(2===h&&u===this.quote+this.quote){i.push("");continue}if(this.isQuoteOpen(u)){if(u=u.substr(1),this.isQuoteClose(u)){u=u.substring(0,u.lastIndexOf(n)),u=this.escapeQuote(u),i.push(u);continue}if(-1!==u.indexOf(n)){for(var p=0,f="",d=0,_=u;d<_.length;d++){var g=_[d];g===n&&f!==this.escape?(p++,f=""):f=g}if(p%2==1){t&&(u=o.trimRight(u)),i.push(n+u);continue}s=!0,a+=u;continue}s=!0,a+=u;continue}t&&(u=o.trimRight(u)),i.push(u)}}return{cells:i,closed:!s}},e.prototype.getDelimiter=function(e){var t;if("auto"===this.conv.parseParam.delimiter)t=s;else{if(!(this.conv.parseParam.delimiter instanceof Array))return this.conv.parseParam.delimiter;t=this.conv.parseParam.delimiter}var n=0,r=",";return t.forEach((function(t){var i=e.split(t).length;i>n&&(r=t,n=i)})),r},e.prototype.isQuoteOpen=function(e){var t=this.quote,n=this.escape;return e[0]===t&&(e[1]!==t||e[1]===n&&(e[2]===t||2===e.length))},e.prototype.isQuoteClose=function(e){var t=this.quote,n=this.escape;this.conv.parseParam.trim&&(e=o.trimRight(e));for(var r=0,i=e.length-1;e[i]===t||e[i]===n;)i--,r++;return r%2!=0},e.prototype.escapeQuote=function(e){var t="es|"+this.quote+"|"+this.escape;void 0===this.cachedRegExp[t]&&(this.cachedRegExp[t]=new RegExp("\\"+this.escape+"\\"+this.quote,"g"));var n=this.cachedRegExp[t];return e.replace(n,this.quote)},e.prototype.parseMultiLines=function(e){for(var t=[],n="";e.length;){var r=n+e.shift(),s=this.parse(r);0===s.cells.length&&this.conv.parseParam.ignoreEmpty||(s.closed||this.conv.parseParam.alwaysSplitAtEOL?(this.conv.parseRuntime.selectedColumns?t.push(o.filterArray(s.cells,this.conv.parseRuntime.selectedColumns)):t.push(s.cells),n=""):n=r+(i.default(r,this.conv.parseRuntime)||"\n"))}return{rowsCells:t,partial:n}},e}();t.RowSplit=a},function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(29)),o=r(n(60)),s=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/;function a(e,t,n){if(t.parseParam.checkColumn&&t.parseRuntime.headers&&e.length!==t.parseRuntime.headers.length)throw i.default.column_mismatched(t.parseRuntime.parsedLineNumber+n);return function(e,t,n){for(var r=!1,i={},o=0,s=e.length;o<s;o++){var a=e[o];if(!n.parseParam.ignoreEmpty||""!==a){r=!0;var l=t[o];l&&""!==l||(l=t[o]="field"+(o+1));var h=c(l,o,n);if(h){var p=h(a,l,i,e,o);void 0!==p&&u(i,l,p,n,o)}else n.parseParam.checkType&&(a=f(a,l,o,n)(a)),void 0!==a&&u(i,l,a,n,o)}}return r?i:null}(e,t.parseRuntime.headers||[],t)||null}t.default=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=a(e[r],t,r);o&&n.push(o)}return n};var l={string:_,number:d,omit:function(){}};function c(e,t,n){if(void 0!==n.parseRuntime.columnConv[t])return n.parseRuntime.columnConv[t];var r=n.parseParam.colParser[e];if(void 0===r)return n.parseRuntime.columnConv[t]=null;if("object"==typeof r&&(r=r.cellParser||"string"),"string"==typeof r){r=r.trim().toLowerCase();var i=l[r];return n.parseRuntime.columnConv[t]=i||null}return n.parseRuntime.columnConv[t]="function"==typeof r?r:null}function u(e,t,n,r,i){if(!r.parseRuntime.columnValueSetter[i])if(r.parseParam.flatKeys)r.parseRuntime.columnValueSetter[i]=h;else if(t.indexOf(".")>-1){for(var o=t.split("."),s=!0;o.length>0;)if(0===o.shift().length){s=!1;break}!s||r.parseParam.colParser[t]&&r.parseParam.colParser[t].flat?r.parseRuntime.columnValueSetter[i]=h:r.parseRuntime.columnValueSetter[i]=p}else r.parseRuntime.columnValueSetter[i]=h;!0===r.parseParam.nullObject&&"null"===n&&(n=null),r.parseRuntime.columnValueSetter[i](e,t,n)}function h(e,t,n){e[t]=n}function p(e,t,n){o.default(e,t,n)}function f(e,t,n,r){return r.parseRuntime.headerType[n]?r.parseRuntime.headerType[n]:t.indexOf("number#!")>-1?r.parseRuntime.headerType[n]=d:t.indexOf("string#!")>-1?r.parseRuntime.headerType[n]=_:r.parseParam.checkType?r.parseRuntime.headerType[n]=g:r.parseRuntime.headerType[n]=_}function d(e){var t=parseFloat(e);return isNaN(t)?e:t}function _(e){return e.toString()}function g(e){var t=e.trim();return""===t?_(e):s.test(t)?d(e):5===t.length&&"false"===t.toLowerCase()||4===t.length&&"true"===t.toLowerCase()?function(e){var t=e.trim();return 5!==t.length||"false"!==t.toLowerCase()}(e):"{"===t[0]&&"}"===t[t.length-1]||"["===t[0]&&"]"===t[t.length-1]?function(e){try{return JSON.parse(e)}catch(t){return e}}(e):_(e)}},function(e,t,n){var r=n(61);e.exports=function(e,t,n){return null==e?e:r(e,t,n)}},function(e,t,n){var r=n(62),i=n(74),o=n(103),s=n(20),a=n(104);e.exports=function(e,t,n,l){if(!s(e))return e;for(var c=-1,u=(t=i(t,e)).length,h=u-1,p=e;null!=p&&++c<u;){var f=a(t[c]),d=n;if(c!=h){var _=p[f];void 0===(d=l?l(_,f,p):void 0)&&(d=s(_)?_:o(t[c+1])?[]:{})}r(p,f,d),p=p[f]}return e}},function(e,t,n){var r=n(63),i=n(31),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var s=e[t];o.call(e,t)&&i(s,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(64);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(17),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,n){var r=n(66),i=n(70),o=n(20),s=n(72),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,h=c.hasOwnProperty,p=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?p:a).test(s(e))}},function(e,t,n){var r=n(30),i=n(20);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(0))},function(e,t,n){var r=n(18),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r=n(71),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},function(e,t,n){var r=n(19)["__core-js_shared__"];e.exports=r},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(21),i=n(75),o=n(77),s=n(100);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(s(e))}},function(e,t,n){var r=n(21),i=n(22),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||s.test(e)||!o.test(e)||null!=t&&e in Object(t)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){var r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,o=n(78)((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,(function(e,n,r,o){t.push(r?o.replace(i,"$1"):n||e)})),t}));e.exports=o},function(e,t,n){var r=n(79);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},function(e,t,n){var r=n(80);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},function(e,t,n){var r=n(81),i=n(95),o=n(97),s=n(98),a=n(99);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,e.exports=l},function(e,t,n){var r=n(82),i=n(88),o=n(94);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(e,t,n){var r=n(83),i=n(84),o=n(85),s=n(86),a=n(87);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,e.exports=l},function(e,t,n){var r=n(8);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(8),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(8),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},function(e,t,n){var r=n(8);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(89),i=n(90),o=n(91),s=n(92),a=n(93);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,e.exports=l},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(9),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},function(e,t,n){var r=n(9);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(9);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(9);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},function(e,t,n){var r=n(17)(n(19),"Map");e.exports=r},function(e,t,n){var r=n(10);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(10);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(10);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(10);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},function(e,t,n){var r=n(101);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){var r=n(18),i=n(102),o=n(21),s=n(22),a=r?r.prototype:void 0,l=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(s(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(22);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(15)),o=n(106),s=function(){function e(e){this.converter=e,this.finalResult=[]}return Object.defineProperty(e.prototype,"needEmitLine",{get:function(){return!!this.converter.parseRuntime.subscribe&&!!this.converter.parseRuntime.subscribe.onNext||this.needPushDownstream},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needPushDownstream",{get:function(){return void 0===this._needPushDownstream&&(this._needPushDownstream=this.converter.listeners("data").length>0||this.converter.listeners("readable").length>0),this._needPushDownstream},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needEmitAll",{get:function(){return!!this.converter.parseRuntime.then&&this.converter.parseParam.needEmitAll},enumerable:!0,configurable:!0}),e.prototype.processResult=function(e){var t=this,n=this.converter.parseRuntime.parsedLineNumber;return this.needPushDownstream&&"array"===this.converter.parseParam.downstreamFormat&&0===n&&a(this.converter,"["+o.EOL),new i.default((function(n,r){t.needEmitLine?function e(t,n,r,i,o){if(r>=t.length)o();else if(n.parseRuntime.subscribe&&n.parseRuntime.subscribe.onNext){var s=n.parseRuntime.subscribe.onNext,l=t[r],c=s(l,n.parseRuntime.parsedLineNumber+r);if(r++,c&&c.then)c.then((function(){!function(t,n,r,i,o,s,l){o&&a(r,l),e(t,r,i,o,s)}(t,0,n,r,i,o,l)}),o);else{for(i&&a(n,l);r<t.length;){var u=t[r];s(u,n.parseRuntime.parsedLineNumber+r),r++,i&&a(n,u)}o()}}else{if(i)for(;r<t.length;)u=t[r++],a(n,u);o()}}(e,t.converter,0,t.needPushDownstream,(function(i){i?r(i):(t.appendFinalResult(e),n())})):(t.appendFinalResult(e),n())}))},e.prototype.appendFinalResult=function(e){this.needEmitAll&&(this.finalResult=this.finalResult.concat(e)),this.converter.parseRuntime.parsedLineNumber+=e.length},e.prototype.processError=function(e){this.converter.parseRuntime.subscribe&&this.converter.parseRuntime.subscribe.onError&&this.converter.parseRuntime.subscribe.onError(e),this.converter.parseRuntime.then&&this.converter.parseRuntime.then.onrejected&&this.converter.parseRuntime.then.onrejected(e)},e.prototype.endProcess=function(){this.converter.parseRuntime.then&&this.converter.parseRuntime.then.onfulfilled&&(this.needEmitAll?this.converter.parseRuntime.then.onfulfilled(this.finalResult):this.converter.parseRuntime.then.onfulfilled([])),this.converter.parseRuntime.subscribe&&this.converter.parseRuntime.subscribe.onCompleted&&this.converter.parseRuntime.subscribe.onCompleted(),this.needPushDownstream&&"array"===this.converter.parseParam.downstreamFormat&&a(this.converter,"]"+o.EOL)},e}();function a(e,t){if("object"!=typeof t||e.options.objectMode)e.push(t);else{var n=JSON.stringify(t);e.push(n+("array"===e.parseParam.downstreamFormat?","+o.EOL:o.EOL),"utf8")}}t.Result=s},function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}}]);function getDefaults(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let defaults=getDefaults();function changeDefaults(e){defaults=e}const escapeTest=/[&<>"']/,escapeReplace=/[&<>"']/g,escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g,escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=e=>escapeReplacements[e];function escape(e,t){if(t){if(escapeTest.test(e))return e.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(e))return e.replace(escapeReplaceNoEncode,getEscapeReplacement);return e}const unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function unescape(e){return e.replace(unescapeTest,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const caret=/(^|[^\[])\^/g;function edit(e,t){e=e.source||e,t=t||"";const n={replace:(t,r)=>(r=(r=r.source||r).replace(caret,"$1"),e=e.replace(t,r),n),getRegex:()=>new RegExp(e,t)};return n}const nonWordAndColonTest=/[^\w:]/g,originIndependentUrl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl(e,t,n){if(e){let e;try{e=decodeURIComponent(unescape(n)).replace(nonWordAndColonTest,"").toLowerCase()}catch(e){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!originIndependentUrl.test(n)&&(n=resolveUrl(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}const baseUrls={},justDomain=/^[^:]+:\/*[^/]*$/,protocol=/^([^:]+:)[\s\S]*$/,domain=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(e,t){baseUrls[" "+e]||(justDomain.test(e)?baseUrls[" "+e]=e+"/":baseUrls[" "+e]=rtrim(e,"/",!0));const n=-1===(e=baseUrls[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(protocol,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(domain,"$1")+t:e+t}const noopTest={exec:function(){}};function merge(e){let t,n,r=1;for(;r<arguments.length;r++)for(n in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function splitCells(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let r=!1,i=t;for(;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"})).split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n[n.length-1].trim()||n.pop(),n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function rtrim(e,t,n){const r=e.length;if(0===r)return"";let i=0;for(;i<r;){const o=e.charAt(r-i-1);if(o!==t||n){if(o===t||!n)break;i++}else i++}return e.substr(0,r-i)}function findClosingBracket(e,t){if(-1===e.indexOf(t[1]))return-1;const n=e.length;let r=0,i=0;for(;i<n;i++)if("\\"===e[i])i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return-1}function checkSanitizeDeprecation(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function repeatString(e,t){if(t<1)return"";let n="";for(;t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}function outputLink(e,t,n,r){const i=t.href,o=t.title?escape(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){r.state.inLink=!0;const e={type:"link",raw:n,href:i,title:o,text:s,tokens:r.inlineTokens(s,[])};return r.state.inLink=!1,e}return{type:"image",raw:n,href:i,title:o,text:escape(s)}}function indentCodeCompensation(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const r=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=r.length?e.slice(r.length):e})).join("\n")}class Tokenizer{constructor(e){this.options=e||defaults}space(e){const t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:rtrim(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=indentCodeCompensation(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim():t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=rtrim(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}const n={type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(e,[]),text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n,r,i,o,s,a,l,c,u,h,p=t[1].trim();const f=p.length>1,d={type:"list",raw:"",ordered:f,start:f?+p.slice(0,-1):"",loose:!1,items:[]};p=f?`\\d{1,9}\\${p.slice(-1)}`:`\\${p}`,this.options.pedantic&&(p=f?p:"[*+-]");const _=new RegExp(`^( {0,3}${p})((?: [^\\n]*| *)(?:\\n[^\\n]*)*(?:\\n|$))`);for(;e&&!this.rules.block.hr.test(e)&&(t=_.exec(e));){u=t[2].split("\n"),this.options.pedantic?(o=2,h=u[0].trimLeft()):(o=t[2].search(/[^ ]/),o=t[1].length+(o>4?1:o),h=u[0].slice(o-t[1].length)),a=!1,n=t[0],!u[0]&&/^ *$/.test(u[1])&&(n=t[1]+u.slice(0,2).join("\n")+"\n",d.loose=!0,u=[]);const p=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(s=1;s<u.length;s++){if(c=u[s],this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),p.test(c)){n=t[1]+u.slice(0,s).join("\n")+"\n";break}if(a){if(!(c.search(/[^ ]/)>=o)&&c.trim()){n=t[1]+u.slice(0,s).join("\n")+"\n";break}h+="\n"+c.slice(o)}else c.trim()||(a=!0),c.search(/[^ ]/)>=o?h+="\n"+c.slice(o):h+="\n"+c}d.loose||(l?d.loose=!0:/\n *\n *$/.test(n)&&(l=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(h),r&&(i="[ ] "!==r[0],h=h.replace(/^\[[ xX]\] +/,""))),d.items.push({type:"list_item",raw:n,task:!!r,checked:i,loose:!1,text:h}),d.raw+=n,e=e.slice(n.length)}d.items[d.items.length-1].raw=n.trimRight(),d.items[d.items.length-1].text=h.trimRight(),d.raw=d.raw.trimRight();const g=d.items.length;for(s=0;s<g;s++)this.lexer.state.top=!1,d.items[s].tokens=this.lexer.blockTokens(d.items[s].text,[]),d.items[s].tokens.some((e=>"space"===e.type))&&(d.loose=!0,d.items[s].loose=!0);return d}}html(e){const t=this.rules.block.html.exec(e);if(t){const e={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};return this.options.sanitize&&(e.type="paragraph",e.text=this.options.sanitizer?this.options.sanitizer(t[0]):escape(t[0]),e.tokens=[],this.lexer.inline(e.text,e.tokens)),e}}def(e){const t=this.rules.block.def.exec(e);if(t){t[3]&&(t[3]=t[3].substring(1,t[3].length-1));return{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}}table(e){const t=this.rules.block.table.exec(e);if(t){const e={type:"table",header:splitCells(t[1]).map((e=>({text:e}))),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(e.header.length===e.align.length){e.raw=t[0];let n,r,i,o,s=e.align.length;for(n=0;n<s;n++)/^ *-+: *$/.test(e.align[n])?e.align[n]="right":/^ *:-+: *$/.test(e.align[n])?e.align[n]="center":/^ *:-+ *$/.test(e.align[n])?e.align[n]="left":e.align[n]=null;for(s=e.rows.length,n=0;n<s;n++)e.rows[n]=splitCells(e.rows[n],e.header.length).map((e=>({text:e})));for(s=e.header.length,r=0;r<s;r++)e.header[r].tokens=[],this.lexer.inlineTokens(e.header[r].text,e.header[r].tokens);for(s=e.rows.length,r=0;r<s;r++)for(o=e.rows[r],i=0;i<o.length;i++)o[i].tokens=[],this.lexer.inlineTokens(o[i].text,o[i].tokens);return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t){const e={type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e={type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}text(e){const t=this.rules.block.text.exec(e);if(t){const e={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:escape(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):escape(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=rtrim(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=findClosingBracket(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),outputLink(t,{href:n?n.replace(this.rules.inline._escapes,"$1"):n,title:r?r.replace(this.rules.inline._escapes,"$1"):r},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=(n[2]||n[1]).replace(/\s+/g," ");if(e=t[e.toLowerCase()],!e||!e.href){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return outputLink(n,e,n[0],this.lexer)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r)return;if(r[3]&&n.match(/[\p{L}\p{N}]/u))return;const i=r[1]||r[2]||"";if(!i||i&&(""===n||this.rules.inline.punctuation.exec(n))){const n=r[0].length-1;let i,o,s=n,a=0;const l="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(r=l.exec(t));){if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!i)continue;if(o=i.length,r[3]||r[4]){s+=o;continue}if((r[5]||r[6])&&n%3&&!((n+o)%3)){a+=o;continue}if(s-=o,s>0)continue;if(o=Math.min(o,o+s+a),Math.min(n,o)%2){const t=e.slice(1,n+r.index+o);return{type:"em",raw:e.slice(0,n+r.index+o+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}const t=e.slice(2,n+r.index+o-1);return{type:"strong",raw:e.slice(0,n+r.index+o+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),r=/^ /.test(e)&&/ $/.test(e);return n&&r&&(e=e.substring(1,e.length-1)),e=escape(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){const n=this.rules.inline.autolink.exec(e);if(n){let e,r;return"@"===n[2]?(e=escape(this.options.mangle?t(n[1]):n[1]),r="mailto:"+e):(e=escape(n[1]),r=e),{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e,t){let n;if(n=this.rules.inline.url.exec(e)){let e,r;if("@"===n[2])e=escape(this.options.mangle?t(n[0]):n[0]),r="mailto:"+e;else{let t;do{t=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(t!==n[0]);e=escape(n[0]),r="www."===n[1]?"http://"+e:e}return{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e,t){const n=this.rules.inline.text.exec(e);if(n){let e;return e=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):escape(n[0]):n[0]:escape(this.options.smartypants?t(n[0]):n[0]),{type:"text",raw:n[0],text:e}}}}const block={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:noopTest,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};block.def=edit(block.def).replace("label",block._label).replace("title",block._title).getRegex(),block.bullet=/(?:[*+-]|\d{1,9}[.)])/,block.listItemStart=edit(/^( *)(bull) */).replace("bull",block.bullet).getRegex(),block.list=edit(block.list).replace(/bull/g,block.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+block.def.source+")").getRegex(),block._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",block._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,block.html=edit(block.html,"i").replace("comment",block._comment).replace("tag",block._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),block.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex(),block.blockquote=edit(block.blockquote).replace("paragraph",block.paragraph).getRegex(),block.normal=merge({},block),block.gfm=merge({},block.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),block.gfm.table=edit(block.gfm.table).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex(),block.pedantic=merge({},block.normal,{html:edit("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",block._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,paragraph:edit(block.normal._paragraph).replace("hr",block.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",block.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const inline={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noopTest,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:noopTest,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function smartypants(e){return e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function mangle(e){let t,n,r="";const i=e.length;for(t=0;t<i;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}inline._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",inline.punctuation=edit(inline.punctuation).replace(/punctuation/g,inline._punctuation).getRegex(),inline.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,inline.escapedEmSt=/\\\*|\\_/g,inline._comment=edit(block._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),inline.emStrong.lDelim=edit(inline.emStrong.lDelim).replace(/punct/g,inline._punctuation).getRegex(),inline.emStrong.rDelimAst=edit(inline.emStrong.rDelimAst,"g").replace(/punct/g,inline._punctuation).getRegex(),inline.emStrong.rDelimUnd=edit(inline.emStrong.rDelimUnd,"g").replace(/punct/g,inline._punctuation).getRegex(),inline._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,inline._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,inline._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,inline.autolink=edit(inline.autolink).replace("scheme",inline._scheme).replace("email",inline._email).getRegex(),inline._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,inline.tag=edit(inline.tag).replace("comment",inline._comment).replace("attribute",inline._attribute).getRegex(),inline._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,inline._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,inline._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,inline.link=edit(inline.link).replace("label",inline._label).replace("href",inline._href).replace("title",inline._title).getRegex(),inline.reflink=edit(inline.reflink).replace("label",inline._label).getRegex(),inline.reflinkSearch=edit(inline.reflinkSearch,"g").replace("reflink",inline.reflink).replace("nolink",inline.nolink).getRegex(),inline.normal=merge({},inline),inline.pedantic=merge({},inline.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",inline._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",inline._label).getRegex()}),inline.gfm=merge({},inline.normal,{escape:edit(inline.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),inline.gfm.url=edit(inline.gfm.url,"i").replace("email",inline.gfm._extended_email).getRegex(),inline.breaks=merge({},inline.gfm,{br:edit(inline.br).replace("{2,}","*").getRegex(),text:edit(inline.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});class Lexer{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||defaults,this.options.tokenizer=this.options.tokenizer||new Tokenizer,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:block.normal,inline:inline.normal};this.options.pedantic?(t.block=block.pedantic,t.inline=inline.pedantic):this.options.gfm&&(t.block=block.gfm,this.options.breaks?t.inline=inline.breaks:t.inline=inline.gfm),this.tokenizer.rules=t}static get rules(){return{block:block,inline:inline}}static lex(e,t){return new Lexer(t).lex(e)}static lexInline(e,t){return new Lexer(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let n,r,i,o;for(this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),n.type&&t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?t.push(n):(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(r.raw+="\n"+n.raw,r.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else{if(i=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startBlock.forEach((function(e){r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i)))r=t[t.length-1],o&&"paragraph"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n),o=i.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let n,r,i,o,s,a,l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,o.index)+"["+repeatString("a",o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,o.index)+"["+repeatString("a",o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,o.index)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(s||(a=""),s=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,a))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e,mangle))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e,mangle))){if(i=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startInline.forEach((function(e){r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(n=this.tokenizer.inlineText(i,smartypants))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(a=n.raw.slice(-1)),s=!0,r=t[t.length-1],r&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(n.raw.length),t.push(n);return t}}class Renderer{constructor(e){this.options=e||defaults}code(e,t,n){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,r);null!=t&&t!==e&&(n=!0,e=t)}return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+escape(r,!0)+'">'+(n?e:escape(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:escape(e,!0))+"</code></pre>\n"}blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"}html(e){return e}heading(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,n){const r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return"<li>"+e+"</li>\n"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){const n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,n){if(null===(e=cleanUrl(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<a href="'+escape(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>",r}image(e,t,n){if(null===(e=cleanUrl(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class TextRenderer{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}class Slugger{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let n=e,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do{r++,n=e+"-"+r}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=r,this.seen[n]=0),n}slug(e,t={}){const n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)}}class Parser{constructor(e){this.options=e||defaults,this.options.renderer=this.options.renderer||new Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new TextRenderer,this.slugger=new Slugger}static parse(e,t){return new Parser(t).parse(e)}static parseInline(e,t){return new Parser(t).parseInline(e)}parse(e,t=!0){let n,r,i,o,s,a,l,c,u,h,p,f,d,_,g,m,v,y,b,w="";const x=e.length;for(n=0;n<x;n++)if(h=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(b=this.options.extensions.renderers[h.type].call({parser:this},h),!1!==b||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type)))w+=b||"";else switch(h.type){case"space":continue;case"hr":w+=this.renderer.hr();continue;case"heading":w+=this.renderer.heading(this.parseInline(h.tokens),h.depth,unescape(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue;case"code":w+=this.renderer.code(h.text,h.lang,h.escaped);continue;case"table":for(c="",l="",o=h.header.length,r=0;r<o;r++)l+=this.renderer.tablecell(this.parseInline(h.header[r].tokens),{header:!0,align:h.align[r]});for(c+=this.renderer.tablerow(l),u="",o=h.rows.length,r=0;r<o;r++){for(a=h.rows[r],l="",s=a.length,i=0;i<s;i++)l+=this.renderer.tablecell(this.parseInline(a[i].tokens),{header:!1,align:h.align[i]});u+=this.renderer.tablerow(l)}w+=this.renderer.table(c,u);continue;case"blockquote":u=this.parse(h.tokens),w+=this.renderer.blockquote(u);continue;case"list":for(p=h.ordered,f=h.start,d=h.loose,o=h.items.length,u="",r=0;r<o;r++)g=h.items[r],m=g.checked,v=g.task,_="",g.task&&(y=this.renderer.checkbox(m),d?g.tokens.length>0&&"paragraph"===g.tokens[0].type?(g.tokens[0].text=y+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&"text"===g.tokens[0].tokens[0].type&&(g.tokens[0].tokens[0].text=y+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:y}):_+=y),_+=this.parse(g.tokens,d),u+=this.renderer.listitem(_,v,m);w+=this.renderer.list(u,p,f);continue;case"html":w+=this.renderer.html(h.text);continue;case"paragraph":w+=this.renderer.paragraph(this.parseInline(h.tokens));continue;case"text":for(u=h.tokens?this.parseInline(h.tokens):h.text;n+1<x&&"text"===e[n+1].type;)h=e[++n],u+="\n"+(h.tokens?this.parseInline(h.tokens):h.text);w+=t?this.renderer.paragraph(u):u;continue;default:{const e='Token with "'+h.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return w}parseInline(e,t){t=t||this.renderer;let n,r,i,o="";const s=e.length;for(n=0;n<s;n++)if(r=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(i=this.options.extensions.renderers[r.type].call({parser:this},r),!1!==i||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)))o+=i||"";else switch(r.type){case"escape":case"text":o+=t.text(r.text);break;case"html":o+=t.html(r.text);break;case"link":o+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case"image":o+=t.image(r.href,r.title,r.text);break;case"strong":o+=t.strong(this.parseInline(r.tokens,t));break;case"em":o+=t.em(this.parseInline(r.tokens,t));break;case"codespan":o+=t.codespan(r.text);break;case"br":o+=t.br();break;case"del":o+=t.del(this.parseInline(r.tokens,t));break;default:{const e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return o}}function marked(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),checkSanitizeDeprecation(t=merge({},marked.defaults,t||{})),n){const r=t.highlight;let i;try{i=Lexer.lex(e,t)}catch(e){return n(e)}const o=function(e){let o;if(!e)try{t.walkTokens&&marked.walkTokens(i,t.walkTokens),o=Parser.parse(i,t)}catch(t){e=t}return t.highlight=r,e?n(e):n(null,o)};if(!r||r.length<3)return o();if(delete t.highlight,!i.length)return o();let s=0;return marked.walkTokens(i,(function(e){"code"===e.type&&(s++,setTimeout((()=>{r(e.text,e.lang,(function(t,n){if(t)return o(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),s--,0===s&&o()}))}),0))})),void(0===s&&o())}try{const n=Lexer.lex(e,t);return t.walkTokens&&marked.walkTokens(n,t.walkTokens),Parser.parse(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+escape(e.message+"",!0)+"</pre>";throw e}}marked.options=marked.setOptions=function(e){return merge(marked.defaults,e),changeDefaults(marked.defaults),marked},marked.getDefaults=getDefaults,marked.defaults=defaults,marked.use=function(...e){const t=merge({},...e),n=marked.defaults.extensions||{renderers:{},childTokens:{}};let r;e.forEach((e=>{if(e.extensions&&(r=!0,e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if(e.renderer){const t=n.renderers?n.renderers[e.name]:null;n.renderers[e.name]=t?function(...n){let r=e.renderer.apply(this,n);return!1===r&&(r=t.apply(this,n)),r}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");n[e.level]?n[e.level].unshift(e.tokenizer):n[e.level]=[e.tokenizer],e.start&&("block"===e.level?n.startBlock?n.startBlock.push(e.start):n.startBlock=[e.start]:"inline"===e.level&&(n.startInline?n.startInline.push(e.start):n.startInline=[e.start]))}e.childTokens&&(n.childTokens[e.name]=e.childTokens)}))),e.renderer){const n=marked.defaults.renderer||new Renderer;for(const t in e.renderer){const r=n[t];n[t]=(...i)=>{let o=e.renderer[t].apply(n,i);return!1===o&&(o=r.apply(n,i)),o}}t.renderer=n}if(e.tokenizer){const n=marked.defaults.tokenizer||new Tokenizer;for(const t in e.tokenizer){const r=n[t];n[t]=(...i)=>{let o=e.tokenizer[t].apply(n,i);return!1===o&&(o=r.apply(n,i)),o}}t.tokenizer=n}if(e.walkTokens){const n=marked.defaults.walkTokens;t.walkTokens=function(t){e.walkTokens.call(this,t),n&&n.call(this,t)}}r&&(t.extensions=n),marked.setOptions(t)}))},marked.walkTokens=function(e,t){for(const n of e)switch(t.call(marked,n),n.type){case"table":for(const e of n.header)marked.walkTokens(e.tokens,t);for(const e of n.rows)for(const n of e)marked.walkTokens(n.tokens,t);break;case"list":marked.walkTokens(n.items,t);break;default:marked.defaults.extensions&&marked.defaults.extensions.childTokens&&marked.defaults.extensions.childTokens[n.type]?marked.defaults.extensions.childTokens[n.type].forEach((function(e){marked.walkTokens(n[e],t)})):n.tokens&&marked.walkTokens(n.tokens,t)}},marked.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");checkSanitizeDeprecation(t=merge({},marked.defaults,t||{}));try{const n=Lexer.lexInline(e,t);return t.walkTokens&&marked.walkTokens(n,t.walkTokens),Parser.parseInline(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+escape(e.message+"",!0)+"</pre>";throw e}},marked.Parser=Parser,marked.parser=Parser.parse,marked.Renderer=Renderer,marked.TextRenderer=TextRenderer,marked.Lexer=Lexer,marked.lexer=Lexer.lex,marked.Tokenizer=Tokenizer,marked.Slugger=Slugger,marked.parse=marked,Parser.parse,Lexer.lex;let sources=["nav","stations"],documents=["play"];const FetchLiveInfo=async e=>{const t=`data/live.csv?time=${parseInt(new Date/1e3)}`;try{let e=await browser().fromString(await(await fetch(t)).text());return console.log(`[API]   grabbed live info ${t}`),e}catch(e){let n=`error grabbing ${t}! ${e.message}`;return console.log(`[API]   ${n}`),alert(n),null}},FetchData=async e=>{let t=window;if(t.data)return t.data;t.data={};for(let e of sources){const n=`data/${e}.csv`;try{t.data[e]=await browser().fromString(await(await fetch(n)).text()),console.log(`[API]   grabbed ${n}`,t[e])}catch(e){let t=`error grabbing ${n}! ${e.message}`;console.log(`[API]   ${t}`),alert(t)}}for(let e of documents){const n=`data/${e}.md`;try{t.data[e]=await marked.parse(await(await fetch(n)).text()),console.log(`[API]   grabbed ${n}`,t[e])}catch(e){let t=`error grabbing ${n}! ${e.message}`;console.log(`[API]   ${t}`),alert(t)}}return t.data},subscriber_queue=[];function writable(e,t=noop){let n;const r=new Set;function i(t){if(safe_not_equal(e,t)&&(e=t,n)){const t=!subscriber_queue.length;for(const t of r)t[1](),subscriber_queue.push(t,e);if(t){for(let e=0;e<subscriber_queue.length;e+=2)subscriber_queue[e][0](subscriber_queue[e+1]);subscriber_queue.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(o,s=noop){const a=[o,s];return r.add(a),1===r.size&&(n=t(i)||noop),o(e),()=>{r.delete(a),0===r.size&&(n(),n=null)}}}}const index=writable(-2),smoothing=writable(.9),state=writable({}),data=writable({}),trigger=writable(-2),chat=writable(!1),volume=writable(1),live=writable([]);function createCommonjsModule(e){var t={exports:{}};return e(t,t.exports),t.exports}var bundle=createCommonjsModule((function(e,t){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){var r;
/*! Hammer.JS - v2.0.7 - 2016-04-22
     * http://hammerjs.github.io/
     *
     * Copyright (c) 2016 Jorik Tangelder;
     * Licensed under the MIT license */!function(i,o,s,a){var l,c=["","webkit","Moz","MS","ms","o"],u=o.createElement("div"),h=Math.round,p=Math.abs,f=Date.now;function d(e,t,n){return setTimeout(w(e,n),t)}function _(e,t,n){return!!Array.isArray(e)&&(g(e,n[t],n),!0)}function g(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(void 0!==e.length)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function m(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),e.apply(this,arguments)}}l="function"!=typeof Object.assign?function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}:Object.assign;var v=m((function(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;)(!n||n&&void 0===e[r[i]])&&(e[r[i]]=t[r[i]]),i++;return e}),"extend","Use `assign`."),y=m((function(e,t){return v(e,t,!0)}),"merge","Use `assign`.");function b(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&l(r,n)}function w(e,t){return function(){return e.apply(t,arguments)}}function x(e,t){return"function"==typeof e?e.apply(t&&t[0]||void 0,t):e}function k(e,t){return void 0===e?t:e}function $(e,t,n){g(S(t),(function(t){e.addEventListener(t,n,!1)}))}function E(e,t,n){g(S(t),(function(t){e.removeEventListener(t,n,!1)}))}function T(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function C(e,t){return e.indexOf(t)>-1}function S(e){return e.trim().split(/\s+/g)}function R(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function A(e){return Array.prototype.slice.call(e,0)}function P(e,t,n){for(var r=[],i=[],o=0;o<e.length;){var s=t?e[o][t]:e[o];R(i,s)<0&&r.push(e[o]),i[o]=s,o++}return n&&(r=t?r.sort((function(e,n){return e[t]>n[t]})):r.sort()),r}function j(e,t){for(var n,r,i=t[0].toUpperCase()+t.slice(1),o=0;o<c.length;){if((r=(n=c[o])?n+i:t)in e)return r;o++}}var O=1;function L(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var I="ontouchstart"in i,F=void 0!==j(i,"PointerEvent"),M=I&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),D=["x","y"],z=["clientX","clientY"];function N(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){x(e.options.enable,[e])&&n.handler(t)},this.init()}function B(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&t&&r-i==0,s=12&t&&r-i==0;n.isFirst=!!o,n.isFinal=!!s,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=q(t)),i>1&&!n.firstMultiple?n.firstMultiple=q(t):1===i&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,a=s?s.center:o.center,l=t.center=U(r);t.timeStamp=f(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=W(a,l),t.distance=V(a,l),function(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};1!==t.eventType&&4!==o.eventType||(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}(n,t),t.offsetDirection=Y(t.deltaX,t.deltaY);var c,u,h=H(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=h.x,t.overallVelocityY=h.y,t.overallVelocity=p(h.x)>p(h.y)?h.x:h.y,t.scale=s?(c=s.pointers,V((u=r)[0],u[1],z)/V(c[0],c[1],z)):1,t.rotation=s?function(e,t){return W(t[1],t[0],z)+W(e[1],e[0],z)}(s.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,r,i,o,s=e.lastInterval||t,a=t.timeStamp-s.timeStamp;if(8!=t.eventType&&(a>25||void 0===s.velocity)){var l=t.deltaX-s.deltaX,c=t.deltaY-s.deltaY,u=H(a,l,c);r=u.x,i=u.y,n=p(u.x)>p(u.y)?u.x:u.y,o=Y(l,c),e.lastInterval=t}else n=s.velocity,r=s.velocityX,i=s.velocityY,o=s.direction;t.velocity=n,t.velocityX=r,t.velocityY=i,t.direction=o}(n,t);var d=e.element;T(t.srcEvent.target,d)&&(d=t.srcEvent.target),t.target=d}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function q(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:h(e.pointers[n].clientX),clientY:h(e.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:t,center:U(t),deltaX:e.deltaX,deltaY:e.deltaY}}function U(e){var t=e.length;if(1===t)return{x:h(e[0].clientX),y:h(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:h(n/t),y:h(r/t)}}function H(e,t,n){return{x:t/e||0,y:n/e||0}}function Y(e,t){return e===t?1:p(e)>=p(t)?e<0?2:4:t<0?8:16}function V(e,t,n){n||(n=D);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function W(e,t,n){n||(n=D);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}N.prototype={handler:function(){},init:function(){this.evEl&&$(this.element,this.evEl,this.domHandler),this.evTarget&&$(this.target,this.evTarget,this.domHandler),this.evWin&&$(L(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(L(this.element),this.evWin,this.domHandler)}};var G={mousedown:1,mousemove:2,mouseup:4};function X(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,N.apply(this,arguments)}b(X,N,{handler:function(e){var t=G[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var Q={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Z={2:"touch",3:"pen",4:"mouse",5:"kinect"},K="pointerdown",J="pointermove pointerup pointercancel";function ee(){this.evEl=K,this.evWin=J,N.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(K="MSPointerDown",J="MSPointerMove MSPointerUp MSPointerCancel"),b(ee,N,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=Q[r],o=Z[e.pointerType]||e.pointerType,s="touch"==o,a=R(t,e.pointerId,"pointerId");1&i&&(0===e.button||s)?a<0&&(t.push(e),a=t.length-1):12&i&&(n=!0),a<0||(t[a]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(a,1))}});var te={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ne(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,N.apply(this,arguments)}function re(e,t){var n=A(e.touches),r=A(e.changedTouches);return 12&t&&(n=P(n.concat(r),"identifier",!0)),[n,r]}b(ne,N,{handler:function(e){var t=te[e.type];if(1===t&&(this.started=!0),this.started){var n=re.call(this,e,t);12&t&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var ie={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function oe(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},N.apply(this,arguments)}function se(e,t){var n=A(e.touches),r=this.targetIds;if(3&t&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,s=A(e.changedTouches),a=[],l=this.target;if(o=n.filter((function(e){return T(e.target,l)})),1===t)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),12&t&&delete r[s[i].identifier],i++;return a.length?[P(o.concat(a),"identifier",!0),a]:void 0}function ae(){N.apply(this,arguments);var e=w(this.handler,this);this.touch=new oe(this.manager,e),this.mouse=new X(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function le(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,ce.call(this,t)):12&e&&ce.call(this,t)}function ce(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)}),2500)}}function ue(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(t-i.x),s=Math.abs(n-i.y);if(o<=25&&s<=25)return!0}return!1}b(oe,N,{handler:function(e){var t=ie[e.type],n=se.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}),b(ae,N,{handler:function(e,t,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)le.call(this,t,n);else if(i&&ue.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var he=j(u.style,"touchAction"),pe=void 0!==he,fe=function(){if(!pe)return!1;var e={},t=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){e[n]=!t||i.CSS.supports("touch-action",n)})),e}();function de(e,t){this.manager=e,this.set(t)}function _e(e){this.options=l({},this.defaults,e||{}),this.id=O++,this.manager=null,this.options.enable=k(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function ge(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function me(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function ve(e,t){var n=t.manager;return n?n.get(e):e}function ye(){_e.apply(this,arguments)}function be(){ye.apply(this,arguments),this.pX=null,this.pY=null}function we(){ye.apply(this,arguments)}function xe(){_e.apply(this,arguments),this._timer=null,this._input=null}function ke(){ye.apply(this,arguments)}function $e(){ye.apply(this,arguments)}function Ee(){_e.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Te(e,t){return(t=t||{}).recognizers=k(t.recognizers,Te.defaults.preset),new Ce(e,t)}function Ce(e,t){var n;this.options=l({},Te.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(F?ee:M?oe:I?ae:X))(n,B),this.touchAction=new de(this,this.options.touchAction),Se(this,!0),g(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function Se(e,t){var n,r=e.element;r.style&&(g(e.options.cssProps,(function(i,o){n=j(r.style,o),t?(e.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}de.prototype={set:function(e){"compute"==e&&(e=this.compute()),pe&&this.manager.element.style&&fe[e]&&(this.manager.element.style[he]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return g(this.manager.recognizers,(function(t){x(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(C(e,"none"))return"none";var t=C(e,"pan-x"),n=C(e,"pan-y");return t&&n?"none":t||n?t?"pan-x":"pan-y":C(e,"manipulation")?"manipulation":"auto"}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=C(r,"none")&&!fe.none,o=C(r,"pan-y")&&!fe["pan-y"],s=C(r,"pan-x")&&!fe["pan-x"];if(i){var a=1===e.pointers.length,l=e.distance<2,c=e.deltaTime<250;if(a&&l&&c)return}if(!s||!o)return i||o&&6&n||s&&24&n?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}},_e.prototype={defaults:{},set:function(e){return l(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(_(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=ve(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return _(e,"dropRecognizeWith",this)||(e=ve(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(_(e,"requireFailure",this))return this;var t=this.requireFail;return-1===R(t,e=ve(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(_(e,"dropRequireFailure",this))return this;e=ve(e,this);var t=R(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<8&&r(t.options.event+ge(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=8&&r(t.options.event+ge(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=l({},e);if(!x(this.options.enable,[this,t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},b(ye,_e,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,i=this.attrTest(e);return r&&(8&n||!i)?16|t:r||i?4&n?8|t:2&t?4|t:2:32}}),b(be,ye,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push("pan-y"),24&e&&t.push("pan-x"),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,o=e.deltaX,s=e.deltaY;return i&t.direction||(6&t.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(e.deltaX)):(i=0===s?1:s<0?8:16,n=s!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return ye.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=me(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),b(we,ye,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),b(xe,_e,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||12&e.eventType&&!i)this.reset();else if(1&e.eventType)this.reset(),this._timer=d((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),b(ke,ye,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),b($e,ye,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return be.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:24&n&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&p(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=me(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),b(Ee,_e,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=e.eventType)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||V(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,s&&o?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=d((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=d((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Te.VERSION="2.0.7",Te.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[ke,{enable:!1}],[we,{enable:!1},["rotate"]],[$e,{direction:6}],[be,{direction:6},["swipe"]],[Ee],[Ee,{event:"doubletap",taps:2},["tap"]],[xe]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Ce.prototype={set:function(e){return l(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&14&n.state&&(i=t.curRecognizer=n),o++}},get:function(e){if(e instanceof _e)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(_(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(_(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=R(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(void 0!==e&&void 0!==t){var n=this.handlers;return g(S(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(void 0!==e){var n=this.handlers;return g(S(e),(function(e){t?n[e]&&n[e].splice(R(n[e],t),1):delete n[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=o.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&Se(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Te,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Ce,Input:N,TouchAction:de,TouchInput:oe,MouseInput:X,PointerEventInput:ee,TouchMouseInput:ae,SingleTouchInput:ne,Recognizer:_e,AttrRecognizer:ye,Tap:Ee,Pan:be,Swipe:$e,Pinch:we,Rotate:ke,Press:xe,on:$,off:E,each:g,merge:y,extend:v,assign:l,inherit:b,bindFn:w,prefixed:j}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=Te,void 0===(r=function(){return Te}.call(t,n,t,e))||(e.exports=r)}(window,document)},function(e,t,n){n.r(t);var r=n(0),i=n.n(r),o=["swipe","swipeleft","swiperight","swipeup","swipedown"],s=function(e,t){var n=new i.a(e);n.get("swipe").set(t);for(var r=function(t){n.on(t,(function(n){return e.dispatchEvent(new CustomEvent(t,{detail:n}))}))},s=0,a=o;s<a.length;s++)r(a[s]);return{update:function(e){n.get("swipe").set(e)},destroy:function(){for(var e=0,t=o;e<t.length;e++){var r=t[e];n.off(r)}}}},a=["pan","panstart","panmove","panend","pancancel","panleft","panright","panup","pandown"],l=function(e,t){var n=new i.a(e);n.get("pan").set(t);for(var r=function(t){n.on(t,(function(n){return e.dispatchEvent(new CustomEvent(t,{detail:n}))}))},o=0,s=a;o<s.length;o++)r(s[o]);return{update:function(e){n.get("pan").set(e)},destroy:function(){for(var e=0,t=a;e<t.length;e++){var r=t[e];n.off(r)}}}},c=["pinch","pinchstart","pinchmove","pinchend","pinchcancel","pinchin","pinchout"],u=function(e,t){var n=new i.a(e);n.get("pinch").set(t);for(var r=function(t){n.on(t,(function(n){return e.dispatchEvent(new CustomEvent(t,{detail:n}))}))},o=0,s=c;o<s.length;o++)r(s[o]);return{update:function(e){n.get("pinch").set(e)},destroy:function(){for(var e=0,t=c;e<t.length;e++){var r=t[e];n.off(r)}}}},h=["press","pressup"],p=function(e,t){var n=new i.a(e);n.get("press").set(t);for(var r=function(t){n.on(t,(function(n){return e.dispatchEvent(new CustomEvent(t,{detail:n}))}))},o=0,s=h;o<s.length;o++)r(s[o]);return{update:function(e){n.get("press").set(e)},destroy:function(){for(var e=0,t=h;e<t.length;e++){var r=t[e];n.off(r)}}}},f=["rotate","rotatestart","rotatemove","rotateend","rotatecancel"],d=function(e,t){var n=new i.a(e);n.get("rotate").set(t);for(var r=function(t){n.on(t,(function(n){return e.dispatchEvent(new CustomEvent(t,{detail:n}))}))},o=0,s=f;o<s.length;o++)r(s[o]);return{update:function(e){n.get("rotate").set(e)},destroy:function(){for(var e=0,t=f;e<t.length;e++){var r=t[e];n.off(r)}}}},_=["tap"],g=function(e,t){var n=new i.a(e);n.get("tap").set(t);for(var r=function(t){n.on(t,(function(n){return e.dispatchEvent(new CustomEvent(t,{detail:n}))}))},o=0,s=_;o<s.length;o++)r(s[o]);return{update:function(e){n.get("tap").set(e)},destroy:function(){for(var e=0,t=_;e<t.length;e++){var r=t[e];n.off(r)}}}};n.d(t,"Hammer",(function(){return i.a})),n.d(t,"swipe",(function(){return s})),n.d(t,"pan",(function(){return l})),n.d(t,"pinch",(function(){return u})),n.d(t,"press",(function(){return p})),n.d(t,"rotate",(function(){return d})),n.d(t,"tap",(function(){return g})),t.default={Hammer:i.a,swipe:s,pan:l,pinch:u,press:p,rotate:d,tap:g}}])}));function backInOut(e){const t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}function backIn(e){const t=1.70158;return e*e*((t+1)*e-t)}function backOut(e){const t=1.70158;return--e*e*((t+1)*e+t)+1}function bounceOut(e){const t=e*e;return e<4/11?7.5625*t:e<8/11?9.075*t-9.9*e+3.4:e<.9?4356/361*t-35442/1805*e+16061/1805:10.8*e*e-20.52*e+10.72}function bounceInOut(e){return e<.5?.5*(1-bounceOut(1-2*e)):.5*bounceOut(2*e-1)+.5}function bounceIn(e){return 1-bounceOut(1-e)}function circInOut(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}function circIn(e){return 1-Math.sqrt(1-e*e)}function circOut(e){return Math.sqrt(1- --e*e)}function cubicInOut(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function cubicIn(e){return e*e*e}function cubicOut(e){const t=e-1;return t*t*t+1}function elasticInOut(e){return e<.5?.5*Math.sin(13*Math.PI/2*2*e)*Math.pow(2,10*(2*e-1)):.5*Math.sin(-13*Math.PI/2*(2*e-1+1))*Math.pow(2,-10*(2*e-1))+1}function elasticIn(e){return Math.sin(13*e*Math.PI/2)*Math.pow(2,10*(e-1))}function elasticOut(e){return Math.sin(-13*(e+1)*Math.PI/2)*Math.pow(2,-10*e)+1}function expoInOut(e){return 0===e||1===e?e:e<.5?.5*Math.pow(2,20*e-10):-.5*Math.pow(2,10-20*e)+1}function expoIn(e){return 0===e?e:Math.pow(2,10*(e-1))}function expoOut(e){return 1===e?e:1-Math.pow(2,-10*e)}function quadInOut(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)}function quadIn(e){return e*e}function quadOut(e){return-e*(e-2)}function quartInOut(e){return e<.5?8*Math.pow(e,4):-8*Math.pow(e-1,4)+1}function quartIn(e){return Math.pow(e,4)}function quartOut(e){return Math.pow(e-1,3)*(1-e)+1}function quintInOut(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}function quintIn(e){return e*e*e*e*e}function quintOut(e){return--e*e*e*e*e+1}function sineInOut(e){return-.5*(Math.cos(Math.PI*e)-1)}function sineIn(e){const t=Math.cos(e*Math.PI*.5);return Math.abs(t)<1e-14?1:1-t}function sineOut(e){return Math.sin(e*Math.PI/2)}var easingFunctions=Object.freeze({__proto__:null,backIn:backIn,backInOut:backInOut,backOut:backOut,bounceIn:bounceIn,bounceInOut:bounceInOut,bounceOut:bounceOut,circIn:circIn,circInOut:circInOut,circOut:circOut,cubicIn:cubicIn,cubicInOut:cubicInOut,cubicOut:cubicOut,elasticIn:elasticIn,elasticInOut:elasticInOut,elasticOut:elasticOut,expoIn:expoIn,expoInOut:expoInOut,expoOut:expoOut,quadIn:quadIn,quadInOut:quadInOut,quadOut:quadOut,quartIn:quartIn,quartInOut:quartInOut,quartOut:quartOut,quintIn:quintIn,quintInOut:quintInOut,quintOut:quintOut,sineIn:sineIn,sineInOut:sineInOut,sineOut:sineOut,linear:identity});function is_date(e){return"[object Date]"===Object.prototype.toString.call(e)}function get_interpolator(e,t){if(e===t||e!=e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const n=t.map(((t,n)=>get_interpolator(e[n],t)));return e=>n.map((t=>t(e)))}if("object"===n){if(!e||!t)throw new Error("Object cannot be null");if(is_date(e)&&is_date(t)){e=e.getTime();const n=(t=t.getTime())-e;return t=>new Date(e+t*n)}const n=Object.keys(t),r={};return n.forEach((n=>{r[n]=get_interpolator(e[n],t[n])})),e=>{const t={};return n.forEach((n=>{t[n]=r[n](e)})),t}}if("number"===n){const n=t-e;return t=>e+t*n}throw new Error(`Cannot interpolate ${n} values`)}function tweened(e,t={}){const n=writable(e);let r,i=e;function o(o,s){if(null==e)return n.set(e=o),Promise.resolve();i=o;let a=r,l=!1,{delay:c=0,duration:u=400,easing:h=identity,interpolate:p=get_interpolator}=assign(assign({},t),s);if(0===u)return a&&(a.abort(),a=null),n.set(e=i),Promise.resolve();const f=now()+c;let d;return r=loop((t=>{if(t<f)return!0;l||(d=p(e,o),"function"==typeof u&&(u=u(e,o)),l=!0),a&&(a.abort(),a=null);const r=t-f;return r>u?(n.set(e=o),!1):(n.set(e=d(h(r/u))),!0)})),r.promise}return{set:o,update:(t,n)=>o(t(i,e),n),subscribe:n.subscribe}}const{window:window_1$1}=globals;function get_each_context$6(e,t,n){const r=e.slice();return r[48]=t[n],r[50]=n,r}function create_if_block_1$2(e){let t,n,r,i,o,s,a,l,c,u,h,p,f,d,_,g,m,v,y,b,w,x,k,$,E,T,C,S,R,A,P,j,O,L,I,F,M,D,z,N,B,q,U,H,Y,V,W,G,X,Q,Z,K,J,ee,te,ne,re,ie,oe,se,ae,le,ce,ue,he,pe,fe,de,_e,ge,me,ve,ye,be,we,xe,ke,$e,Ee,Te,Ce,Se,Re,Ae,Pe,je,Oe,Le,Ie,Fe,Me,De,ze,Ne,Be,qe,Ue=e[1].x.toFixed(2)+"",He=e[1].y.toFixed(2)+"",Ye=e[1].z.toFixed(2)+"",Ve=e[2].x.toFixed(2)+"",We=e[2].y.toFixed(2)+"",Ge=e[2].z.toFixed(2)+"",Xe=e[16].x.toFixed(2)+"",Qe=e[16].y.toFixed(2)+"",Ze=e[16].z.toFixed(2)+"",Ke=e[13].x.toFixed(2)+"",Je=e[13].y.toFixed(2)+"",et=e[13].z.toFixed(2)+"",tt=e[8].toFixed(2)+"",nt=e[9].toFixed(2)+"",rt=parseInt(e[3])+"",it=parseInt(e[4])+"",ot=e[10].toFixed(2)+"",st=parseInt(e[11])+"",at=e[5].toFixed(2)+"",lt=e[6].toFixed(2)+"",ct=e[7].toFixed(2)+"",ut=e[12].toFixed(2)+"";return{c(){t=element("span"),n=element("span"),r=text("index:"),i=text(e[14]),o=space(),s=element("span"),a=text("current.x:"),l=text(Ue),c=space(),u=element("span"),h=text("current.y:"),p=text(He),f=space(),d=element("span"),_=text("current.z:"),g=text(Ye),m=space(),v=element("span"),y=text("destination.x:"),b=text(Ve),w=space(),x=element("span"),k=text("destination.y:"),$=text(We),E=space(),T=element("span"),C=text("destination.z:"),S=text(Ge),R=space(),A=element("span"),P=text("origin.x:"),j=text(Xe),O=space(),L=element("span"),I=text("origin.y:"),F=text(Qe),M=space(),D=element("span"),z=text("origin.z:"),N=text(Ze),B=space(),q=element("span"),U=text("xyz.x:"),H=text(Ke),Y=space(),V=element("span"),W=text("xyz.y:"),G=text(Je),X=space(),Q=element("span"),Z=text("xyz.z:"),K=text(et),J=space(),ee=element("span"),te=text("modX:"),ne=text(tt),re=space(),ie=element("span"),oe=text("modY:"),se=text(nt),ae=space(),le=element("span"),ce=text("width:"),ue=text(rt),he=space(),pe=element("span"),fe=text("height:"),de=text(it),_e=space(),ge=element("span"),me=text("index:"),ve=text(e[14]),ye=space(),be=element("span"),we=text("zoom:"),xe=text(ot),ke=space(),$e=element("span"),Ee=text("perspective:"),Te=text(st),Ce=space(),Se=element("span"),Re=text("zoomX:"),Ae=text(at),Pe=space(),je=element("span"),Oe=text("zoomY:"),Le=text(lt),Ie=space(),Fe=element("span"),Me=text("zoomZ:"),De=text(ct),ze=space(),Ne=element("span"),Be=text("zoomRatio:"),qe=text(ut),attr(t,"class","fixed r0 t0 z-index9 r0 flex column filled p1 monospace")},m(e,Ue){insert(e,t,Ue),append(t,n),append(n,r),append(n,i),append(t,o),append(t,s),append(s,a),append(s,l),append(t,c),append(t,u),append(u,h),append(u,p),append(t,f),append(t,d),append(d,_),append(d,g),append(t,m),append(t,v),append(v,y),append(v,b),append(t,w),append(t,x),append(x,k),append(x,$),append(t,E),append(t,T),append(T,C),append(T,S),append(t,R),append(t,A),append(A,P),append(A,j),append(t,O),append(t,L),append(L,I),append(L,F),append(t,M),append(t,D),append(D,z),append(D,N),append(t,B),append(t,q),append(q,U),append(q,H),append(t,Y),append(t,V),append(V,W),append(V,G),append(t,X),append(t,Q),append(Q,Z),append(Q,K),append(t,J),append(t,ee),append(ee,te),append(ee,ne),append(t,re),append(t,ie),append(ie,oe),append(ie,se),append(t,ae),append(t,le),append(le,ce),append(le,ue),append(t,he),append(t,pe),append(pe,fe),append(pe,de),append(t,_e),append(t,ge),append(ge,me),append(ge,ve),append(t,ye),append(t,be),append(be,we),append(be,xe),append(t,ke),append(t,$e),append($e,Ee),append($e,Te),append(t,Ce),append(t,Se),append(Se,Re),append(Se,Ae),append(t,Pe),append(t,je),append(je,Oe),append(je,Le),append(t,Ie),append(t,Fe),append(Fe,Me),append(Fe,De),append(t,ze),append(t,Ne),append(Ne,Be),append(Ne,qe)},p(e,t){16384&t[0]&&set_data(i,e[14]),2&t[0]&&Ue!==(Ue=e[1].x.toFixed(2)+"")&&set_data(l,Ue),2&t[0]&&He!==(He=e[1].y.toFixed(2)+"")&&set_data(p,He),2&t[0]&&Ye!==(Ye=e[1].z.toFixed(2)+"")&&set_data(g,Ye),4&t[0]&&Ve!==(Ve=e[2].x.toFixed(2)+"")&&set_data(b,Ve),4&t[0]&&We!==(We=e[2].y.toFixed(2)+"")&&set_data($,We),4&t[0]&&Ge!==(Ge=e[2].z.toFixed(2)+"")&&set_data(S,Ge),65536&t[0]&&Xe!==(Xe=e[16].x.toFixed(2)+"")&&set_data(j,Xe),65536&t[0]&&Qe!==(Qe=e[16].y.toFixed(2)+"")&&set_data(F,Qe),65536&t[0]&&Ze!==(Ze=e[16].z.toFixed(2)+"")&&set_data(N,Ze),8192&t[0]&&Ke!==(Ke=e[13].x.toFixed(2)+"")&&set_data(H,Ke),8192&t[0]&&Je!==(Je=e[13].y.toFixed(2)+"")&&set_data(G,Je),8192&t[0]&&et!==(et=e[13].z.toFixed(2)+"")&&set_data(K,et),256&t[0]&&tt!==(tt=e[8].toFixed(2)+"")&&set_data(ne,tt),512&t[0]&&nt!==(nt=e[9].toFixed(2)+"")&&set_data(se,nt),8&t[0]&&rt!==(rt=parseInt(e[3])+"")&&set_data(ue,rt),16&t[0]&&it!==(it=parseInt(e[4])+"")&&set_data(de,it),16384&t[0]&&set_data(ve,e[14]),1024&t[0]&&ot!==(ot=e[10].toFixed(2)+"")&&set_data(xe,ot),2048&t[0]&&st!==(st=parseInt(e[11])+"")&&set_data(Te,st),32&t[0]&&at!==(at=e[5].toFixed(2)+"")&&set_data(Ae,at),64&t[0]&&lt!==(lt=e[6].toFixed(2)+"")&&set_data(Le,lt),128&t[0]&&ct!==(ct=e[7].toFixed(2)+"")&&set_data(De,ct),4096&t[0]&&ut!==(ut=e[12].toFixed(2)+"")&&set_data(qe,ut)},d(e){e&&detach(t)}}}function create_else_block$3(e){let t,n,r,i,o,s,a,l,c;return{c(){t=element("div"),n=element("h1"),r=text("COMPONENT "),i=text(e[50]),o=space(),s=element("div"),s.textContent="HELLO WORLD",a=space(),l=element("img"),attr(n,"class","filled plr1"),attr(s,"class","filled plr1"),src_url_equal(l.src,c="data/demo"+(e[50]+1)+".png")||attr(l,"src",c),attr(l,"class","w30pc"),attr(t,"class","flex column-center-center")},m(e,c){insert(e,t,c),append(t,n),append(n,r),append(n,i),append(t,o),append(t,s),append(t,a),append(t,l)},p:noop,i:noop,o:noop,d(e){e&&detach(t)}}}function create_if_block$5(e){let t,n,r;var i=e[0][e[50]];function o(e){return{props:{idx:e[50],stretch:e[24](e[50]),width:e[3],height:e[4]}}}return i&&(t=new i(o(e))),{c(){t&&create_component(t.$$.fragment),n=empty()},m(e,i){t&&mount_component(t,e,i),insert(e,n,i),r=!0},p(e,r){const s={};if(8&r[0]&&(s.width=e[3]),16&r[0]&&(s.height=e[4]),i!==(i=e[0][e[50]])){if(t){group_outros();const e=t;transition_out(e.$$.fragment,1,0,(()=>{destroy_component(e,1)})),check_outros()}i?(t=new i(o(e)),create_component(t.$$.fragment),transition_in(t.$$.fragment,1),mount_component(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(e){r||(t&&transition_in(t.$$.fragment,e),r=!0)},o(e){t&&transition_out(t.$$.fragment,e),r=!1},d(e){e&&detach(n),t&&destroy_component(t,e)}}}function create_each_block$6(e){let t,n,r,i,o,s,a,l,c,u;const h=[create_if_block$5,create_else_block$3],p=[];function f(e,t){return e[0][e[50]]?0:1}return s=f(e),a=p[s]=h[s](e),{c(){t=element("div"),r=space(),i=element("div"),o=element("div"),a.c(),l=space(),attr(t,"style",n=e[19][e[50]]),attr(t,"class","face fill flex row-center-center fuzz"),toggle_class(t,"none",e[50]!=e[14]),toggle_class(t,"b8-solid",e[15].mousedown),toggle_class(t,"b4-solid",!e[15].mousedown),attr(o,"class","inner monospace flex fill column-center-center rel"),attr(i,"style",c=e[19][e[50]]+e[20](e[50])),attr(i,"class","face fill flex row-center-center")},m(e,n){insert(e,t,n),insert(e,r,n),insert(e,i,n),append(i,o),p[s].m(o,null),append(i,l),u=!0},p(e,r){(!u||524288&r[0]&&n!==(n=e[19][e[50]]))&&attr(t,"style",n),16384&r[0]&&toggle_class(t,"none",e[50]!=e[14]),32768&r[0]&&toggle_class(t,"b8-solid",e[15].mousedown),32768&r[0]&&toggle_class(t,"b4-solid",!e[15].mousedown);let l=s;s=f(e),s===l?p[s].p(e,r):(group_outros(),transition_out(p[l],1,1,(()=>{p[l]=null})),check_outros(),a=p[s],a?a.p(e,r):(a=p[s]=h[s](e),a.c()),transition_in(a,1),a.m(o,null)),(!u||1572864&r[0]&&c!==(c=e[19][e[50]]+e[20](e[50])))&&attr(i,"style",c)},i(e){u||(transition_in(a),u=!0)},o(e){transition_out(a),u=!1},d(e){e&&detach(t),e&&detach(r),e&&detach(i),p[s].d()}}}function create_fragment$c(e){let t,n,r,i,o,s,a,l=e[23]&&create_if_block_1$2(e),c=new Array(6),u=[];for(let t=0;t<c.length;t+=1)u[t]=create_each_block$6(get_each_context$6(e,c,t));const h=e=>transition_out(u[e],1,1,(()=>{u[e]=null}));return{c(){l&&l.c(),t=space(),n=element("div"),r=element("div"),i=element("div");for(let e=0;e<u.length;e+=1)u[e].c();attr(i,"style",e[21]),attr(i,"class","box h100pc rel"),attr(r,"style",e[22]),attr(r,"class","container fill rel"),attr(n,"class","zoom fill"),set_style(n,"transform","scale("+e[10]+", "+e[18]+")"),set_style(n,"transform-origin","50% 50%"),toggle_class(n,"invisible",!e[15].cubeInited)},m(c,h){l&&l.m(c,h),insert(c,t,h),insert(c,n,h),append(n,r),append(r,i);for(let e=0;e<u.length;e+=1)u[e].m(i,null);e[36](r),o=!0,s||(a=[action_destroyer(bundle.pan.call(null,window_1$1,{direction:Hammer.DIRECTION_ALL})),listen(window_1$1,"resize",e[28]),listen(window_1$1,"panstart",e[25]),listen(window_1$1,"panmove",e[26]),listen(window_1$1,"panend",e[27])],s=!0)},p(e,t){if(e[23]&&l.p(e,t),18399257&t[0]){let n;for(c=new Array(6),n=0;n<c.length;n+=1){const r=get_each_context$6(e,c,n);u[n]?(u[n].p(r,t),transition_in(u[n],1)):(u[n]=create_each_block$6(r),u[n].c(),transition_in(u[n],1),u[n].m(i,null))}for(group_outros(),n=c.length;n<u.length;n+=1)h(n);check_outros()}(!o||2097152&t[0])&&attr(i,"style",e[21]),(!o||4194304&t[0])&&attr(r,"style",e[22]),(!o||263168&t[0])&&set_style(n,"transform","scale("+e[10]+", "+e[18]+")"),32768&t[0]&&toggle_class(n,"invisible",!e[15].cubeInited)},i(e){if(!o){for(let e=0;e<c.length;e+=1)transition_in(u[e]);o=!0}},o(e){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)transition_out(u[e]);o=!1},d(r){l&&l.d(r),r&&detach(t),r&&detach(n),destroy_each(u,r),e[36](null),s=!1,run_all(a)}}}const HORIZONTAL="horizontal",VERTICAL="vertical",BOTH="both";function clamp(e,t,n){return e<t?t:e>n?n:e}function same(e,t){return Math.abs(e.x).toFixed(1)==Math.abs(t.x).toFixed(1)&&Math.abs(e.y).toFixed(1)==Math.abs(t.y).toFixed(1)}function blend(e,t,n){return e*n+t*(1-n)}function normalise(e,t){return e<360-t&&(e+=360),e>=t&&(e-=360),e}function instance$c(e,t,n){let r,i,o,s,a,l,c,u,h,p,f,d,_,g,m,v,y;component_subscribe(e,index,(e=>n(14,m=e))),component_subscribe(e,smoothing,(e=>n(40,v=e))),component_subscribe(e,state,(e=>n(15,y=e)));let b,w,x,k="?debug"==window.location.search,{backspace:$=!0}=t,{spin:E=!1}=t,{components:T=[]}=t,C={x:0,y:0,z:0},S={x:0,y:0,z:0},R={...S},A={...S},P=2,j=1,O=1,L=!1,I=!1;onMount((e=>{N(),window.requestAnimationFrame(D),n(1,S.x+=90*parseInt(4*Math.random()),S)}));let F=-2;const M=e=>5==e||0==e;function D(){if(m<0){n(5,P=blend(P,1.5,v)),n(6,j=blend(j,1.5,v)),n(7,O=blend(O,1,v));let e=.03;return n(1,S.x-=1.8*e,S),window.requestAnimationFrame(D)}let e=Math.abs(normalise(R.x,180)-normalise(S.x,180)),t=Math.abs(normalise(R.y,180)-normalise(S.y,180)),i=(e+t)%360;if(i<=45){let o=clamp(z(e,0,45,1,2),1,2),s=clamp(z(t,0,45,1,2),1,2),a=2-clamp(z(i,0,45,0,1),0,1);o!=P&&n(5,P=o),s!=j&&s>j&&n(6,j=s),a!=O&&n(7,O=r?a:1)}if(I);else if(!E&&A&&L){let e=v,t=blend(S.x,A.x,e),i=blend(S.y,A.y,e),o=blend(S.y,A.z,e),s=1,a=1,l=r?2:1;n(5,P=blend(P,s,e)),n(6,j=blend(j,a,e)),n(7,O=blend(O,l,e)),S.x!=t&&n(1,S.x=t,S),S.y!=i&&n(1,S.y=i,S),S.z!=i&&n(1,S.z=o,S),same(S,A)&&(n(1,S.x=Math.round(t),S),n(1,S.y=Math.round(i),S),n(1,S.z=Math.round(o),S),n(5,P=s),n(6,j=a),n(7,O=l),n(1,S.x=normalise(S.x,360),S),console.log(`[Cube]  TWEEN FINISHED: triggering ${m}`),trigger.set(m),n(31,L=!1),volume.set(1))}window.requestAnimationFrame(D)}function z(e,t,n,r,i,o){return(e-t)*(i-r)/(n-t)+r}async function N(e){n(3,w=b.offsetWidth),n(4,x=b.offsetHeight),console.log(`[Cube]  width and height ${w} ${x}`)}return e.$$set=e=>{"backspace"in e&&n(29,$=e.backspace),"spin"in e&&n(30,E=e.spin),"components"in e&&n(0,T=e.components)},e.$$.update=()=>{49158&e.$$.dirty[0]|4&e.$$.dirty[1]&&(e=>{if(!y.inited||F==m)return;n(31,L=!0),n(1,S.x=normalise(S.x,360),S),n(2,A.x=normalise(A.x,360),A),n(16,R.x=A.x,R),n(16,R.y=A.y,R);let t={5:90,0:-90};S.x>45&&S.x<225&&(t={5:-90,0:90});let r=t[m]?A.x:90*(m-1),i=t[m]||0;0==A.x&&270==r&&(r=-90,n(1,S.x=normalise(S.x,180),S)),270==A.x&&0==r&&(r=360,n(1,S.x=normalise(S.x,360),S)),0==r&&S.x>180&&n(1,S.x=normalise(S.x,180),S),360==r&&S.x<180&&n(1,S.x+=360,S),n(2,A.x=r,A),n(2,A.y=i,A),y.cubeInited||(n(1,S.x=A.x,S),n(1,S.y=A.y,S),set_store_value(state,y.cubeInited=!0,y)),180==A.x&&-90==A.y&&0==m&&n(2,A.y+=180,A),180==A.x&&90==A.y&&5==m&&n(2,A.y-=180,A),n(33,F=m),set_store_value(state,y.panend=!1,y)})(),16384&e.$$.dirty[0]&&(r=M(m)),24&e.$$.dirty[0]&&n(34,i={_w:w/-2,w:w/2,_h:x/-2,h:x/2}),96&e.$$.dirty[0]&&n(11,_=parseInt(1e3+600*(P-1)+600*(j-1))),2048&e.$$.dirty[0]&&n(22,o=`perspective: ${_}px`),2&e.$$.dirty[0]&&n(8,h=(z(Math.abs(Math.abs(S.x)%180-90),0,45,1,0)+1)/2),258&e.$$.dirty[0]&&n(13,s={x:S.x,y:S.y*(1-h)||0,z:-S.y*h||0}),536879104&e.$$.dirty[0]&&n(21,a=`\n\t\ttransform-style: preserve-3d;\n\t\ttransform: \n\t\t\trotateY(${s.x}deg)\n\t\t\trotateX(${s.y}deg)\n\t\t\trotateZ(${s.z}deg)\n\t\t\ttranslate3d(0, 0, 0);\n\t\tbackface-visibility: ${$?"visible":"hidden"}`),24&e.$$.dirty[0]&&n(35,l=`height:${w}px;margin-top:-${(w-x)/2}px`),2&e.$$.dirty[0]&&n(20,c=e=>0==e?`rotateZ(${S.x}deg)`:5==e?`rotateZ(-${normalise(S.x,360)}deg)`:""),24&e.$$.dirty[1]&&n(19,u=[`${l};transform: rotateX(90deg) translate3d(0, 0, ${i.h}px)`,`transform: translate3d(0, 0, ${i.w}px)`,`transform: rotateY(-90deg) translate3d(0, 0, ${i.w}px)`,`transform: translate3d(0, 0, ${i._w}px) rotateY(180deg)`,`transform: rotateY(90deg) translate3d(0, 0, ${i.w}px)`,`${l};transform: rotateX(-90deg) translate3d(0, 0, ${i.h}px)`]),2&e.$$.dirty[0]&&n(9,p=(z(Math.abs(Math.abs(S.y)%180-90),0,45,1,0)+1)/2),24&e.$$.dirty[0]&&n(12,d=w/1e3*(2-w/x)),4328&e.$$.dirty[0]&&n(10,f=z(w,500,1e3,.75,.5)+-.08*(P-1)+-.06*(j-1)+(O-1)*d),1560&e.$$.dirty[0]&&n(18,g=f*(1-p)+f*(x/w)*p),16640&e.$$.dirty[0]|3&e.$$.dirty[1]&&(L||I)&&volume.set(1==m||3==m?1-h:h)},[T,S,A,w,x,P,j,O,h,p,f,_,d,s,m,y,R,b,g,u,c,a,o,k,M,function(e){n(16,R.x=normalise(A.x,360),R),n(16,R.y=A.y,R);let{deltaX:t,deltaY:r}=e.detail;set_store_value(state,y.direction=Math.abs(t)>Math.abs(r)?HORIZONTAL:VERTICAL,y),0!=m&&5!=m||set_store_value(state,y.direction=VERTICAL,y),set_store_value(state,y.direction=BOTH,y),n(32,I=!0),n(3,w=b.offsetWidth),n(4,x=b.offsetHeight),C.x=S.x,C.y=S.y},function(e){let{deltaX:t,deltaY:r}=e.detail,i=2*t*1.5/w,o=2*Math.round(r)*1/x;A.x>=90&&A.x<=180&&(o*=-1),y.direction!=HORIZONTAL&&y.direction!=BOTH||n(1,S.x=(C.x+90*i)%360,S),y.direction!=VERTICAL&&y.direction!=BOTH||n(1,S.y=(C.y-90*o)%360,S),y.direction==BOTH&&(n(1,S.x=normalise(S.x,180),S),n(1,S.y=normalise(S.y,180),S))},function(e){R.x==-A.x&&n(2,A.x+=360,A),R.y==-A.y&&n(2,A.y+=360,A),n(1,S.x=normalise(S.x,180),S),n(1,S.y=normalise(S.y,180),S),n(2,A.x=normalise(A.x,180),A),n(2,A.y=normalise(A.y,180),A),set_store_value(state,y.panend=!0,y);let t,r=normalise(S.x+45,360),i=(r-r%90)/90+1,o=normalise(S.y+45,360),s=z(o-o%90,90,270,-1,1);set_store_value(index,m=i,m),1==i&&(s*=-1),4==i&&(s*=-1),1==s&&(t=5),-1==s&&(t=0),void 0!==t&&set_store_value(index,m=t,m),set_store_value(smoothing,v=.9,v),n(31,L=!0),n(32,I=!1),volume.set(1)},N,$,E,L,I,F,i,l,function(e){binding_callbacks[e?"unshift":"push"]((()=>{b=e,n(17,b)}))}]}class Cube extends SvelteComponent{constructor(e){super(),init(this,e,instance$c,create_fragment$c,safe_not_equal,{backspace:29,spin:30,components:0},null,[-1,-1])}}function get_each_context$5(e,t,n){const r=e.slice();return r[6]=t[n],r[8]=n,r}function create_if_block$4(e){let t,n;return{c(){t=element("iframe"),attr(t,"class","abs w100pc h100pc b0 l0"),set_style(t,"height","calc(100% + 120px)"),set_style(t,"top","auto"),set_style(t,"bottom","0"),src_url_equal(t.src,n="https://chat.scanlines.xyz/channel/"+e[1]?.[e[0]]?.chat+"?layout=embedded")||attr(t,"src",n)},m(e,n){insert(e,t,n)},p(e,r){3&r&&!src_url_equal(t.src,n="https://chat.scanlines.xyz/channel/"+e[1]?.[e[0]]?.chat+"?layout=embedded")&&attr(t,"src",n)},d(e){e&&detach(t)}}}function create_each_block$5(e){let t,n,r,i,o,s,a,l=e[6].title+"";function c(...t){return e[5](e[8],...t)}return{c(){t=element("span"),n=space(),r=element("div"),i=text(l),o=space(),attr(t,"class","block p0-2 mlr0-5 filled radius1em"),toggle_class(t,"none",0==e[8]),attr(r,"class","pointer block whitespace-nowrap"),toggle_class(r,"bb4-solid",e[8]==e[0])},m(e,l){insert(e,t,l),insert(e,n,l),insert(e,r,l),append(r,i),append(r,o),s||(a=listen(r,"click",c),s=!0)},p(t,n){e=t,2&n&&l!==(l=e[6].title+"")&&set_data(i,l),1&n&&toggle_class(r,"bb4-solid",e[8]==e[0])},d(e){e&&detach(t),e&&detach(n),e&&detach(r),s=!1,a()}}}function create_fragment$b(e){let t,n,r,i,o,s,a,l,c=e[1]?.[e[0]]?.chat&&create_if_block$4(e),u=e[1],h=[];for(let t=0;t<u.length;t+=1)h[t]=create_each_block$5(get_each_context$5(e,u,t));const p=e[4].default,f=create_slot(p,e,e[3],null);return{c(){t=element("div"),n=element("div"),r=element("section"),c&&c.c(),i=space(),o=element("nav"),s=element("div");for(let e=0;e<h.length;e+=1)h[e].c();a=space(),f&&f.c(),attr(r,"class","flex grow rel"),attr(n,"class","flex grow p0-5 rel overflow-hidden"),attr(s,"class","flex row-center-center"),attr(o,"class","flex row-space-between-center f2 monospace uppercase p1 bt2-solid"),attr(t,"class","flex column h100pc"),set_style(t,"background","#1f2329")},m(e,u){insert(e,t,u),append(t,n),append(n,r),c&&c.m(r,null),append(t,i),append(t,o),append(o,s);for(let e=0;e<h.length;e+=1)h[e].m(s,null);append(o,a),f&&f.m(o,null),l=!0},p(e,[t]){if(e[1]?.[e[0]]?.chat?c?c.p(e,t):(c=create_if_block$4(e),c.c(),c.m(r,null)):c&&(c.d(1),c=null),3&t){let n;for(u=e[1],n=0;n<u.length;n+=1){const r=get_each_context$5(e,u,n);h[n]?h[n].p(r,t):(h[n]=create_each_block$5(r),h[n].c(),h[n].m(s,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=u.length}f&&f.p&&(!l||8&t)&&update_slot_base(f,p,e,e[3],l?get_slot_changes(p,e[3],t,null):get_all_dirty_from_scope(e[3]),null)},i(e){l||(transition_in(f,e),l=!0)},o(e){transition_out(f,e),l=!1},d(e){e&&detach(t),c&&c.d(),destroy_each(h,e),f&&f.d(e)}}}function instance$b(e,t,n){let r,i;component_subscribe(e,data,(e=>n(2,i=e)));let{$$slots:o={},$$scope:s}=t,{idx:a=0}=t;return e.$$set=e=>{"idx"in e&&n(0,a=e.idx),"$$scope"in e&&n(3,s=e.$$scope)},e.$$.update=()=>{4&e.$$.dirty&&n(1,r=i?.stations||[])},[a,r,i,s,o,(e,t)=>n(0,a=e)]}class Chat extends SvelteComponent{constructor(e){super(),init(this,e,instance$b,create_fragment$b,safe_not_equal,{idx:0})}}function vec2_from_angle(e,t,n){const{x:r,y:i}=n||{x:0,y:0};return{x:Math.cos(e*Math.PI/180)*t+r,y:Math.sin(e*Math.PI/180)*t+i}}function circle(e,t){let n="M";for(let r=0;r<t;r++){const i=vec2_from_angle(360/t*r,e);r>0&&(n+="L"),n+=`${i.x} ${i.y} `}return n+="Z",n}function polar_to_cartesian(e,t,n,r){var i=(r-90)*Math.PI/180;return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}}function describe_arc(e,t,n,r,i){var o=polar_to_cartesian(e,t,n,i),s=polar_to_cartesian(e,t,n,r),a=i-r<=180?"0":"1";return["M",o.x,o.y,"A",n,n,0,a,0,s.x,s.y].join(" ")}var util={vec2_from_angle:vec2_from_angle,circle:circle,describe_arc:describe_arc,describe_arc:describe_arc};const dark=writable(!1);function get_each_context$4(e,t,n){const r=e.slice();return r[47]=t[n],r[49]=n,r}function create_each_block$4(e){let t,n,r=[{d:n=e[4][e[49]]},e[1]],i={};for(let e=0;e<r.length;e+=1)i=assign(i,r[e]);return{c(){t=svg_element("path"),set_svg_attributes(t,i)},m(e,n){insert(e,t,n)},p(e,o){set_svg_attributes(t,i=get_spread_update(r,[16&o[0]&&n!==(n=e[4][e[49]])&&{d:n},2&o[0]&&e[1]]))},d(e){e&&detach(t)}}}function create_fragment$a(e){let t,n,r,i,o,s,a,l,c,u,h,p,f,d,_,g,m,v,y,b,w=[e[6],{fill:"black"}],x={};for(let e=0;e<w.length;e+=1)x=assign(x,w[e]);let k=[e[5],{r:l=e[5].r+e[0]},{fill:"white"}],$={};for(let e=0;e<k.length;e+=1)$=assign($,k[e]);let E=new Array(e[3]),T=[];for(let t=0;t<E.length;t+=1)T[t]=create_each_block$4(get_each_context$4(e,E,t));let C=[e[7]],S={};for(let e=0;e<C.length;e+=1)S=assign(S,C[e]);let R=[e[5],{r:g=e[5].r+e[0]/2},e[1]],A={};for(let e=0;e<R.length;e+=1)A=assign(A,R[e]);let P=[e[6],{r:v=e[6].r+e[0]/2},e[1]],j={};for(let e=0;e<P.length;e+=1)j=assign(j,P[e]);return{c(){t=svg_element("defs"),n=svg_element("mask"),r=svg_element("rect"),i=svg_element("circle"),s=svg_element("mask"),a=svg_element("circle"),u=space(),h=svg_element("g"),p=svg_element("g");for(let e=0;e<T.length;e+=1)T[e].c();f=svg_element("g"),d=svg_element("g"),_=svg_element("circle"),m=svg_element("circle"),attr(r,"width","100%"),attr(r,"height","100%"),attr(r,"fill","white"),set_svg_attributes(i,x),attr(n,"id",o="inner-mask-"+e[2]),set_svg_attributes(a,$),attr(s,"id",c="outer-mask-"+e[2]),set_svg_attributes(p,S),set_svg_attributes(_,A),set_svg_attributes(m,j),attr(d,"mask",y="url(#inner-mask-"+e[2]+")"),attr(f,"mask",b="url(#outer-mask-"+e[2]+")"),attr(h,"class","icon")},m(e,o){insert(e,t,o),append(t,n),append(n,r),append(n,i),append(t,s),append(s,a),insert(e,u,o),insert(e,h,o),append(h,p);for(let e=0;e<T.length;e+=1)T[e].m(p,null);append(h,f),append(f,d),append(d,_),append(d,m)},p(e,t){if(set_svg_attributes(i,x=get_spread_update(w,[64&t[0]&&e[6],{fill:"black"}])),4&t[0]&&o!==(o="inner-mask-"+e[2])&&attr(n,"id",o),set_svg_attributes(a,$=get_spread_update(k,[32&t[0]&&e[5],33&t[0]&&l!==(l=e[5].r+e[0])&&{r:l},{fill:"white"}])),4&t[0]&&c!==(c="outer-mask-"+e[2])&&attr(s,"id",c),26&t[0]){let n;for(E=new Array(e[3]),n=0;n<E.length;n+=1){const r=get_each_context$4(e,E,n);T[n]?T[n].p(r,t):(T[n]=create_each_block$4(r),T[n].c(),T[n].m(p,null))}for(;n<T.length;n+=1)T[n].d(1);T.length=E.length}set_svg_attributes(p,S=get_spread_update(C,[128&t[0]&&e[7]])),set_svg_attributes(_,A=get_spread_update(R,[32&t[0]&&e[5],33&t[0]&&g!==(g=e[5].r+e[0]/2)&&{r:g},2&t[0]&&e[1]])),set_svg_attributes(m,j=get_spread_update(P,[64&t[0]&&e[6],65&t[0]&&v!==(v=e[6].r+e[0]/2)&&{r:v},2&t[0]&&e[1]])),4&t[0]&&y!==(y="url(#inner-mask-"+e[2]+")")&&attr(d,"mask",y),4&t[0]&&b!==(b="url(#outer-mask-"+e[2]+")")&&attr(f,"mask",b)},i:noop,o:noop,d(e){e&&detach(t),e&&detach(u),e&&detach(h),destroy_each(T,e)}}}function instance$a($$self,$$props,$$invalidate){let rotate,cresent,main,$dark,$motion_rays,$motion_shrink,$motion_r,$motion_y,$motion_x;component_subscribe($$self,dark,(e=>$$invalidate(30,$dark=e)));let{class:class_=""}=$$props,{style:style_=""}=$$props,{width:width=200}=$$props,{height:height=200}=$$props,{stroke:stroke=2}=$$props,{duration:duration=1e3}=$$props,{hover:hover=!1}=$$props,{strokes:strokes={}}=$$props,{easing:easing=(e=>e)}=$$props,{browser:browser=!1}=$$props,{center:center={x:100,y:100}}=$$props,{origin:origin}=$$props,{state:state=!1}=$$props,{id:id}=$$props,{storage:storage=!0}=$$props,{amount:amount=10}=$$props,{rays:rays=.2}=$$props,{space:space=.1}=$$props,{offset:offset={x:.6,y:.4,r:.85}}=$$props,{end:end={x:1,y:0,r:.5}}=$$props,{spin:spin=1}=$$props;const sys=e=>window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches||!1,darkKey=browser?window.location.host+"-darkmode":void 0;function initDark(){if(!storage)return!1;let out;try{out=browser?eval(window.localStorage.getItem(darkKey)):void 0}catch(e){}if(browser&&1!=out&&0!=out&&(out=sys()),browser){const e=document.querySelector("link#favicon");e.href=`/favicon-${sys()?"dark":"light"}.ico`}return console.log(`  loading dark mode: ${out}`),out}let inited=!1;browser&&(set_store_value(dark,$dark=initDark(),$dark),state=$dark),onMount((async e=>{inited=!0}));let updating=!1;function onDarkChange(e){browser&&storage&&(inited&&(sys()===$dark?(console.log(`  clearing localStorage to system default: ${$dark}`),window.localStorage.removeItem(darkKey)):(console.log(`  overriding dark mode with localStorage: ${$dark}`),window.localStorage.setItem(darkKey,$dark))),updating||$$invalidate(13,state=e))}function onStateChange(e){updating=!0,set_store_value(dark,$dark=e,$dark),updating=!0}let motion_x=tweened(offset.x,{duration:duration,easing:easing});component_subscribe($$self,motion_x,(e=>$$invalidate(35,$motion_x=e)));let motion_y=tweened(offset.y,{duration:duration,easing:easing});component_subscribe($$self,motion_y,(e=>$$invalidate(34,$motion_y=e)));let motion_r=tweened(offset.r,{duration:duration,easing:easing});component_subscribe($$self,motion_r,(e=>$$invalidate(33,$motion_r=e)));let motion_shrink=tweened(1,{duration:duration,easing:easing});component_subscribe($$self,motion_shrink,(e=>$$invalidate(32,$motion_shrink=e)));let motion_rays=tweened(0,{duration:duration,easing:easing});function update(e){$dark?(motion_x.set(offset.x),motion_y.set(offset.y),motion_r.set(offset.r),motion_shrink.set(1),motion_rays.set(0)):(motion_x.set(end.x),motion_y.set(end.y),motion_r.set(end.r),motion_shrink.set(1-space-rays),motion_rays.set(1))}component_subscribe($$self,motion_rays,(e=>$$invalidate(31,$motion_rays=e)));let ray_ds=[];function gen(e,t,n){let r=[];for(let e=0;e<t;e++){const i=360/t*e,o=Math.min(width,height)/2,s=1-rays*n,a=util.vec2_from_angle(i,s*o,center),l=util.vec2_from_angle(i,1*o,center),c=`M${a.x} ${a.y} L${l.x} ${l.y}`;r.push(c)}$$invalidate(4,ray_ds=r)}return $$self.$$set=e=>{"class"in e&&$$invalidate(14,class_=e.class),"style"in e&&$$invalidate(15,style_=e.style),"width"in e&&$$invalidate(16,width=e.width),"height"in e&&$$invalidate(17,height=e.height),"stroke"in e&&$$invalidate(0,stroke=e.stroke),"duration"in e&&$$invalidate(18,duration=e.duration),"hover"in e&&$$invalidate(19,hover=e.hover),"strokes"in e&&$$invalidate(1,strokes=e.strokes),"easing"in e&&$$invalidate(20,easing=e.easing),"browser"in e&&$$invalidate(21,browser=e.browser),"center"in e&&$$invalidate(22,center=e.center),"origin"in e&&$$invalidate(23,origin=e.origin),"state"in e&&$$invalidate(13,state=e.state),"id"in e&&$$invalidate(2,id=e.id),"storage"in e&&$$invalidate(24,storage=e.storage),"amount"in e&&$$invalidate(3,amount=e.amount),"rays"in e&&$$invalidate(25,rays=e.rays),"space"in e&&$$invalidate(26,space=e.space),"offset"in e&&$$invalidate(27,offset=e.offset),"end"in e&&$$invalidate(28,end=e.end),"spin"in e&&$$invalidate(29,spin=e.spin)},$$self.$$.update=()=>{1073741824&$$self.$$.dirty[0]&&onDarkChange($dark),8192&$$self.$$.dirty[0]&&onStateChange(state),1073741824&$$self.$$.dirty[0]&&update(),545259528&$$self.$$.dirty[0]|1&$$self.$$.dirty[1]&&$$invalidate(7,rotate={style:`${origin}; transform: rotateZ(${$motion_rays*(360/amount*spin)}deg);`}),196609&$$self.$$.dirty[0]|28&$$self.$$.dirty[1]&&$$invalidate(6,cresent={cx:$motion_x*width,cy:$motion_y*height,r:Math.min(width,height)/2*$motion_r-stroke}),196609&$$self.$$.dirty[0]|2&$$self.$$.dirty[1]&&$$invalidate(5,main={cx:width/2,cy:height/2,r:Math.min(width,height)/2*$motion_shrink-stroke}),33554440&$$self.$$.dirty[0]|1&$$self.$$.dirty[1]&&gen(rays,amount,$motion_rays)},[stroke,strokes,id,amount,ray_ds,main,cresent,rotate,motion_x,motion_y,motion_r,motion_shrink,motion_rays,state,class_,style_,width,height,duration,hover,easing,browser,center,origin,storage,rays,space,offset,end,spin,$dark,$motion_rays,$motion_shrink,$motion_r,$motion_y,$motion_x]}class LightDark extends SvelteComponent{constructor(e){super(),init(this,e,instance$a,create_fragment$a,safe_not_equal,{class:14,style:15,width:16,height:17,stroke:0,duration:18,hover:19,strokes:1,easing:20,browser:21,center:22,origin:23,state:13,id:2,storage:24,amount:3,rays:25,space:26,offset:27,end:28,spin:29},null,[-1,-1])}}function get_each_context$3(e,t,n){const r=e.slice();return r[22]=t[n],r[24]=n,r}function create_each_block$3(e){let t,n,r=[{d:n="M0 "+e[6](e[24])+" L"+e[0]+" "+e[6](e[24])},e[1]],i={};for(let e=0;e<r.length;e+=1)i=assign(i,r[e]);return{c(){t=svg_element("path"),set_svg_attributes(t,i)},m(e,n){insert(e,t,n)},p(e,o){set_svg_attributes(t,i=get_spread_update(r,[1&o&&n!==(n="M0 "+e[6](e[24])+" L"+e[0]+" "+e[6](e[24]))&&{d:n},2&o&&e[1]]))},d(e){e&&detach(t)}}}function create_fragment$9(e){let t,n,r,i,o,s,a,l,c=[e[5],{fill:"white"}],u={};for(let e=0;e<c.length;e+=1)u=assign(u,c[e]);let h=[e[4],e[1]],p={};for(let e=0;e<h.length;e+=1)p=assign(p,h[e]);let f=new Array(3),d=[];for(let t=0;t<f.length;t+=1)d[t]=create_each_block$3(get_each_context$3(e,f,t));let _=[{mask:"url(#burger-mask-mask)"},e[3],{style:e[2]}],g={};for(let e=0;e<_.length;e+=1)g=assign(g,_[e]);return{c(){t=svg_element("defs"),n=svg_element("mask"),r=svg_element("rect"),i=svg_element("circle"),o=space(),s=svg_element("circle"),a=space(),l=svg_element("g");for(let e=0;e<d.length;e+=1)d[e].c();attr(r,"width","100%"),attr(r,"height","100%"),attr(r,"fill","black"),set_svg_attributes(i,u),attr(n,"id","burger-mask-mask"),set_svg_attributes(s,p),set_svg_attributes(l,g)},m(e,c){insert(e,t,c),append(t,n),append(n,r),append(n,i),insert(e,o,c),insert(e,s,c),insert(e,a,c),insert(e,l,c);for(let e=0;e<d.length;e+=1)d[e].m(l,null)},p(e,[t]){if(set_svg_attributes(i,u=get_spread_update(c,[32&t&&e[5],{fill:"white"}])),set_svg_attributes(s,p=get_spread_update(h,[16&t&&e[4],2&t&&e[1]])),67&t){let n;for(f=new Array(3),n=0;n<f.length;n+=1){const r=get_each_context$3(e,f,n);d[n]?d[n].p(r,t):(d[n]=create_each_block$3(r),d[n].c(),d[n].m(l,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=f.length}set_svg_attributes(l,g=get_spread_update(_,[{mask:"url(#burger-mask-mask)"},8&t&&e[3],4&t&&{style:e[2]}]))},i:noop,o:noop,d(e){e&&detach(t),e&&detach(o),e&&detach(s),e&&detach(a),e&&detach(l),destroy_each(d,e)}}}function instance$9(e,t,n){let r,i,o,s,{class:a=""}=t,{style:l=""}=t,{width:c=200}=t,{height:u=200}=t,{stroke:h=2}=t,{duration:p=1e3}=t,{hover:f=!1}=t,{strokes:d={}}=t,{easing:_=(e=>e)}=t,{browser:g=!1}=t,{center:m={x:100,y:100}}=t,{space:v=.7}=t,{origin:y}=t,{state:b=!1}=t;let w=(e=>tweened(e,{duration:p,easing:_}))(1);return component_subscribe(e,w,(e=>n(19,s=e))),e.$$set=e=>{"class"in e&&n(8,a=e.class),"style"in e&&n(9,l=e.style),"width"in e&&n(0,c=e.width),"height"in e&&n(10,u=e.height),"stroke"in e&&n(11,h=e.stroke),"duration"in e&&n(12,p=e.duration),"hover"in e&&n(13,f=e.hover),"strokes"in e&&n(1,d=e.strokes),"easing"in e&&n(14,_=e.easing),"browser"in e&&n(15,g=e.browser),"center"in e&&n(16,m=e.center),"space"in e&&n(17,v=e.space),"origin"in e&&n(2,y=e.origin),"state"in e&&n(18,b=e.state)},e.$$.update=()=>{var t;132097&e.$$.dirty&&n(5,r={cx:c/2,cy:u/2,r:Math.min(c,u)/2*v}),3073&e.$$.dirty&&n(4,i={cx:c/2,cy:u/2,r:Math.min(c,u)/2-h}),524288&e.$$.dirty&&n(3,o={transform:`scale( ${s} 1 )`}),262144&e.$$.dirty&&(t=b,w.set(t?0:1))},[c,d,y,o,i,r,e=>parseInt(u/4*e+u/4)-.5,w,a,l,u,h,p,f,_,g,m,v,b,s]}class Burger extends SvelteComponent{constructor(e){super(),init(this,e,instance$9,create_fragment$9,safe_not_equal,{class:8,style:9,width:0,height:10,stroke:11,duration:12,hover:13,strokes:1,easing:14,browser:15,center:16,space:17,origin:2,state:18})}}function get_each_context$2(e,t,n){const r=e.slice();return r[22]=t[n],r}function create_each_block$2(e){let t,n,r=[{d:n=e[22]},e[0]],i={};for(let e=0;e<r.length;e+=1)i=assign(i,r[e]);return{c(){t=svg_element("path"),set_svg_attributes(t,i)},m(e,n){insert(e,t,n)},p(e,o){set_svg_attributes(t,i=get_spread_update(r,[4&o&&n!==(n=e[22])&&{d:n},1&o&&e[0]]))},d(e){e&&detach(t)}}}function create_fragment$8(e){let t,n,r,i,o,s,a,l=[e[3],{fill:"white"}],c={};for(let e=0;e<l.length;e+=1)c=assign(c,l[e]);let u=[e[1],e[0]],h={};for(let e=0;e<u.length;e+=1)h=assign(h,u[e]);let p=e[2],f=[];for(let t=0;t<p.length;t+=1)f[t]=create_each_block$2(get_each_context$2(e,p,t));return{c(){t=svg_element("defs"),n=svg_element("mask"),r=svg_element("rect"),i=svg_element("rect"),o=space(),s=svg_element("g"),a=svg_element("rect");for(let e=0;e<f.length;e+=1)f[e].c();attr(r,"width","100%"),attr(r,"height","100%"),attr(r,"fill","black"),set_svg_attributes(i,c),attr(n,"id","mail-mask"),set_svg_attributes(a,h),attr(s,"mask","url(#mail-mask)")},m(e,l){insert(e,t,l),append(t,n),append(n,r),append(n,i),insert(e,o,l),insert(e,s,l),append(s,a);for(let e=0;e<f.length;e+=1)f[e].m(s,null)},p(e,[t]){if(set_svg_attributes(i,c=get_spread_update(l,[8&t&&e[3],{fill:"white"}])),set_svg_attributes(a,h=get_spread_update(u,[2&t&&e[1],1&t&&e[0]])),5&t){let n;for(p=e[2],n=0;n<p.length;n+=1){const r=get_each_context$2(e,p,n);f[n]?f[n].p(r,t):(f[n]=create_each_block$2(r),f[n].c(),f[n].m(s,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=p.length}},i:noop,o:noop,d(e){e&&detach(t),e&&detach(o),e&&detach(s),destroy_each(f,e)}}}function instance$8(e,t,n){let r,i,o,{class:s=""}=t,{style:a=""}=t,{width:l=200}=t,{height:c=200}=t,{stroke:u=2}=t,{duration:h=1e3}=t,{hover:p=!1}=t,{strokes:f={}}=t,{easing:d=(e=>e)}=t,{browser:_=!1}=t,{center:g={x:100,y:100}}=t,{space:m=.7}=t,{origin:v={}}=t,{state:y=!1}=t;let b=(e=>tweened(e,{duration:h,easing:d}))(1);return e.$$set=e=>{"class"in e&&n(4,s=e.class),"style"in e&&n(5,a=e.style),"width"in e&&n(6,l=e.width),"height"in e&&n(7,c=e.height),"stroke"in e&&n(8,u=e.stroke),"duration"in e&&n(9,h=e.duration),"hover"in e&&n(10,p=e.hover),"strokes"in e&&n(0,f=e.strokes),"easing"in e&&n(11,d=e.easing),"browser"in e&&n(12,_=e.browser),"center"in e&&n(13,g=e.center),"space"in e&&n(14,m=e.space),"origin"in e&&n(15,v=e.origin),"state"in e&&n(16,y=e.state)},e.$$.update=()=>{var t;65536&e.$$.dirty&&(t=y,b.set(t?0:1)),448&e.$$.dirty&&n(1,r={width:l-2*u,height:.8*c-2*u,x:u,y:u}),258&e.$$.dirty&&n(3,i={width:r.width+u,height:r.height+u,x:r.x-.5*u,y:r.y-.5*u}),192&e.$$.dirty&&n(2,o=[`M0 0 L${l/2} ${.5*c} L${l} 0`,`M0 ${c} L${.35*l} ${.5*c}`,`M${l} ${c} L${.65*l} ${.5*c}`])},[f,r,o,i,s,a,l,c,u,h,p,d,_,g,m,v,y]}class Mail extends SvelteComponent{constructor(e){super(),init(this,e,instance$8,create_fragment$8,safe_not_equal,{class:4,style:5,width:6,height:7,stroke:8,duration:9,hover:10,strokes:0,easing:11,browser:12,center:13,space:14,origin:15,state:16})}}function create_fragment$7(e){let t,n,r,i,o,s,a,l,c,u,h,p,f,d=[e[5],{fill:"black"}],_={};for(let e=0;e<d.length;e+=1)_=assign(_,d[e]);let g=[e[5]],m={};for(let e=0;e<g.length;e+=1)m=assign(m,g[e]);let v=[{d:u=`\n\t\t\tM${e[0]/2} ${e[2]}\n\t\t\tL${e[2]} ${e[1]/2}\n\t\t\tL${e[0]/2} ${e[1]-e[2]}\n\t\t`},e[3]],y={};for(let e=0;e<v.length;e+=1)y=assign(y,v[e]);let b=[{d:p=`\n\t\t\tM${e[2]} ${e[1]/2}\n\t\t\tL${e[0]-e[2]} ${e[1]/2}\n\t\t`},e[3]],w={};for(let e=0;e<b.length;e+=1)w=assign(w,b[e]);return{c(){t=svg_element("defs"),n=svg_element("mask"),r=svg_element("rect"),i=svg_element("circle"),o=space(),s=svg_element("g"),a=svg_element("circle"),l=svg_element("g"),c=svg_element("path"),h=svg_element("path"),attr(r,"width","100%"),attr(r,"height","100%"),attr(r,"fill","white"),set_svg_attributes(i,_),attr(n,"id","arrow-mask"),set_svg_attributes(a,m),set_svg_attributes(c,y),set_svg_attributes(h,w),attr(l,"mask","url(#arrow-mask)"),attr(s,"style",f=`${e[4]}; transform: rotateZ(${parseInt(90*rotate)}deg); translate3d(0, 0, 0);`)},m(e,u){insert(e,t,u),append(t,n),append(n,r),append(n,i),insert(e,o,u),insert(e,s,u),append(s,a),append(s,l),append(l,c),append(l,h)},p(e,[t]){set_svg_attributes(i,_=get_spread_update(d,[32&t&&e[5],{fill:"black"}])),set_svg_attributes(a,m=get_spread_update(g,[32&t&&e[5]])),set_svg_attributes(c,y=get_spread_update(v,[7&t&&u!==(u=`\n\t\t\tM${e[0]/2} ${e[2]}\n\t\t\tL${e[2]} ${e[1]/2}\n\t\t\tL${e[0]/2} ${e[1]-e[2]}\n\t\t`)&&{d:u},8&t&&e[3]])),set_svg_attributes(h,w=get_spread_update(b,[7&t&&p!==(p=`\n\t\t\tM${e[2]} ${e[1]/2}\n\t\t\tL${e[0]-e[2]} ${e[1]/2}\n\t\t`)&&{d:p},8&t&&e[3]])),16&t&&f!==(f=`${e[4]}; transform: rotateZ(${parseInt(90*rotate)}deg); translate3d(0, 0, 0);`)&&attr(s,"style",f)},i:noop,o:noop,d(e){e&&detach(t),e&&detach(o),e&&detach(s)}}}let rotate=0;const size=.95;function instance$7(e,t,n){let r,{class:i=""}=t,{style:o=""}=t,{width:s=200}=t,{height:a=200}=t,{stroke:l=2}=t,{duration:c=1e3}=t,{hover:u=!1}=t,{strokes:h={}}=t,{easing:p=(e=>e)}=t,{browser:f=!1}=t,{center:d={x:100,y:100}}=t,{origin:_}=t,{state:g}=t;return e.$$set=e=>{"class"in e&&n(6,i=e.class),"style"in e&&n(7,o=e.style),"width"in e&&n(0,s=e.width),"height"in e&&n(1,a=e.height),"stroke"in e&&n(2,l=e.stroke),"duration"in e&&n(8,c=e.duration),"hover"in e&&n(9,u=e.hover),"strokes"in e&&n(3,h=e.strokes),"easing"in e&&n(10,p=e.easing),"browser"in e&&n(11,f=e.browser),"center"in e&&n(12,d=e.center),"origin"in e&&n(4,_=e.origin),"state"in e&&n(13,g=e.state)},e.$$.update=()=>{15&e.$$.dirty&&n(5,r={cx:s*size-l,cy:a/2,r:Math.max(s,a)*(1-size),...h})},[s,a,l,h,_,r,i,o,c,u,p,f,d,g]}class Arrow extends SvelteComponent{constructor(e){super(),init(this,e,instance$7,create_fragment$7,safe_not_equal,{class:6,style:7,width:0,height:1,stroke:2,duration:8,hover:9,strokes:3,easing:10,browser:11,center:12,origin:4,state:13})}}function create_else_block$2(e){let t,n,r,i=[{d:r=`\n\t\t\tM0 0 \n\t\t\tL${e[0]} ${e[1]/2}\n\t\t\tL0 ${e[1]} \n\t\t\tz\n\t\t`},e[2]],o={};for(let e=0;e<i.length;e+=1)o=assign(o,i[e]);return{c(){t=svg_element("g"),n=svg_element("path"),set_svg_attributes(n,o)},m(e,r){insert(e,t,r),append(t,n)},p(e,t){set_svg_attributes(n,o=get_spread_update(i,[3&t&&r!==(r=`\n\t\t\tM0 0 \n\t\t\tL${e[0]} ${e[1]/2}\n\t\t\tL0 ${e[1]} \n\t\t\tz\n\t\t`)&&{d:r},4&t&&e[2]]))},d(e){e&&detach(t)}}}function create_if_block$3(e){let t,n,r,i,o=[e[6],e[2]],s={};for(let e=0;e<o.length;e+=1)s=assign(s,o[e]);let a=[e[6],e[2],{x:i=e[0]-parseInt(e[0]*e[4])+e[5]}],l={};for(let e=0;e<a.length;e+=1)l=assign(l,a[e]);return{c(){t=svg_element("g"),n=svg_element("rect"),r=svg_element("rect"),set_svg_attributes(n,s),set_svg_attributes(r,l)},m(e,i){insert(e,t,i),append(t,n),append(t,r)},p(e,t){set_svg_attributes(n,s=get_spread_update(o,[64&t&&e[6],4&t&&e[2]])),set_svg_attributes(r,l=get_spread_update(a,[64&t&&e[6],4&t&&e[2],49&t&&i!==(i=e[0]-parseInt(e[0]*e[4])+e[5])&&{x:i}]))},d(e){e&&detach(t)}}}function create_fragment$6(e){let t,n,r;function i(e,t){return e[3]?create_if_block$3:create_else_block$2}let o=i(e),s=o(e);return{c(){t=svg_element("defs"),n=space(),s.c(),r=empty()},m(e,i){insert(e,t,i),insert(e,n,i),s.m(e,i),insert(e,r,i)},p(e,[t]){o===(o=i(e))&&s?s.p(e,t):(s.d(1),s=o(e),s&&(s.c(),s.m(r.parentNode,r)))},i:noop,o:noop,d(e){e&&detach(t),e&&detach(n),s.d(e),e&&detach(r)}}}function instance$6(e,t,n){let r,i,{class:o=""}=t,{style:s=""}=t,{width:a=200}=t,{height:l=200}=t,{stroke:c=2}=t,{duration:u=1e3}=t,{hover:h=!1}=t,{strokes:p={}}=t,{easing:f=(e=>e)}=t,{browser:d=!1}=t,{center:_={x:100,y:100}}=t,{origin:g}=t,{state:m}=t,{thick:v=.3333}=t;return e.$$set=e=>{"class"in e&&n(7,o=e.class),"style"in e&&n(8,s=e.style),"width"in e&&n(0,a=e.width),"height"in e&&n(1,l=e.height),"stroke"in e&&n(9,c=e.stroke),"duration"in e&&n(10,u=e.duration),"hover"in e&&n(11,h=e.hover),"strokes"in e&&n(2,p=e.strokes),"easing"in e&&n(12,f=e.easing),"browser"in e&&n(13,d=e.browser),"center"in e&&n(14,_=e.center),"origin"in e&&n(15,g=e.origin),"state"in e&&n(3,m=e.state),"thick"in e&&n(4,v=e.thick)},e.$$.update=()=>{512&e.$$.dirty&&n(5,r=c%2/2),51&e.$$.dirty&&n(6,i={width:parseInt(a*v),height:l,y:r,x:r})},[a,l,p,m,v,r,i,o,s,c,u,h,f,d,_,g]}class PlayPause extends SvelteComponent{constructor(e){super(),init(this,e,instance$6,create_fragment$6,safe_not_equal,{class:7,style:8,width:0,height:1,stroke:9,duration:10,hover:11,strokes:2,easing:12,browser:13,center:14,origin:15,state:3,thick:4})}}function create_else_block$1(e){let t,n,r,i,o,s=[{d:r=`\n\t\t\tM0 0\n\t\t\tL${e[0]} ${e[1]}\n\t\t`},e[2]],a={};for(let e=0;e<s.length;e+=1)a=assign(a,s[e]);let l=[{d:o=`\n\t\t\tM0 ${e[1]}\n\t\t\tL${e[0]} 0\n\t\t`},e[2]],c={};for(let e=0;e<l.length;e+=1)c=assign(c,l[e]);return{c(){t=svg_element("g"),n=svg_element("path"),i=svg_element("path"),set_svg_attributes(n,a),set_svg_attributes(i,c)},m(e,r){insert(e,t,r),append(t,n),append(t,i)},p(e,t){set_svg_attributes(n,a=get_spread_update(s,[3&t&&r!==(r=`\n\t\t\tM0 0\n\t\t\tL${e[0]} ${e[1]}\n\t\t`)&&{d:r},4&t&&e[2]])),set_svg_attributes(i,c=get_spread_update(l,[3&t&&o!==(o=`\n\t\t\tM0 ${e[1]}\n\t\t\tL${e[0]} 0\n\t\t`)&&{d:o},4&t&&e[2]]))},d(e){e&&detach(t)}}}function create_if_block$2(e){let t,n,r,i,o,s=[{d:n=`\n\t\t${util.describe_arc(e[0]/2,e[1]/2,.5*Math.max(e[0],e[1]),20,160)}\n\t`},e[2]],a={};for(let e=0;e<s.length;e+=1)a=assign(a,s[e]);let l=[{d:o=`\n\t\t${util.describe_arc(e[0]/2,e[1]/2,.3*Math.max(e[0],e[1]),20,160)}\n\t`},e[2]],c={};for(let e=0;e<l.length;e+=1)c=assign(c,l[e]);return{c(){t=svg_element("path"),r=space(),i=svg_element("path"),set_svg_attributes(t,a),set_svg_attributes(i,c)},m(e,n){insert(e,t,n),insert(e,r,n),insert(e,i,n)},p(e,r){set_svg_attributes(t,a=get_spread_update(s,[3&r&&n!==(n=`\n\t\t${util.describe_arc(e[0]/2,e[1]/2,.5*Math.max(e[0],e[1]),20,160)}\n\t`)&&{d:n},4&r&&e[2]])),set_svg_attributes(i,c=get_spread_update(l,[3&r&&o!==(o=`\n\t\t${util.describe_arc(e[0]/2,e[1]/2,.3*Math.max(e[0],e[1]),20,160)}\n\t`)&&{d:o},4&r&&e[2]]))},d(e){e&&detach(t),e&&detach(r),e&&detach(i)}}}function create_fragment$5(e){let t,n,r,i,o,s;function a(e,t){return e[4]?create_if_block$2:create_else_block$1}let l=a(e),c=l(e),u=[{style:e[3]},{transform:"scale( 1 0.7 )"},{d:s=`\n\t\tM0 ${e[1]/2}\n\t\tL${e[0]/2} 0\n\t\tL${e[0]/2} ${e[1]}\n\t\tz\n\t`},e[2]],h={};for(let e=0;e<u.length;e+=1)h=assign(h,u[e]);return{c(){t=svg_element("defs"),n=space(),c.c(),r=space(),i=svg_element("g"),o=svg_element("path"),set_svg_attributes(o,h)},m(e,s){insert(e,t,s),insert(e,n,s),c.m(e,s),insert(e,r,s),insert(e,i,s),append(i,o)},p(e,[t]){l===(l=a(e))&&c?c.p(e,t):(c.d(1),c=l(e),c&&(c.c(),c.m(r.parentNode,r))),set_svg_attributes(o,h=get_spread_update(u,[8&t&&{style:e[3]},{transform:"scale( 1 0.7 )"},3&t&&s!==(s=`\n\t\tM0 ${e[1]/2}\n\t\tL${e[0]/2} 0\n\t\tL${e[0]/2} ${e[1]}\n\t\tz\n\t`)&&{d:s},4&t&&e[2]]))},i:noop,o:noop,d(e){e&&detach(t),e&&detach(n),c.d(e),e&&detach(r),e&&detach(i)}}}function instance$5(e,t,n){let{class:r=""}=t,{style:i=""}=t,{width:o=200}=t,{height:s=200}=t,{stroke:a=2}=t,{duration:l=1e3}=t,{hover:c=!1}=t,{strokes:u={}}=t,{easing:h=(e=>e)}=t,{browser:p=!1}=t,{center:f={x:100,y:100}}=t,{origin:d}=t,{state:_}=t,{thick:g=.3333}=t;return e.$$set=e=>{"class"in e&&n(5,r=e.class),"style"in e&&n(6,i=e.style),"width"in e&&n(0,o=e.width),"height"in e&&n(1,s=e.height),"stroke"in e&&n(7,a=e.stroke),"duration"in e&&n(8,l=e.duration),"hover"in e&&n(9,c=e.hover),"strokes"in e&&n(2,u=e.strokes),"easing"in e&&n(10,h=e.easing),"browser"in e&&n(11,p=e.browser),"center"in e&&n(12,f=e.center),"origin"in e&&n(3,d=e.origin),"state"in e&&n(4,_=e.state),"thick"in e&&n(13,g=e.thick)},e.$$.update=()=>{e.$$.dirty},[o,s,u,d,_,r,i,a,l,c,h,p,f,g]}class Audio extends SvelteComponent{constructor(e){super(),init(this,e,instance$5,create_fragment$5,safe_not_equal,{class:5,style:6,width:0,height:1,stroke:7,duration:8,hover:9,strokes:2,easing:10,browser:11,center:12,origin:3,state:4,thick:13})}}function get_each_context$1(e,t,n){const r=e.slice();return r[15]=t[n],r}function create_each_block$1(e){let t,n,r,i,o,s,a,l=[{d:i=`\n\t\t\t\t${util.describe_arc(.8*e[0],0,.8*Math.max(e[0],e[1]),0,260)}\n\t\t\t`},e[2]],c={};for(let e=0;e<l.length;e+=1)c=assign(c,l[e]);let u=[{d:s="M"+e[0]*e[3]+","+e[1]+" L"+e[0]+","+e[1]*e[3]+" L"+e[0]*e[3]+","+.6*e[1]},e[2]],h={};for(let e=0;e<u.length;e+=1)h=assign(h,u[e]);return{c(){t=svg_element("g"),n=svg_element("g"),r=svg_element("path"),o=svg_element("path"),set_svg_attributes(r,c),set_svg_attributes(o,h),attr(t,"transform",a=e[15])},m(e,i){insert(e,t,i),append(t,n),append(n,r),append(n,o)},p(e,n){set_svg_attributes(r,c=get_spread_update(l,[3&n&&i!==(i=`\n\t\t\t\t${util.describe_arc(.8*e[0],0,.8*Math.max(e[0],e[1]),0,260)}\n\t\t\t`)&&{d:i},4&n&&e[2]])),set_svg_attributes(o,h=get_spread_update(u,[11&n&&s!==(s="M"+e[0]*e[3]+","+e[1]+" L"+e[0]+","+e[1]*e[3]+" L"+e[0]*e[3]+","+.6*e[1])&&{d:s},4&n&&e[2]])),2&n&&a!==(a=e[15])&&attr(t,"transform",a)},d(e){e&&detach(t)}}}function create_fragment$4(e){let t,n,r,i,o,s=["",`scale( 1, -1 ) translate(0, -${e[1]})`],a=[];for(let t=0;t<2;t+=1)a[t]=create_each_block$1(get_each_context$1(e,s,t));return{c(){t=svg_element("defs"),n=svg_element("mask"),r=space();for(let e=0;e<2;e+=1)a[e].c();i=space(),o=svg_element("g"),attr(n,"id","template-mask"),attr(o,"mask","url(#template-mask)")},m(e,s){insert(e,t,s),append(t,n),insert(e,r,s);for(let t=0;t<2;t+=1)a[t].m(e,s);insert(e,i,s),insert(e,o,s)},p(e,[t]){if(15&t){let n;for(s=["",`scale( 1, -1 ) translate(0, -${e[1]})`],n=0;n<2;n+=1){const r=get_each_context$1(e,s,n);a[n]?a[n].p(r,t):(a[n]=create_each_block$1(r),a[n].c(),a[n].m(i.parentNode,i))}for(;n<2;n+=1)a[n].d(1)}},i:noop,o:noop,d(e){e&&detach(t),e&&detach(r),destroy_each(a,e),e&&detach(i),e&&detach(o)}}}function instance$4(e,t,n){let{class:r=""}=t,{style:i=""}=t,{width:o=200}=t,{height:s=200}=t,{stroke:a=2}=t,{duration:l=1e3}=t,{hover:c=!1}=t,{strokes:u={}}=t,{easing:h=(e=>e)}=t,{browser:p=!1}=t,{center:f={x:100,y:100}}=t,{origin:d}=t,{state:_}=t,{length:g=.77}=t;return e.$$set=e=>{"class"in e&&n(4,r=e.class),"style"in e&&n(5,i=e.style),"width"in e&&n(0,o=e.width),"height"in e&&n(1,s=e.height),"stroke"in e&&n(6,a=e.stroke),"duration"in e&&n(7,l=e.duration),"hover"in e&&n(8,c=e.hover),"strokes"in e&&n(2,u=e.strokes),"easing"in e&&n(9,h=e.easing),"browser"in e&&n(10,p=e.browser),"center"in e&&n(11,f=e.center),"origin"in e&&n(12,d=e.origin),"state"in e&&n(13,_=e.state),"length"in e&&n(3,g=e.length)},[o,s,u,g,r,i,a,l,c,h,p,f,d,_]}class Randomise extends SvelteComponent{constructor(e){super(),init(this,e,instance$4,create_fragment$4,safe_not_equal,{class:4,style:5,width:0,height:1,stroke:6,duration:7,hover:8,strokes:2,easing:9,browser:10,center:11,origin:12,state:13,length:3})}}function create_fragment$3(e){let t,n,r,i,o,s,a,l,c,u,h,p,f;const d=[e[13],e[5],{strokes:e[9]},{easing:easingFunctions[e[4]]},{browser:e[10]},{center:e[11]},{origin:origin},{width:e[8]},{height:e[7]},{style:""}];function _(t){e[20](t)}var g=e[12][e[6]];function m(e){let t={};for(let e=0;e<d.length;e+=1)t=assign(t,d[e]);return void 0!==e[0]&&(t.state=e[0]),{props:t}}return g&&(r=new g(m(e)),binding_callbacks.push((()=>bind(r,"state",_)))),{c(){t=svg_element("svg"),n=svg_element("g"),r&&create_component(r.$$.fragment),c=space(),u=empty(),attr(n,"transform",o="translate( "+e[3]+", "+e[3]+" )"),attr(t,"xmlns","http://www.w3.org/2000/svg"),attr(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),attr(t,"width",s=e[8]+2*e[3]),attr(t,"height",a=e[7]+2*e[3]),attr(t,"alt",e[6]),attr(t,"title",e[6]),attr(t,"class",l=e[1]+" rad-and-cool pointer "+e[6]),attr(t,"style",e[2])},m(i,o){insert(i,t,o),append(t,n),r&&mount_component(r,n,null),insert(i,c,o),insert(i,u,o),h=!0,p||(f=listen(t,"click",e[21]),p=!0)},p(e,[c]){const u=12208&c?get_spread_update(d,[8192&c&&get_spread_object(e[13]),32&c&&get_spread_object(e[5]),512&c&&{strokes:e[9]},16&c&&{easing:easingFunctions[e[4]]},1024&c&&{browser:e[10]},2048&c&&{center:e[11]},0&c&&{origin:origin},256&c&&{width:e[8]},128&c&&{height:e[7]},0&c&&{style:""}]):{};if(!i&&1&c&&(i=!0,u.state=e[0],add_flush_callback((()=>i=!1))),g!==(g=e[12][e[6]])){if(r){group_outros();const e=r;transition_out(e.$$.fragment,1,0,(()=>{destroy_component(e,1)})),check_outros()}g?(r=new g(m(e)),binding_callbacks.push((()=>bind(r,"state",_))),create_component(r.$$.fragment),transition_in(r.$$.fragment,1),mount_component(r,n,null)):r=null}else g&&r.$set(u);(!h||8&c&&o!==(o="translate( "+e[3]+", "+e[3]+" )"))&&attr(n,"transform",o),(!h||264&c&&s!==(s=e[8]+2*e[3]))&&attr(t,"width",s),(!h||136&c&&a!==(a=e[7]+2*e[3]))&&attr(t,"height",a),(!h||64&c)&&attr(t,"alt",e[6]),(!h||64&c)&&attr(t,"title",e[6]),(!h||66&c&&l!==(l=e[1]+" rad-and-cool pointer "+e[6]))&&attr(t,"class",l),(!h||4&c)&&attr(t,"style",e[2])},i(e){h||(r&&transition_in(r.$$.fragment,e),h=!0)},o(e){r&&transition_out(r.$$.fragment,e),h=!1},d(e){e&&detach(t),r&&destroy_component(r),e&&detach(c),e&&detach(u),p=!1,f()}}}const origin="transform-box: fill-box;transform-origin: center center;";function instance$3(e,t,n){let r,i,o,s,a,{class:l=""}=t,{style:c=""}=t,{width:u=200}=t,{height:h=200}=t,{stroke:p=2}=t,{easing:f="cubicOut"}=t,{color:d="#efefef"}=t,{duration:_=1e3}=t,{hover:g=!1}=t,{misc:m={}}=t,{type:v="light-dark"}=t,{state:y=!0}=t,{id:b="unique-"+parseInt(1e3*Math.random())}=t,w={"light-dark":LightDark,burger:Burger,mail:Mail,arrow:Arrow,"play-pause":PlayPause,audio:Audio,randomise:Randomise};return e.$$set=e=>{n(13,t=assign(assign({},t),exclude_internal_props(e))),"class"in e&&n(1,l=e.class),"style"in e&&n(2,c=e.style),"width"in e&&n(14,u=e.width),"height"in e&&n(15,h=e.height),"stroke"in e&&n(3,p=e.stroke),"easing"in e&&n(4,f=e.easing),"color"in e&&n(16,d=e.color),"duration"in e&&n(17,_=e.duration),"hover"in e&&n(18,g=e.hover),"misc"in e&&n(5,m=e.misc),"type"in e&&n(6,v=e.type),"state"in e&&n(0,y=e.state),"id"in e&&n(19,b=e.id)},e.$$.update=()=>{49152&e.$$.dirty&&n(11,r={x:u/2,y:h/2}),65544&e.$$.dirty&&n(9,o={"stroke-width":p,fill:"transparent",stroke:d,"vector-effect":"non-scaling-stroke"}),16384&e.$$.dirty&&n(8,s=parseInt(u)),32768&e.$$.dirty&&n(7,a=parseInt(h))},n(10,i="undefined"!=typeof window&&void 0!==window.document),t=exclude_internal_props(t),[y,l,c,p,f,m,v,a,s,o,i,r,w,t,u,h,d,_,g,b,function(e){y=e,n(0,y)},e=>n(0,y=!y)]}class All_wc extends SvelteComponent{constructor(e){super(),init(this,e,instance$3,create_fragment$3,safe_not_equal,{class:1,style:2,width:14,height:15,stroke:3,easing:4,color:16,duration:17,hover:18,misc:5,type:6,state:0,id:19})}}function create_else_block(e){let t,n;return t=new All_wc({props:{state:e[4]==_PLAYING,type:"play-pause",width:60,height:60}}),{c(){create_component(t.$$.fragment)},m(e,r){mount_component(t,e,r),n=!0},p(e,n){const r={};16&n[0]&&(r.state=e[4]==_PLAYING),t.$set(r)},i(e){n||(transition_in(t.$$.fragment,e),n=!0)},o(e){transition_out(t.$$.fragment,e),n=!1},d(e){destroy_component(t,e)}}}function create_if_block_2$1(e){let t;return{c(){t=element("span"),attr(t,"class","spin block w80px h80px p0-2 b6-dashed radius100pc rel flex row-flex-end-center")},m(e,n){insert(e,t,n)},p:noop,i:noop,o:noop,d(e){e&&detach(t)}}}function create_if_block_1$1(e){let t;return{c(){t=element("div"),t.textContent="REFRESH",attr(t,"class","clickable plr1 f3 b2-solid ")},m(e,n){insert(e,t,n)},p:noop,i:noop,o:noop,d(e){e&&detach(t)}}}function create_if_block$1(e){let t,n,r;return{c(){t=element("video"),n=element("source"),src_url_equal(n.src,r=e[13])||attr(n,"src",r),attr(n,"type","application/x-mpegURL"),attr(t,"class","videojs fill invert bg")},m(r,i){insert(r,t,i),append(t,n),e[28](t)},p(e,t){8192&t[0]&&!src_url_equal(n.src,r=e[13])&&attr(n,"src",r)},d(n){n&&detach(t),e[28](null)}}}function create_fragment$2(e){let t,n,r,i,o,s,a,l,c,u,h,p,f,d,_,g,m,v,y,b,w,x,k,$,E,T,C,S,R,A,P,j,O,L,I,F,M,D,z,N,B,q,U,H,Y,V,W=(e[11]||"none")+"",G=e[8].toFixed(2)+"",X=(e[9]||e[4]||"")+"";const Q=[create_if_block_1$1,create_if_block_2$1,create_else_block],Z=[];function K(e,t){return e[9]?0:e[4]==_LOADING||e[5]==_LOADING?1:2}T=K(e),C=Z[T]=Q[T](e);let J=create_if_block$1(e);return{c(){t=element("section"),n=element("div"),r=element("span"),i=element("span"),o=text("events = "),s=text(W),a=space(),l=element("span"),c=text("internal = "),u=text(e[5]),h=space(),p=element("span"),f=text("external = "),d=text(e[4]),_=space(),g=element("span"),m=text("interact = "),v=text(e[12]),y=space(),b=element("span"),w=text("volume = "),x=text(G),k=space(),$=element("div"),E=element("div"),C.c(),S=space(),R=element("span"),A=element("span"),P=text(X),j=space(),O=element("span"),O.innerHTML='<svg class="w2em h2em" height="14px" version="1.1" viewBox="0 0 14 14" width="14px" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.vidicon.org" xmlns:xlink="http://www.w3.org/1999/xlink"><title></title><desc></desc><defs></defs><g fill="none" fill-rule="evenodd" stroke="none" stroke-width="1"><g fill="var(--color)" transform="translate(-215.000000, -257.000000)"><g transform="translate(215.000000, 257.000000)"><path d="M2,9 L0,9 L0,14 L5,14 L5,12 L2,12 L2,9 L2,9 Z M0,5 L2,5 L2,2 L5,2 L5,0 L0,0 L0,5 L0,5 Z M12,12 L9,12 L9,14 L14,14 L14,9 L12,9 L12,12 L12,12 Z M9,0 L9,2 L12,2 L12,5 L14,5 L14,0 L9,0 L9,0 Z"></path></g></g></g></svg>',L=space(),I=element("div"),F=element("div"),M=element("h1"),D=text(e[15]),z=space(),N=element("div"),B=text(e[14]),q=space(),U=element("div"),J&&J.c(),attr(r,"class","minw16em filled abs t0 r0 p1 z-index99 flex column"),toggle_class(r,"none",!e[16]||e[16]&&e[0]!=e[6]),attr(E,"class","h100px cursor flex-column-space-between"),attr(R,"class","uppercase flex column-center-flex-start f3 h2em"),toggle_class(R,"hide",e[5]==_PLAYING&&!e[12]),attr(O,"class","block pointer p2 abs r1 b0"),set_style($,"transition","opacity 0.2s ease"),attr($,"class","flex column-center-center z-index99"),toggle_class($,"invisible",e[0]!=e[6]||!e[12]&&e[5]==_PLAYING),attr(M,"class","filled plr0-5 ptb0"),set_style(M,"font-size","6em"),attr(N,"class","filled f5 plr1 ptb0-5"),attr(F,"class","filled flex column-center-center mb2 maxw50pc"),attr(I,"class","flex column-center-center z-index99 p2"),toggle_class(I,"none",e[5]==_PLAYING||e[0]==e[6]),attr(U,"class","fill"),toggle_class(U,"block",e[5]==_PLAYING),toggle_class(U,"none",e[5]!=_PLAYING),attr(n,"class","flex column-stretch-center grow"),set_style(n,"height",e[2]+"px"),set_style(n,"transform","scale(1,"+(e[3]?e[1]/e[2]:1)+")"),toggle_class(n,"b8-solid",e[7].mousedown&&!e[3]),toggle_class(n,"b4-solid",!e[7].mousedown&&!e[3]),attr(t,"class","fill flex row-center-center ")},m(C,W){insert(C,t,W),append(t,n),append(n,r),append(r,i),append(i,o),append(i,s),append(r,a),append(r,l),append(l,c),append(l,u),append(r,h),append(r,p),append(p,f),append(p,d),append(r,_),append(r,g),append(g,m),append(g,v),append(r,y),append(r,b),append(b,w),append(b,x),append(n,k),append(n,$),append($,E),Z[T].m(E,null),append($,S),append($,R),append(R,A),append(A,P),append($,j),append($,O),append(n,L),append(n,I),append(I,F),append(F,M),append(M,D),append(F,z),append(F,N),append(N,B),append(n,q),append(n,U),J&&J.m(U,null),H=!0,Y||(V=[listen(E,"click",e[17]),listen(O,"click",e[19]),listen(t,"mousemove",e[18]),listen(t,"click",e[18])],Y=!0)},p(e,t){(!H||2048&t[0])&&W!==(W=(e[11]||"none")+"")&&set_data(s,W),(!H||32&t[0])&&set_data(u,e[5]),(!H||16&t[0])&&set_data(d,e[4]),(!H||4096&t[0])&&set_data(v,e[12]),(!H||256&t[0])&&G!==(G=e[8].toFixed(2)+"")&&set_data(x,G),65601&t[0]&&toggle_class(r,"none",!e[16]||e[16]&&e[0]!=e[6]);let i=T;T=K(e),T===i?Z[T].p(e,t):(group_outros(),transition_out(Z[i],1,1,(()=>{Z[i]=null})),check_outros(),C=Z[T],C?C.p(e,t):(C=Z[T]=Q[T](e),C.c()),transition_in(C,1),C.m(E,null)),(!H||528&t[0])&&X!==(X=(e[9]||e[4]||"")+"")&&set_data(P,X),4128&t[0]&&toggle_class(R,"hide",e[5]==_PLAYING&&!e[12]),4193&t[0]&&toggle_class($,"invisible",e[0]!=e[6]||!e[12]&&e[5]==_PLAYING),(!H||32768&t[0])&&set_data(D,e[15]),(!H||16384&t[0])&&set_data(B,e[14]),97&t[0]&&toggle_class(I,"none",e[5]==_PLAYING||e[0]==e[6]),J.p(e,t),32&t[0]&&toggle_class(U,"block",e[5]==_PLAYING),32&t[0]&&toggle_class(U,"none",e[5]!=_PLAYING),(!H||4&t[0])&&set_style(n,"height",e[2]+"px"),(!H||14&t[0])&&set_style(n,"transform","scale(1,"+(e[3]?e[1]/e[2]:1)+")"),136&t[0]&&toggle_class(n,"b8-solid",e[7].mousedown&&!e[3]),136&t[0]&&toggle_class(n,"b4-solid",!e[7].mousedown&&!e[3])},i(e){H||(transition_in(C),H=!0)},o(e){transition_out(C),H=!1},d(e){e&&detach(t),Z[T].d(),J&&J.d(),Y=!1,run_all(V)}}}let _LOADING="loading",_PLAYING="playing",_MESSAGE="message",_PAUSED="paused";const SRC="https://d2zihajmogu5jn.cloudfront.net/bipbop-advanced/bipbop_16x9_variant.m3u8";function instance$2(e,t,n){let r,i,o,s,a,l,c,u,h,p,f;component_subscribe(e,index,(e=>n(6,l=e))),component_subscribe(e,state,(e=>n(7,c=e))),component_subscribe(e,volume,(e=>n(8,u=e))),component_subscribe(e,trigger,(e=>n(25,h=e))),component_subscribe(e,live,(e=>n(26,p=e))),component_subscribe(e,data,(e=>n(27,f=e)));let d,_,g,m,{idx:v}=t,{width:y}=t,{height:b}=t,{stretch:w}=t,x="?debug"==window.location.search,k=!1,$="",E=_PLAYING,T=_LOADING,C={[_PLAYING]:[_PLAYING],[_PAUSED]:["canplay","canplaythrough","pause","canplay"],[_LOADING]:["loadstart","waiting"],[_MESSAGE]:["error","abort","suspend","ended"],misc:["progress","loadedmetadata","emptied","stalled","seeking","loadeddata","seeked","durationchange","timeupdate","play","pause","ratechange","resize","volumechange"]};onMount((async e=>{}));let S=-999;let R,A=!0;return e.$$set=e=>{"idx"in e&&n(0,v=e.idx),"width"in e&&n(1,y=e.width),"height"in e&&n(2,b=e.height),"stretch"in e&&n(3,w=e.stretch)},e.$$.update=()=>{134217729&e.$$.dirty[0]&&n(24,r=f?.stations?.[v]),16777216&e.$$.dirty[0]&&n(23,i=r?.id||"no-id"),16777216&e.$$.dirty[0]&&n(15,o=r?.title||"No title"),16777216&e.$$.dirty[0]&&n(13,s=r?.src||SRC),16777217&e.$$.dirty[0]&&r?.poster,75497472&e.$$.dirty[0]&&n(14,a=(p||[]).find((e=>e.id==i))?.message||""),45088945&e.$$.dirty[0]&&(async e=>{if(c.data&&c.inited){if(h==v){if(E==_LOADING&&n(4,E=_PLAYING),g||(console.log(`[Station]   initing ${i}`),await async function(){return new Promise(((e,t)=>{let r=window;r.players||(r.players={}),console.log(`[Station]  ${i} creating new player`),r.players[v]=n(21,g=videojs(_,{controls:!0,autoplay:!1,autoload:!1,loadingSpinner:!1,preload:"auto"},(t=>{console.log(`[Station]   ${i} player is ready ${s}`),n(20,k=!0),e(t)})));for(let[e,t]of Object.entries(C))for(let r of t)g.on(r,(t=>{n(11,m=r),d&&clearTimeout(d),"misc"!=e&&n(5,T=e),"misc"!=e&&console.log(`[Station]  ${i} ${e} ${r}`),e!=_PAUSED&&e!=_PLAYING||n(5,T=g.paused()?_PAUSED:_PLAYING),e==_MESSAGE&&(n(9,$={error:"Could not load stream",abort:"Stream was aborted",suspend:"Stream was suspended",ended:"Stream was ended"}[r]),console.log(`[Station]   message received ${r} ${$}`)),d=setTimeout((t=>{n(4,E=T),e!=_PAUSED&&e!=_PLAYING||n(4,E=g.paused()?_PAUSED:_PLAYING)}),100)}))}))}()),g.paused()&&k&&E==_PLAYING){console.log(`[Station]   playing ${i}`);try{await g.play()}catch(e){console.log(`[Station]   ${i} ${e.message}`),n(5,T=n(4,E=_PAUSED))}}}else g&&(g.paused()||(console.log(`[Station]   pausing ${i}`),n(4,E=_PAUSED),await g.pause()));setTimeout((e=>{g&&(console.log(`[Station] setting volume to max for ${i} `),volume.set(1),g.paused())}),100)}})(),2097408&e.$$.dirty[0]&&g&&g.volume()!=u&&g.volume(u),14680257&e.$$.dirty[0]&&(async e=>{c.data&&(l==v&&S!=l&&(console.log(`[Station]   loading ${i}`),n(5,T=n(4,E=g?g.paused()?_LOADING:_PLAYING:_LOADING))),n(22,S=l))})()},[v,y,b,w,E,T,l,c,u,$,_,m,A,s,a,o,x,function(e){const t=E==_PLAYING;n(4,E=t?_PAUSED:_PLAYING),console.log(`[Station] clicked ${E}`),t?g.pause():g.play()},function(e){n(12,A=!0),R&&clearTimeout(R),R=setTimeout((e=>n(12,A=!1)),2e3)},function(){_.requestFullscreen?_.requestFullscreen():_.webkitRequestFullscreen?_.webkitRequestFullscreen():_.msRequestFullscreen&&_.msRequestFullscreen()},k,g,S,i,r,h,p,f,function(e){binding_callbacks[e?"unshift":"push"]((()=>{_=e,n(10,_)}))}]}class Station extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$2,safe_not_equal,{idx:0,width:1,height:2,stretch:3},null,[-1,-1])}}function create_fragment$1(e){let t,n,r,i,o;return{c(){t=element("section"),n=element("div"),r=element("div"),i=space(),o=element("div"),o.innerHTML='<h1 class="filled plr1 ptb0" style="font-size:6em">PLAY</h1>',attr(r,"class","flex column-center-center z-index99 markdown"),toggle_class(r,"none",e[0]!=e[4]),attr(o,"class","flex row-center-center z-index99"),toggle_class(o,"none",e[0]==e[4]),attr(n,"class","flex column-center-center grow"),set_style(n,"height",e[2]+"px"),set_style(n,"transform","scale(1,"+(e[3]?e[1]/e[2]:1)+")"),toggle_class(n,"b2-solid",!e[3]),attr(t,"class","fill flex row-center-center ")},m(s,a){insert(s,t,a),append(t,n),append(n,r),r.innerHTML=e[5],append(n,i),append(n,o)},p(e,[t]){32&t&&(r.innerHTML=e[5]),17&t&&toggle_class(r,"none",e[0]!=e[4]),17&t&&toggle_class(o,"none",e[0]==e[4]),4&t&&set_style(n,"height",e[2]+"px"),14&t&&set_style(n,"transform","scale(1,"+(e[3]?e[1]/e[2]:1)+")"),8&t&&toggle_class(n,"b2-solid",!e[3])},i:noop,o:noop,d(e){e&&detach(t)}}}function instance$1(e,t,n){let r,i,o,s,a;component_subscribe(e,index,(e=>n(4,i=e))),component_subscribe(e,state,(e=>n(7,o=e))),component_subscribe(e,trigger,(e=>n(8,s=e))),component_subscribe(e,data,(e=>n(9,a=e)));let{idx:l}=t,{width:c}=t,{height:u}=t,{stretch:h}=t,p=-2;return e.$$set=e=>{"idx"in e&&n(0,l=e.idx),"width"in e&&n(1,c=e.width),"height"in e&&n(2,u=e.height),"stretch"in e&&n(3,h=e.stretch)},e.$$.update=()=>{512&e.$$.dirty&&n(5,r=a?.play||""),385&e.$$.dirty&&(async e=>{o.data&&o.inited})(),208&e.$$.dirty&&(async e=>{o.data&&p!=i&&n(6,p=i)})()},[l,c,u,h,i,r,p,o,s,a]}class Document extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{idx:0,width:1,height:2,stretch:3})}}const{window:window_1}=globals;function get_each_context(e,t,n){const r=e.slice();return r[20]=t[n],r[22]=n,r}function get_each_context_1(e,t,n){const r=e.slice();return r[20]=t[n],r[22]=n,r}function create_if_block_1(e){let t,n,r,i,o,s,a,l,c,u,h,p,f,d,_,g,m,v,y,b,w,x,k,$,E,T,C,S=e[2]?.nav||[],R=[];for(let t=0;t<S.length;t+=1)R[t]=create_each_block_1(get_each_context_1(e,S,t));v=new Cube({props:{components:e[8]}});let A=[...e[2]?.stations||[],{id:_PLAY,title:_PLAY}],P=[];for(let t=0;t<A.length;t+=1)P[t]=create_each_block(get_each_context(e,A,t));return{c(){t=element("div"),n=element("div"),r=element("header"),i=element("h1"),o=element("a"),o.innerHTML='<img src="vidicon.svg" class="w100pc"/> \n\t\t\t\t\t\t\t<span class="abs invisible">VIDICON</span>',s=space(),a=element("nav");for(let e=0;e<R.length;e+=1)R[e].c();l=space(),c=element("div"),c.textContent=`${_CHAT}`,u=space(),h=element("article"),p=element("div"),f=element("canvas"),g=space(),m=element("div"),create_component(v.$$.fragment),y=space(),b=element("footer"),w=element("div");for(let e=0;e<P.length;e+=1)P[e].c();x=space(),k=element("div"),$=text(e[3]),attr(o,"href","#"),attr(i,"class","flex maxw8em row-flex-start-center"),attr(c,"class","pointer clickable b2-solid plr1"),attr(c,"f",""),toggle_class(c,"filled",e[4]),attr(a,"class","flex no-basis grow row-flex-end-center maxwidth f3 monospace ptb1 z-index99"),attr(r,"class","flex row-space-between-center monospace maxwidth no-basis grow ptb1 wrap"),attr(f,"width",d=1280),attr(f,"height",_=720),attr(f,"class","w100pc invisible maxwidth"),attr(m,"class","cube fill flex relative grabbable"),attr(p,"class","flex flex row-center-center relative b0-solid"),attr(h,"class","flex grow row-center-center"),attr(w,"class","flex row-flex-start-center whitespace-nowrap"),attr(b,"class","flex no-basis grow row-space-between-center maxwidth f3 monospace ptb1 z-index99"),attr(n,"class","maxwidth flex column"),attr(t,"class","flex column-center-center p1 grow w100pc")},m(d,_){insert(d,t,_),append(t,n),append(n,r),append(r,i),append(i,o),append(r,s),append(r,a);for(let e=0;e<R.length;e+=1)R[e].m(a,null);append(a,l),append(a,c),append(n,u),append(n,h),append(h,p),append(p,f),append(p,g),append(p,m),mount_component(v,m,null),append(n,y),append(n,b),append(b,w);for(let e=0;e<P.length;e+=1)P[e].m(w,null);append(b,x),append(b,k),append(k,$),E=!0,T||(C=[listen(o,"click",e[15]),listen(c,"click",e[7]),listen(m,"mousedown",e[16]),listen(m,"mouseup",e[17])],T=!0)},p(e,t){if(4&t){let n;for(S=e[2]?.nav||[],n=0;n<S.length;n+=1){const r=get_each_context_1(e,S,n);R[n]?R[n].p(r,t):(R[n]=create_each_block_1(r),R[n].c(),R[n].m(a,l))}for(;n<R.length;n+=1)R[n].d(1);R.length=S.length}if(16&t&&toggle_class(c,"filled",e[4]),37&t){let n;for(A=[...e[2]?.stations||[],{id:_PLAY,title:_PLAY}],n=0;n<A.length;n+=1){const r=get_each_context(e,A,n);P[n]?P[n].p(r,t):(P[n]=create_each_block(r),P[n].c(),P[n].m(w,null))}for(;n<P.length;n+=1)P[n].d(1);P.length=A.length}(!E||8&t)&&set_data($,e[3])},i(e){E||(transition_in(v.$$.fragment,e),E=!0)},o(e){transition_out(v.$$.fragment,e),E=!1},d(e){e&&detach(t),destroy_each(R,e),destroy_component(v),destroy_each(P,e),T=!1,run_all(C)}}}function create_each_block_1(e){let t,n,r,i,o,s,a=e[20]?.title+"";return{c(){t=element("a"),n=text(a),o=space(),s=element("span"),attr(t,"class","unclickable block whitespace-nowrap"),attr(t,"target",r="#"==e[20]?.url?.[0]?"":"_blank"),attr(t,"href",i=e[20]?.url),attr(s,"class","block p0-2 mlr0-5 filled radius1em")},m(e,r){insert(e,t,r),append(t,n),insert(e,o,r),insert(e,s,r)},p(e,o){4&o&&a!==(a=e[20]?.title+"")&&set_data(n,a),4&o&&r!==(r="#"==e[20]?.url?.[0]?"":"_blank")&&attr(t,"target",r),4&o&&i!==(i=e[20]?.url)&&attr(t,"href",i)},d(e){e&&detach(t),e&&detach(o),e&&detach(s)}}}function create_if_block_2(e){let t;return{c(){t=element("span"),attr(t,"class","block p0-2 mlr0-5 filled radius1em")},m(e,n){insert(e,t,n)},d(e){e&&detach(t)}}}function create_each_block(e){let t,n,r,i,o,s,a=e[20]?.title+"",l=0!=e[22]&&create_if_block_2();return{c(){l&&l.c(),t=space(),n=element("a"),r=text(a),attr(n,"class","unclickable block whitespace-nowrap"),attr(n,"href",i="#"+e[20]?.id),toggle_class(n,"bb4-solid",e[0]==e[22])},m(i,a){l&&l.m(i,a),insert(i,t,a),insert(i,n,a),append(n,r),o||(s=listen(n,"click",e[18]),o=!0)},p(e,t){4&t&&a!==(a=e[20]?.title+"")&&set_data(r,a),4&t&&i!==(i="#"+e[20]?.id)&&attr(n,"href",i),1&t&&toggle_class(n,"bb4-solid",e[0]==e[22])},d(e){l&&l.d(e),e&&detach(t),e&&detach(n),o=!1,s()}}}function create_if_block(e){let t,n,r;return n=new Chat({props:{$$slots:{default:[create_default_slot]},$$scope:{ctx:e}}}),{c(){t=element("div"),create_component(n.$$.fragment),attr(t,"class","flex grow column"),set_style(t,"transform","skew(0deg, -0deg)"),toggle_class(t,"maxw56em",e[0]<6),toggle_class(t,"bl2-solid",e[0]<6)},m(e,i){insert(e,t,i),mount_component(n,t,null),r=!0},p(e,r){const i={};16777217&r&&(i.$$scope={dirty:r,ctx:e}),n.$set(i),1&r&&toggle_class(t,"maxw56em",e[0]<6),1&r&&toggle_class(t,"bl2-solid",e[0]<6)},i(e){r||(transition_in(n.$$.fragment,e),r=!0)},o(e){transition_out(n.$$.fragment,e),r=!1},d(e){e&&detach(t),destroy_component(n)}}}function create_default_slot(e){let t,n,r,i,o,s,a;return{c(){t=element("div"),n=element("div"),n.innerHTML='<svg class="w2em overflow-hidden h3em rel t0-2 ml1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="400" height="356.58914728682174" viewBox="0, 0, 400,356.58914728682174"><g id="svgg"><path id="path0" d="M265.116 20.547 C 265.116 20.763,272.640 28.462,281.835 37.657 L 298.553 54.376 248.501 104.707 C 220.973 132.389,198.450 155.312,198.450 155.646 C 198.450 156.682,224.636 182.171,225.700 182.171 C 226.253 182.171,249.048 159.845,276.357 132.558 C 303.665 105.271,326.259 82.946,326.566 82.946 C 326.872 82.946,334.623 90.446,343.790 99.612 C 352.956 108.779,360.633 116.279,360.848 116.279 C 361.064 116.279,361.240 94.651,361.240 68.217 L 361.240 20.155 313.178 20.155 C 286.744 20.155,265.116 20.331,265.116 20.547 M51.163 194.574 L 51.163 330.233 186.822 330.233 L 322.481 330.233 322.481 252.713 L 322.481 175.194 303.101 175.194 L 283.721 175.194 283.721 233.333 L 283.721 291.473 186.822 291.473 L 89.922 291.473 89.922 194.574 L 89.922 97.674 148.062 97.674 L 206.202 97.674 206.202 78.295 L 206.202 58.915 128.682 58.915 L 51.163 58.915 51.163 194.574 " stroke="none" fill="var(--color)" fill-rule="evenodd"></path></g></svg>',r=space(),i=element("img"),attr(n,"class","pointer"),toggle_class(n,"none",e[0]>=6),src_url_equal(i.src,o="vidicon.svg")||attr(i,"src","vidicon.svg"),attr(i,"class","maxw6em minw6em ml1 w100pc h100pc"),toggle_class(i,"none",e[0]<6),attr(t,"class","flex row-center-center")},m(o,l){insert(o,t,l),append(t,n),append(t,r),append(t,i),s||(a=listen(n,"click",e[9]),s=!0)},p(e,t){1&t&&toggle_class(n,"none",e[0]>=6),1&t&&toggle_class(i,"none",e[0]<6)},d(e){e&&detach(t),s=!1,a()}}}function create_fragment(e){let t,n,r,i,o,s=e[1].inited&&e[0]<=5&&e[1].data&&create_if_block_1(e),a=(e[4]||6==e[0])&&create_if_block(e);return{c(){t=element("main"),s&&s.c(),n=space(),a&&a.c(),attr(t,"class","sassis flex row-center-stretch w100vw h100vh overflow-auto")},m(l,c){insert(l,t,c),s&&s.m(t,null),append(t,n),a&&a.m(t,null),r=!0,i||(o=listen(window_1,"hashchange",e[6]),i=!0)},p(e,[r]){e[1].inited&&e[0]<=5&&e[1].data?s?(s.p(e,r),3&r&&transition_in(s,1)):(s=create_if_block_1(e),s.c(),transition_in(s,1),s.m(t,n)):s&&(group_outros(),transition_out(s,1,1,(()=>{s=null})),check_outros()),e[4]||6==e[0]?a?(a.p(e,r),17&r&&transition_in(a,1)):(a=create_if_block(e),a.c(),transition_in(a,1),a.m(t,null)):a&&(group_outros(),transition_out(a,1,1,(()=>{a=null})),check_outros())},i(e){r||(transition_in(s),transition_in(a),r=!0)},o(e){transition_out(s),transition_out(a),r=!1},d(e){e&&detach(t),s&&s.d(),a&&a.d(),i=!1,o()}}}const _PLAY="PLAY",_CHAT="CHAT",_NOCHAT="NOCHAT";function getChat(){return window.localStorage.getItem(_CHAT)==_CHAT}function instance(e,t,n){let r,i,o,s,a,l,c,u;component_subscribe(e,chat,(e=>n(4,o=e))),component_subscribe(e,live,(e=>n(14,s=e))),component_subscribe(e,index,(e=>n(0,a=e))),component_subscribe(e,state,(e=>n(1,l=e))),component_subscribe(e,data,(e=>n(2,c=e))),component_subscribe(e,smoothing,(e=>n(5,u=e)));let h,{name:p}=t;function f(e){if(!l.data)return;n(11,h=window.location.hash.substring(1));let t=r.indexOf(h);console.log(`[App]   setting index from hash ${h} ${t}`),index.set(t)}onMount((async e=>{await data.set(await FetchData()),console.log("[App] mounted"),set_store_value(state,l.data=!0,l),set_store_value(chat,o=getChat(),o),f(),set_store_value(state,l.hash=!0,l),set_store_value(state,l.inited=!0,l),_()}));let d=-2;async function _(){if(a<6){let e=await FetchLiveInfo();e&&set_store_value(live,s=window.live=e,s)}setTimeout(_,5e3)}let g=[Station,Station,Station,Station,Station,Document];return e.$$set=e=>{"name"in e&&n(10,p=e.name)},e.$$.update=()=>{4&e.$$.dirty&&n(13,r=[...(c?.stations||[]).map((e=>e.id)),_PLAY,_CHAT]),12291&e.$$.dirty&&(e=>{if(!l.inited||!l.data||d==a)return;let t=r[a];console.log(`[App]  setting hash from id ${t} ${a}`),window.location.hash=t||"",n(12,d=a),setTimeout((e=>set_store_value(state,l.hash=!1,l)),10)})(),18432&e.$$.dirty&&n(3,i=(s||[]).find((e=>e.id==h))?.message||"")},[a,l,c,i,o,u,f,function(e){let t=o?_NOCHAT:_CHAT;window.localStorage.setItem(_CHAT,t),set_store_value(chat,o=getChat(),o),console.log(`[App]  toggled chat to ${t} ${o}`)},g,function(){window.localStorage.setItem(_CHAT,_NOCHAT),set_store_value(chat,o=!1,o),window.open("#"+_CHAT,_CHAT,"directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,scrollbars=no,resizable=no,width=600,height=800")},p,h,d,r,s,e=>set_store_value(smoothing,u=.9,u),e=>set_store_value(state,l.mousedown=!0,l),e=>set_store_value(state,l.mousedown=!1,l),e=>set_store_value(smoothing,u=0,u)]}class App extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{name:10})}}const app=new App({target:document.body,props:{name:"world"}});return app}();
//# sourceMappingURL=bundle.js.map
